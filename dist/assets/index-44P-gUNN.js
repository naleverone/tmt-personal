var vy=Object.defineProperty;var wy=(t,e,n)=>e in t?vy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>wy(t,typeof e!="symbol"?e+"":e,n);function _y(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function by(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ky(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var jp={exports:{}},_a={},Ep={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ni=Symbol.for("react.element"),Sy=Symbol.for("react.portal"),jy=Symbol.for("react.fragment"),Ey=Symbol.for("react.strict_mode"),Cy=Symbol.for("react.profiler"),Py=Symbol.for("react.provider"),Ty=Symbol.for("react.context"),Ny=Symbol.for("react.forward_ref"),Oy=Symbol.for("react.suspense"),My=Symbol.for("react.memo"),Ly=Symbol.for("react.lazy"),Pd=Symbol.iterator;function Ay(t){return t===null||typeof t!="object"?null:(t=Pd&&t[Pd]||t["@@iterator"],typeof t=="function"?t:null)}var Cp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pp=Object.assign,Tp={};function ls(t,e,n){this.props=t,this.context=e,this.refs=Tp,this.updater=n||Cp}ls.prototype.isReactComponent={};ls.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ls.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Np(){}Np.prototype=ls.prototype;function ou(t,e,n){this.props=t,this.context=e,this.refs=Tp,this.updater=n||Cp}var au=ou.prototype=new Np;au.constructor=ou;Pp(au,ls.prototype);au.isPureReactComponent=!0;var Td=Array.isArray,Op=Object.prototype.hasOwnProperty,lu={current:null},Mp={key:!0,ref:!0,__self:!0,__source:!0};function Lp(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Op.call(e,r)&&!Mp.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ni,type:t,key:i,ref:o,props:s,_owner:lu.current}}function Dy(t,e){return{$$typeof:Ni,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ni}function Ry(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Nd=/\/+/g;function Ja(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ry(""+t.key):e.toString(36)}function _o(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ni:case Sy:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ja(o,0):r,Td(s)?(n="",t!=null&&(n=t.replace(Nd,"$&/")+"/"),_o(s,e,n,"",function(c){return c})):s!=null&&(cu(s)&&(s=Dy(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Nd,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Td(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Ja(i,a);o+=_o(i,e,n,l,s)}else if(l=Ay(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Ja(i,a++),o+=_o(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zi(t,e,n){if(t==null)return t;var r=[],s=0;return _o(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Iy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qe={current:null},bo={transition:null},Fy={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:bo,ReactCurrentOwner:lu};function Ap(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:zi,forEach:function(t,e,n){zi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zi(t,function(){e++}),e},toArray:function(t){return zi(t,function(e){return e})||[]},only:function(t){if(!cu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Component=ls;V.Fragment=jy;V.Profiler=Cy;V.PureComponent=ou;V.StrictMode=Ey;V.Suspense=Oy;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fy;V.act=Ap;V.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Pp({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=lu.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Op.call(e,l)&&!Mp.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ni,type:t.type,key:s,ref:i,props:r,_owner:o}};V.createContext=function(t){return t={$$typeof:Ty,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Py,_context:t},t.Consumer=t};V.createElement=Lp;V.createFactory=function(t){var e=Lp.bind(null,t);return e.type=t,e};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:Ny,render:t}};V.isValidElement=cu;V.lazy=function(t){return{$$typeof:Ly,_payload:{_status:-1,_result:t},_init:Iy}};V.memo=function(t,e){return{$$typeof:My,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=bo.transition;bo.transition={};try{t()}finally{bo.transition=e}};V.unstable_act=Ap;V.useCallback=function(t,e){return qe.current.useCallback(t,e)};V.useContext=function(t){return qe.current.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t){return qe.current.useDeferredValue(t)};V.useEffect=function(t,e){return qe.current.useEffect(t,e)};V.useId=function(){return qe.current.useId()};V.useImperativeHandle=function(t,e,n){return qe.current.useImperativeHandle(t,e,n)};V.useInsertionEffect=function(t,e){return qe.current.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return qe.current.useLayoutEffect(t,e)};V.useMemo=function(t,e){return qe.current.useMemo(t,e)};V.useReducer=function(t,e,n){return qe.current.useReducer(t,e,n)};V.useRef=function(t){return qe.current.useRef(t)};V.useState=function(t){return qe.current.useState(t)};V.useSyncExternalStore=function(t,e,n){return qe.current.useSyncExternalStore(t,e,n)};V.useTransition=function(){return qe.current.useTransition()};V.version="18.3.1";Ep.exports=V;var k=Ep.exports;const Sn=by(k),zy=_y({__proto__:null,default:Sn},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $y=k,By=Symbol.for("react.element"),Uy=Symbol.for("react.fragment"),Wy=Object.prototype.hasOwnProperty,Hy=$y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vy={key:!0,ref:!0,__self:!0,__source:!0};function Dp(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Wy.call(e,r)&&!Vy.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:By,type:t,key:i,ref:o,props:s,_owner:Hy.current}}_a.Fragment=Uy;_a.jsx=Dp;_a.jsxs=Dp;jp.exports=_a;var d=jp.exports,Vl={},Rp={exports:{}},lt={},Ip={exports:{}},Fp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,P){var O=C.length;C.push(P);e:for(;0<O;){var D=O-1>>>1,$=C[D];if(0<s($,P))C[D]=P,C[O]=$,O=D;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var P=C[0],O=C.pop();if(O!==P){C[0]=O;e:for(var D=0,$=C.length,me=$>>>1;D<me;){var Ce=2*(D+1)-1,kt=C[Ce],Pe=Ce+1,St=C[Pe];if(0>s(kt,O))Pe<$&&0>s(St,kt)?(C[D]=St,C[Pe]=O,D=Pe):(C[D]=kt,C[Ce]=O,D=Ce);else if(Pe<$&&0>s(St,O))C[D]=St,C[Pe]=O,D=Pe;else break e}}return P}function s(C,P){var O=C.sortIndex-P.sortIndex;return O!==0?O:C.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,p=!1,x=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(C){for(var P=n(c);P!==null;){if(P.callback===null)r(c);else if(P.startTime<=C)r(c),P.sortIndex=P.expirationTime,e(l,P);else break;P=n(c)}}function _(C){if(g=!1,w(C),!x)if(n(l)!==null)x=!0,B(b);else{var P=n(c);P!==null&&I(_,P.startTime-C)}}function b(C,P){x=!1,g&&(g=!1,y(E),E=-1),p=!0;var O=f;try{for(w(P),h=n(l);h!==null&&(!(h.expirationTime>P)||C&&!R());){var D=h.callback;if(typeof D=="function"){h.callback=null,f=h.priorityLevel;var $=D(h.expirationTime<=P);P=t.unstable_now(),typeof $=="function"?h.callback=$:h===n(l)&&r(l),w(P)}else r(l);h=n(l)}if(h!==null)var me=!0;else{var Ce=n(c);Ce!==null&&I(_,Ce.startTime-P),me=!1}return me}finally{h=null,f=O,p=!1}}var j=!1,S=null,E=-1,L=5,N=-1;function R(){return!(t.unstable_now()-N<L)}function F(){if(S!==null){var C=t.unstable_now();N=C;var P=!0;try{P=S(!0,C)}finally{P?X():(j=!1,S=null)}}else j=!1}var X;if(typeof m=="function")X=function(){m(F)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,K=ie.port2;ie.port1.onmessage=F,X=function(){K.postMessage(null)}}else X=function(){v(F,0)};function B(C){S=C,j||(j=!0,X())}function I(C,P){E=v(function(){C(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){x||p||(x=!0,B(b))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(C){switch(f){case 1:case 2:case 3:var P=3;break;default:P=f}var O=f;f=P;try{return C()}finally{f=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,P){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var O=f;f=C;try{return P()}finally{f=O}},t.unstable_scheduleCallback=function(C,P,O){var D=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?D+O:D):O=D,C){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=O+$,C={id:u++,callback:P,priorityLevel:C,startTime:O,expirationTime:$,sortIndex:-1},O>D?(C.sortIndex=O,e(c,C),n(l)===null&&C===n(c)&&(g?(y(E),E=-1):g=!0,I(_,O-D))):(C.sortIndex=$,e(l,C),x||p||(x=!0,B(b))),C},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(C){var P=f;return function(){var O=f;f=P;try{return C.apply(this,arguments)}finally{f=O}}}})(Fp);Ip.exports=Fp;var qy=Ip.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky=k,at=qy;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zp=new Set,si={};function xr(t,e){Xr(t,e),Xr(t+"Capture",e)}function Xr(t,e){for(si[t]=e,t=0;t<e.length;t++)zp.add(e[t])}var en=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ql=Object.prototype.hasOwnProperty,Yy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Od={},Md={};function Qy(t){return ql.call(Md,t)?!0:ql.call(Od,t)?!1:Yy.test(t)?Md[t]=!0:(Od[t]=!0,!1)}function Gy(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Xy(t,e,n,r){if(e===null||typeof e>"u"||Gy(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ke(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Le[t]=new Ke(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Le[e]=new Ke(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Le[t]=new Ke(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Le[t]=new Ke(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Le[t]=new Ke(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Le[t]=new Ke(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Le[t]=new Ke(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Le[t]=new Ke(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Le[t]=new Ke(t,5,!1,t.toLowerCase(),null,!1,!1)});var uu=/[\-:]([a-z])/g;function du(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uu,du);Le[e]=new Ke(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uu,du);Le[e]=new Ke(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uu,du);Le[e]=new Ke(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Le[t]=new Ke(t,1,!1,t.toLowerCase(),null,!1,!1)});Le.xlinkHref=new Ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Le[t]=new Ke(t,1,!1,t.toLowerCase(),null,!0,!0)});function hu(t,e,n,r){var s=Le.hasOwnProperty(e)?Le[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Xy(e,n,s,r)&&(n=null),r||s===null?Qy(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sn=Ky.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$i=Symbol.for("react.element"),Tr=Symbol.for("react.portal"),Nr=Symbol.for("react.fragment"),fu=Symbol.for("react.strict_mode"),Kl=Symbol.for("react.profiler"),$p=Symbol.for("react.provider"),Bp=Symbol.for("react.context"),pu=Symbol.for("react.forward_ref"),Yl=Symbol.for("react.suspense"),Ql=Symbol.for("react.suspense_list"),gu=Symbol.for("react.memo"),fn=Symbol.for("react.lazy"),Up=Symbol.for("react.offscreen"),Ld=Symbol.iterator;function ys(t){return t===null||typeof t!="object"?null:(t=Ld&&t[Ld]||t["@@iterator"],typeof t=="function"?t:null)}var he=Object.assign,Za;function Ls(t){if(Za===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Za=e&&e[1]||""}return`
`+Za+t}var el=!1;function tl(t,e){if(!t||el)return"";el=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{el=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ls(t):""}function Jy(t){switch(t.tag){case 5:return Ls(t.type);case 16:return Ls("Lazy");case 13:return Ls("Suspense");case 19:return Ls("SuspenseList");case 0:case 2:case 15:return t=tl(t.type,!1),t;case 11:return t=tl(t.type.render,!1),t;case 1:return t=tl(t.type,!0),t;default:return""}}function Gl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Nr:return"Fragment";case Tr:return"Portal";case Kl:return"Profiler";case fu:return"StrictMode";case Yl:return"Suspense";case Ql:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bp:return(t.displayName||"Context")+".Consumer";case $p:return(t._context.displayName||"Context")+".Provider";case pu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gu:return e=t.displayName||null,e!==null?e:Gl(t.type)||"Memo";case fn:e=t._payload,t=t._init;try{return Gl(t(e))}catch{}}return null}function Zy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gl(e);case 8:return e===fu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function In(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ex(t){var e=Wp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bi(t){t._valueTracker||(t._valueTracker=ex(t))}function Hp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Wp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xl(t,e){var n=e.checked;return he({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ad(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=In(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vp(t,e){e=e.checked,e!=null&&hu(t,"checked",e,!1)}function Jl(t,e){Vp(t,e);var n=In(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zl(t,e.type,In(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zl(t,e,n){(e!=="number"||Fo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var As=Array.isArray;function Ur(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+In(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ec(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return he({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(T(92));if(As(n)){if(1<n.length)throw Error(T(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:In(n)}}function qp(t,e){var n=In(e.value),r=In(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Id(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Kp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Kp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ui,Yp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ui=Ui||document.createElement("div"),Ui.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ui.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ii(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tx=["Webkit","ms","Moz","O"];Object.keys(Bs).forEach(function(t){tx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bs[e]=Bs[t]})});function Qp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bs.hasOwnProperty(t)&&Bs[t]?(""+e).trim():e+"px"}function Gp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Qp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var nx=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nc(t,e){if(e){if(nx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function rc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sc=null;function mu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ic=null,Wr=null,Hr=null;function Fd(t){if(t=Li(t)){if(typeof ic!="function")throw Error(T(280));var e=t.stateNode;e&&(e=Ea(e),ic(t.stateNode,t.type,e))}}function Xp(t){Wr?Hr?Hr.push(t):Hr=[t]:Wr=t}function Jp(){if(Wr){var t=Wr,e=Hr;if(Hr=Wr=null,Fd(t),e)for(t=0;t<e.length;t++)Fd(e[t])}}function Zp(t,e){return t(e)}function eg(){}var nl=!1;function tg(t,e,n){if(nl)return t(e,n);nl=!0;try{return Zp(t,e,n)}finally{nl=!1,(Wr!==null||Hr!==null)&&(eg(),Jp())}}function oi(t,e){var n=t.stateNode;if(n===null)return null;var r=Ea(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(T(231,e,typeof n));return n}var oc=!1;if(en)try{var xs={};Object.defineProperty(xs,"passive",{get:function(){oc=!0}}),window.addEventListener("test",xs,xs),window.removeEventListener("test",xs,xs)}catch{oc=!1}function rx(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Us=!1,zo=null,$o=!1,ac=null,sx={onError:function(t){Us=!0,zo=t}};function ix(t,e,n,r,s,i,o,a,l){Us=!1,zo=null,rx.apply(sx,arguments)}function ox(t,e,n,r,s,i,o,a,l){if(ix.apply(this,arguments),Us){if(Us){var c=zo;Us=!1,zo=null}else throw Error(T(198));$o||($o=!0,ac=c)}}function vr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ng(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zd(t){if(vr(t)!==t)throw Error(T(188))}function ax(t){var e=t.alternate;if(!e){if(e=vr(t),e===null)throw Error(T(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return zd(s),t;if(i===r)return zd(s),e;i=i.sibling}throw Error(T(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(T(189))}}if(n.alternate!==r)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?t:e}function rg(t){return t=ax(t),t!==null?sg(t):null}function sg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sg(t);if(e!==null)return e;t=t.sibling}return null}var ig=at.unstable_scheduleCallback,$d=at.unstable_cancelCallback,lx=at.unstable_shouldYield,cx=at.unstable_requestPaint,ye=at.unstable_now,ux=at.unstable_getCurrentPriorityLevel,yu=at.unstable_ImmediatePriority,og=at.unstable_UserBlockingPriority,Bo=at.unstable_NormalPriority,dx=at.unstable_LowPriority,ag=at.unstable_IdlePriority,ba=null,Ut=null;function hx(t){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(ba,t,void 0,(t.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:gx,fx=Math.log,px=Math.LN2;function gx(t){return t>>>=0,t===0?32:31-(fx(t)/px|0)|0}var Wi=64,Hi=4194304;function Ds(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ds(a):(i&=o,i!==0&&(r=Ds(i)))}else o=n&~s,o!==0?r=Ds(o):i!==0&&(r=Ds(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mt(e),s=1<<n,r|=t[n],e&=~s;return r}function mx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Mt(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=mx(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function lc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lg(){var t=Wi;return Wi<<=1,!(Wi&4194240)&&(Wi=64),t}function rl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Oi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mt(e),t[e]=n}function xx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Mt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function xu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var te=0;function cg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ug,vu,dg,hg,fg,cc=!1,Vi=[],jn=null,En=null,Cn=null,ai=new Map,li=new Map,mn=[],vx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bd(t,e){switch(t){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":ai.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":li.delete(e.pointerId)}}function vs(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Li(e),e!==null&&vu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function wx(t,e,n,r,s){switch(e){case"focusin":return jn=vs(jn,t,e,n,r,s),!0;case"dragenter":return En=vs(En,t,e,n,r,s),!0;case"mouseover":return Cn=vs(Cn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ai.set(i,vs(ai.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,li.set(i,vs(li.get(i)||null,t,e,n,r,s)),!0}return!1}function pg(t){var e=ir(t.target);if(e!==null){var n=vr(e);if(n!==null){if(e=n.tag,e===13){if(e=ng(n),e!==null){t.blockedOn=e,fg(t.priority,function(){dg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ko(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sc=r,n.target.dispatchEvent(r),sc=null}else return e=Li(n),e!==null&&vu(e),t.blockedOn=n,!1;e.shift()}return!0}function Ud(t,e,n){ko(t)&&n.delete(e)}function _x(){cc=!1,jn!==null&&ko(jn)&&(jn=null),En!==null&&ko(En)&&(En=null),Cn!==null&&ko(Cn)&&(Cn=null),ai.forEach(Ud),li.forEach(Ud)}function ws(t,e){t.blockedOn===e&&(t.blockedOn=null,cc||(cc=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,_x)))}function ci(t){function e(s){return ws(s,t)}if(0<Vi.length){ws(Vi[0],t);for(var n=1;n<Vi.length;n++){var r=Vi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jn!==null&&ws(jn,t),En!==null&&ws(En,t),Cn!==null&&ws(Cn,t),ai.forEach(e),li.forEach(e),n=0;n<mn.length;n++)r=mn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mn.length&&(n=mn[0],n.blockedOn===null);)pg(n),n.blockedOn===null&&mn.shift()}var Vr=sn.ReactCurrentBatchConfig,Wo=!0;function bx(t,e,n,r){var s=te,i=Vr.transition;Vr.transition=null;try{te=1,wu(t,e,n,r)}finally{te=s,Vr.transition=i}}function kx(t,e,n,r){var s=te,i=Vr.transition;Vr.transition=null;try{te=4,wu(t,e,n,r)}finally{te=s,Vr.transition=i}}function wu(t,e,n,r){if(Wo){var s=uc(t,e,n,r);if(s===null)fl(t,e,r,Ho,n),Bd(t,r);else if(wx(s,t,e,n,r))r.stopPropagation();else if(Bd(t,r),e&4&&-1<vx.indexOf(t)){for(;s!==null;){var i=Li(s);if(i!==null&&ug(i),i=uc(t,e,n,r),i===null&&fl(t,e,r,Ho,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else fl(t,e,r,null,n)}}var Ho=null;function uc(t,e,n,r){if(Ho=null,t=mu(r),t=ir(t),t!==null)if(e=vr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ng(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ho=t,null}function gg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ux()){case yu:return 1;case og:return 4;case Bo:case dx:return 16;case ag:return 536870912;default:return 16}default:return 16}}var vn=null,_u=null,So=null;function mg(){if(So)return So;var t,e=_u,n=e.length,r,s="value"in vn?vn.value:vn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return So=s.slice(t,1<r?1-r:void 0)}function jo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qi(){return!0}function Wd(){return!1}function ct(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qi:Wd,this.isPropagationStopped=Wd,this}return he(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qi)},persist:function(){},isPersistent:qi}),e}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bu=ct(cs),Mi=he({},cs,{view:0,detail:0}),Sx=ct(Mi),sl,il,_s,ka=he({},Mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ku,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_s&&(_s&&t.type==="mousemove"?(sl=t.screenX-_s.screenX,il=t.screenY-_s.screenY):il=sl=0,_s=t),sl)},movementY:function(t){return"movementY"in t?t.movementY:il}}),Hd=ct(ka),jx=he({},ka,{dataTransfer:0}),Ex=ct(jx),Cx=he({},Mi,{relatedTarget:0}),ol=ct(Cx),Px=he({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),Tx=ct(Px),Nx=he({},cs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ox=ct(Nx),Mx=he({},cs,{data:0}),Vd=ct(Mx),Lx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ax={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Dx[t])?!!e[t]:!1}function ku(){return Rx}var Ix=he({},Mi,{key:function(t){if(t.key){var e=Lx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ax[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ku,charCode:function(t){return t.type==="keypress"?jo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fx=ct(Ix),zx=he({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qd=ct(zx),$x=he({},Mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ku}),Bx=ct($x),Ux=he({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wx=ct(Ux),Hx=he({},ka,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vx=ct(Hx),qx=[9,13,27,32],Su=en&&"CompositionEvent"in window,Ws=null;en&&"documentMode"in document&&(Ws=document.documentMode);var Kx=en&&"TextEvent"in window&&!Ws,yg=en&&(!Su||Ws&&8<Ws&&11>=Ws),Kd=" ",Yd=!1;function xg(t,e){switch(t){case"keyup":return qx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Or=!1;function Yx(t,e){switch(t){case"compositionend":return vg(e);case"keypress":return e.which!==32?null:(Yd=!0,Kd);case"textInput":return t=e.data,t===Kd&&Yd?null:t;default:return null}}function Qx(t,e){if(Or)return t==="compositionend"||!Su&&xg(t,e)?(t=mg(),So=_u=vn=null,Or=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yg&&e.locale!=="ko"?null:e.data;default:return null}}var Gx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Gx[t.type]:e==="textarea"}function wg(t,e,n,r){Xp(r),e=Vo(e,"onChange"),0<e.length&&(n=new bu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Hs=null,ui=null;function Xx(t){Og(t,0)}function Sa(t){var e=Ar(t);if(Hp(e))return t}function Jx(t,e){if(t==="change")return e}var _g=!1;if(en){var al;if(en){var ll="oninput"in document;if(!ll){var Gd=document.createElement("div");Gd.setAttribute("oninput","return;"),ll=typeof Gd.oninput=="function"}al=ll}else al=!1;_g=al&&(!document.documentMode||9<document.documentMode)}function Xd(){Hs&&(Hs.detachEvent("onpropertychange",bg),ui=Hs=null)}function bg(t){if(t.propertyName==="value"&&Sa(ui)){var e=[];wg(e,ui,t,mu(t)),tg(Xx,e)}}function Zx(t,e,n){t==="focusin"?(Xd(),Hs=e,ui=n,Hs.attachEvent("onpropertychange",bg)):t==="focusout"&&Xd()}function ev(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sa(ui)}function tv(t,e){if(t==="click")return Sa(e)}function nv(t,e){if(t==="input"||t==="change")return Sa(e)}function rv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var At=typeof Object.is=="function"?Object.is:rv;function di(t,e){if(At(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ql.call(e,s)||!At(t[s],e[s]))return!1}return!0}function Jd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zd(t,e){var n=Jd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jd(n)}}function kg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sg(){for(var t=window,e=Fo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fo(t.document)}return e}function ju(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sv(t){var e=Sg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kg(n.ownerDocument.documentElement,n)){if(r!==null&&ju(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Zd(n,i);var o=Zd(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iv=en&&"documentMode"in document&&11>=document.documentMode,Mr=null,dc=null,Vs=null,hc=!1;function eh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hc||Mr==null||Mr!==Fo(r)||(r=Mr,"selectionStart"in r&&ju(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vs&&di(Vs,r)||(Vs=r,r=Vo(dc,"onSelect"),0<r.length&&(e=new bu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Mr)))}function Ki(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Lr={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionend:Ki("Transition","TransitionEnd")},cl={},jg={};en&&(jg=document.createElement("div").style,"AnimationEvent"in window||(delete Lr.animationend.animation,delete Lr.animationiteration.animation,delete Lr.animationstart.animation),"TransitionEvent"in window||delete Lr.transitionend.transition);function ja(t){if(cl[t])return cl[t];if(!Lr[t])return t;var e=Lr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jg)return cl[t]=e[n];return t}var Eg=ja("animationend"),Cg=ja("animationiteration"),Pg=ja("animationstart"),Tg=ja("transitionend"),Ng=new Map,th="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Un(t,e){Ng.set(t,e),xr(e,[t])}for(var ul=0;ul<th.length;ul++){var dl=th[ul],ov=dl.toLowerCase(),av=dl[0].toUpperCase()+dl.slice(1);Un(ov,"on"+av)}Un(Eg,"onAnimationEnd");Un(Cg,"onAnimationIteration");Un(Pg,"onAnimationStart");Un("dblclick","onDoubleClick");Un("focusin","onFocus");Un("focusout","onBlur");Un(Tg,"onTransitionEnd");Xr("onMouseEnter",["mouseout","mouseover"]);Xr("onMouseLeave",["mouseout","mouseover"]);Xr("onPointerEnter",["pointerout","pointerover"]);Xr("onPointerLeave",["pointerout","pointerover"]);xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rs));function nh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ox(r,e,void 0,t),t.currentTarget=null}function Og(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;nh(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;nh(s,a,c),i=l}}}if($o)throw t=ac,$o=!1,ac=null,t}function oe(t,e){var n=e[yc];n===void 0&&(n=e[yc]=new Set);var r=t+"__bubble";n.has(r)||(Mg(e,t,2,!1),n.add(r))}function hl(t,e,n){var r=0;e&&(r|=4),Mg(n,t,r,e)}var Yi="_reactListening"+Math.random().toString(36).slice(2);function hi(t){if(!t[Yi]){t[Yi]=!0,zp.forEach(function(n){n!=="selectionchange"&&(lv.has(n)||hl(n,!1,t),hl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yi]||(e[Yi]=!0,hl("selectionchange",!1,e))}}function Mg(t,e,n,r){switch(gg(e)){case 1:var s=bx;break;case 4:s=kx;break;default:s=wu}n=s.bind(null,e,n,t),s=void 0,!oc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function fl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ir(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}tg(function(){var c=i,u=mu(n),h=[];e:{var f=Ng.get(t);if(f!==void 0){var p=bu,x=t;switch(t){case"keypress":if(jo(n)===0)break e;case"keydown":case"keyup":p=Fx;break;case"focusin":x="focus",p=ol;break;case"focusout":x="blur",p=ol;break;case"beforeblur":case"afterblur":p=ol;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Hd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Ex;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Bx;break;case Eg:case Cg:case Pg:p=Tx;break;case Tg:p=Wx;break;case"scroll":p=Sx;break;case"wheel":p=Vx;break;case"copy":case"cut":case"paste":p=Ox;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=qd}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var m=c,w;m!==null;){w=m;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,y!==null&&(_=oi(m,y),_!=null&&g.push(fi(m,_,w)))),v)break;m=m.return}0<g.length&&(f=new p(f,x,null,n,u),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==sc&&(x=n.relatedTarget||n.fromElement)&&(ir(x)||x[tn]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(x=n.relatedTarget||n.toElement,p=c,x=x?ir(x):null,x!==null&&(v=vr(x),x!==v||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=c),p!==x)){if(g=Hd,_="onMouseLeave",y="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(g=qd,_="onPointerLeave",y="onPointerEnter",m="pointer"),v=p==null?f:Ar(p),w=x==null?f:Ar(x),f=new g(_,m+"leave",p,n,u),f.target=v,f.relatedTarget=w,_=null,ir(u)===c&&(g=new g(y,m+"enter",x,n,u),g.target=w,g.relatedTarget=v,_=g),v=_,p&&x)t:{for(g=p,y=x,m=0,w=g;w;w=br(w))m++;for(w=0,_=y;_;_=br(_))w++;for(;0<m-w;)g=br(g),m--;for(;0<w-m;)y=br(y),w--;for(;m--;){if(g===y||y!==null&&g===y.alternate)break t;g=br(g),y=br(y)}g=null}else g=null;p!==null&&rh(h,f,p,g,!1),x!==null&&v!==null&&rh(h,v,x,g,!0)}}e:{if(f=c?Ar(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var b=Jx;else if(Qd(f))if(_g)b=nv;else{b=ev;var j=Zx}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=tv);if(b&&(b=b(t,c))){wg(h,b,n,u);break e}j&&j(t,f,c),t==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&Zl(f,"number",f.value)}switch(j=c?Ar(c):window,t){case"focusin":(Qd(j)||j.contentEditable==="true")&&(Mr=j,dc=c,Vs=null);break;case"focusout":Vs=dc=Mr=null;break;case"mousedown":hc=!0;break;case"contextmenu":case"mouseup":case"dragend":hc=!1,eh(h,n,u);break;case"selectionchange":if(iv)break;case"keydown":case"keyup":eh(h,n,u)}var S;if(Su)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Or?xg(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(yg&&n.locale!=="ko"&&(Or||E!=="onCompositionStart"?E==="onCompositionEnd"&&Or&&(S=mg()):(vn=u,_u="value"in vn?vn.value:vn.textContent,Or=!0)),j=Vo(c,E),0<j.length&&(E=new Vd(E,t,null,n,u),h.push({event:E,listeners:j}),S?E.data=S:(S=vg(n),S!==null&&(E.data=S)))),(S=Kx?Yx(t,n):Qx(t,n))&&(c=Vo(c,"onBeforeInput"),0<c.length&&(u=new Vd("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=S))}Og(h,e)})}function fi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vo(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=oi(t,n),i!=null&&r.unshift(fi(t,i,s)),i=oi(t,e),i!=null&&r.push(fi(t,i,s))),t=t.return}return r}function br(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rh(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=oi(n,i),l!=null&&o.unshift(fi(n,l,a))):s||(l=oi(n,i),l!=null&&o.push(fi(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var cv=/\r\n?/g,uv=/\u0000|\uFFFD/g;function sh(t){return(typeof t=="string"?t:""+t).replace(cv,`
`).replace(uv,"")}function Qi(t,e,n){if(e=sh(e),sh(t)!==e&&n)throw Error(T(425))}function qo(){}var fc=null,pc=null;function gc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mc=typeof setTimeout=="function"?setTimeout:void 0,dv=typeof clearTimeout=="function"?clearTimeout:void 0,ih=typeof Promise=="function"?Promise:void 0,hv=typeof queueMicrotask=="function"?queueMicrotask:typeof ih<"u"?function(t){return ih.resolve(null).then(t).catch(fv)}:mc;function fv(t){setTimeout(function(){throw t})}function pl(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ci(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ci(e)}function Pn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function oh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var us=Math.random().toString(36).slice(2),Bt="__reactFiber$"+us,pi="__reactProps$"+us,tn="__reactContainer$"+us,yc="__reactEvents$"+us,pv="__reactListeners$"+us,gv="__reactHandles$"+us;function ir(t){var e=t[Bt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tn]||n[Bt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=oh(t);t!==null;){if(n=t[Bt])return n;t=oh(t)}return e}t=n,n=t.parentNode}return null}function Li(t){return t=t[Bt]||t[tn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ar(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function Ea(t){return t[pi]||null}var xc=[],Dr=-1;function Wn(t){return{current:t}}function le(t){0>Dr||(t.current=xc[Dr],xc[Dr]=null,Dr--)}function se(t,e){Dr++,xc[Dr]=t.current,t.current=e}var Fn={},Ue=Wn(Fn),et=Wn(!1),hr=Fn;function Jr(t,e){var n=t.type.contextTypes;if(!n)return Fn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function tt(t){return t=t.childContextTypes,t!=null}function Ko(){le(et),le(Ue)}function ah(t,e,n){if(Ue.current!==Fn)throw Error(T(168));se(Ue,e),se(et,n)}function Lg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(T(108,Zy(t)||"Unknown",s));return he({},n,r)}function Yo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fn,hr=Ue.current,se(Ue,t),se(et,et.current),!0}function lh(t,e,n){var r=t.stateNode;if(!r)throw Error(T(169));n?(t=Lg(t,e,hr),r.__reactInternalMemoizedMergedChildContext=t,le(et),le(Ue),se(Ue,t)):le(et),se(et,n)}var Qt=null,Ca=!1,gl=!1;function Ag(t){Qt===null?Qt=[t]:Qt.push(t)}function mv(t){Ca=!0,Ag(t)}function Hn(){if(!gl&&Qt!==null){gl=!0;var t=0,e=te;try{var n=Qt;for(te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qt=null,Ca=!1}catch(s){throw Qt!==null&&(Qt=Qt.slice(t+1)),ig(yu,Hn),s}finally{te=e,gl=!1}}return null}var Rr=[],Ir=0,Qo=null,Go=0,ht=[],ft=0,fr=null,Xt=1,Jt="";function Zn(t,e){Rr[Ir++]=Go,Rr[Ir++]=Qo,Qo=t,Go=e}function Dg(t,e,n){ht[ft++]=Xt,ht[ft++]=Jt,ht[ft++]=fr,fr=t;var r=Xt;t=Jt;var s=32-Mt(r)-1;r&=~(1<<s),n+=1;var i=32-Mt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Xt=1<<32-Mt(e)+s|n<<s|r,Jt=i+t}else Xt=1<<i|n<<s|r,Jt=t}function Eu(t){t.return!==null&&(Zn(t,1),Dg(t,1,0))}function Cu(t){for(;t===Qo;)Qo=Rr[--Ir],Rr[Ir]=null,Go=Rr[--Ir],Rr[Ir]=null;for(;t===fr;)fr=ht[--ft],ht[ft]=null,Jt=ht[--ft],ht[ft]=null,Xt=ht[--ft],ht[ft]=null}var ot=null,it=null,ce=!1,Tt=null;function Rg(t,e){var n=pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ch(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ot=t,it=Pn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ot=t,it=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fr!==null?{id:Xt,overflow:Jt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ot=t,it=null,!0):!1;default:return!1}}function vc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wc(t){if(ce){var e=it;if(e){var n=e;if(!ch(t,e)){if(vc(t))throw Error(T(418));e=Pn(n.nextSibling);var r=ot;e&&ch(t,e)?Rg(r,n):(t.flags=t.flags&-4097|2,ce=!1,ot=t)}}else{if(vc(t))throw Error(T(418));t.flags=t.flags&-4097|2,ce=!1,ot=t}}}function uh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ot=t}function Gi(t){if(t!==ot)return!1;if(!ce)return uh(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gc(t.type,t.memoizedProps)),e&&(e=it)){if(vc(t))throw Ig(),Error(T(418));for(;e;)Rg(t,e),e=Pn(e.nextSibling)}if(uh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){it=Pn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}it=null}}else it=ot?Pn(t.stateNode.nextSibling):null;return!0}function Ig(){for(var t=it;t;)t=Pn(t.nextSibling)}function Zr(){it=ot=null,ce=!1}function Pu(t){Tt===null?Tt=[t]:Tt.push(t)}var yv=sn.ReactCurrentBatchConfig;function bs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var r=n.stateNode}if(!r)throw Error(T(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,t))}return t}function Xi(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dh(t){var e=t._init;return e(t._payload)}function Fg(t){function e(y,m){if(t){var w=y.deletions;w===null?(y.deletions=[m],y.flags|=16):w.push(m)}}function n(y,m){if(!t)return null;for(;m!==null;)e(y,m),m=m.sibling;return null}function r(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function s(y,m){return y=Mn(y,m),y.index=0,y.sibling=null,y}function i(y,m,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<m?(y.flags|=2,m):w):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,m,w,_){return m===null||m.tag!==6?(m=bl(w,y.mode,_),m.return=y,m):(m=s(m,w),m.return=y,m)}function l(y,m,w,_){var b=w.type;return b===Nr?u(y,m,w.props.children,_,w.key):m!==null&&(m.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===fn&&dh(b)===m.type)?(_=s(m,w.props),_.ref=bs(y,m,w),_.return=y,_):(_=Mo(w.type,w.key,w.props,null,y.mode,_),_.ref=bs(y,m,w),_.return=y,_)}function c(y,m,w,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==w.containerInfo||m.stateNode.implementation!==w.implementation?(m=kl(w,y.mode,_),m.return=y,m):(m=s(m,w.children||[]),m.return=y,m)}function u(y,m,w,_,b){return m===null||m.tag!==7?(m=ur(w,y.mode,_,b),m.return=y,m):(m=s(m,w),m.return=y,m)}function h(y,m,w){if(typeof m=="string"&&m!==""||typeof m=="number")return m=bl(""+m,y.mode,w),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case $i:return w=Mo(m.type,m.key,m.props,null,y.mode,w),w.ref=bs(y,null,m),w.return=y,w;case Tr:return m=kl(m,y.mode,w),m.return=y,m;case fn:var _=m._init;return h(y,_(m._payload),w)}if(As(m)||ys(m))return m=ur(m,y.mode,w,null),m.return=y,m;Xi(y,m)}return null}function f(y,m,w,_){var b=m!==null?m.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return b!==null?null:a(y,m,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case $i:return w.key===b?l(y,m,w,_):null;case Tr:return w.key===b?c(y,m,w,_):null;case fn:return b=w._init,f(y,m,b(w._payload),_)}if(As(w)||ys(w))return b!==null?null:u(y,m,w,_,null);Xi(y,w)}return null}function p(y,m,w,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(w)||null,a(m,y,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $i:return y=y.get(_.key===null?w:_.key)||null,l(m,y,_,b);case Tr:return y=y.get(_.key===null?w:_.key)||null,c(m,y,_,b);case fn:var j=_._init;return p(y,m,w,j(_._payload),b)}if(As(_)||ys(_))return y=y.get(w)||null,u(m,y,_,b,null);Xi(m,_)}return null}function x(y,m,w,_){for(var b=null,j=null,S=m,E=m=0,L=null;S!==null&&E<w.length;E++){S.index>E?(L=S,S=null):L=S.sibling;var N=f(y,S,w[E],_);if(N===null){S===null&&(S=L);break}t&&S&&N.alternate===null&&e(y,S),m=i(N,m,E),j===null?b=N:j.sibling=N,j=N,S=L}if(E===w.length)return n(y,S),ce&&Zn(y,E),b;if(S===null){for(;E<w.length;E++)S=h(y,w[E],_),S!==null&&(m=i(S,m,E),j===null?b=S:j.sibling=S,j=S);return ce&&Zn(y,E),b}for(S=r(y,S);E<w.length;E++)L=p(S,y,E,w[E],_),L!==null&&(t&&L.alternate!==null&&S.delete(L.key===null?E:L.key),m=i(L,m,E),j===null?b=L:j.sibling=L,j=L);return t&&S.forEach(function(R){return e(y,R)}),ce&&Zn(y,E),b}function g(y,m,w,_){var b=ys(w);if(typeof b!="function")throw Error(T(150));if(w=b.call(w),w==null)throw Error(T(151));for(var j=b=null,S=m,E=m=0,L=null,N=w.next();S!==null&&!N.done;E++,N=w.next()){S.index>E?(L=S,S=null):L=S.sibling;var R=f(y,S,N.value,_);if(R===null){S===null&&(S=L);break}t&&S&&R.alternate===null&&e(y,S),m=i(R,m,E),j===null?b=R:j.sibling=R,j=R,S=L}if(N.done)return n(y,S),ce&&Zn(y,E),b;if(S===null){for(;!N.done;E++,N=w.next())N=h(y,N.value,_),N!==null&&(m=i(N,m,E),j===null?b=N:j.sibling=N,j=N);return ce&&Zn(y,E),b}for(S=r(y,S);!N.done;E++,N=w.next())N=p(S,y,E,N.value,_),N!==null&&(t&&N.alternate!==null&&S.delete(N.key===null?E:N.key),m=i(N,m,E),j===null?b=N:j.sibling=N,j=N);return t&&S.forEach(function(F){return e(y,F)}),ce&&Zn(y,E),b}function v(y,m,w,_){if(typeof w=="object"&&w!==null&&w.type===Nr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case $i:e:{for(var b=w.key,j=m;j!==null;){if(j.key===b){if(b=w.type,b===Nr){if(j.tag===7){n(y,j.sibling),m=s(j,w.props.children),m.return=y,y=m;break e}}else if(j.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===fn&&dh(b)===j.type){n(y,j.sibling),m=s(j,w.props),m.ref=bs(y,j,w),m.return=y,y=m;break e}n(y,j);break}else e(y,j);j=j.sibling}w.type===Nr?(m=ur(w.props.children,y.mode,_,w.key),m.return=y,y=m):(_=Mo(w.type,w.key,w.props,null,y.mode,_),_.ref=bs(y,m,w),_.return=y,y=_)}return o(y);case Tr:e:{for(j=w.key;m!==null;){if(m.key===j)if(m.tag===4&&m.stateNode.containerInfo===w.containerInfo&&m.stateNode.implementation===w.implementation){n(y,m.sibling),m=s(m,w.children||[]),m.return=y,y=m;break e}else{n(y,m);break}else e(y,m);m=m.sibling}m=kl(w,y.mode,_),m.return=y,y=m}return o(y);case fn:return j=w._init,v(y,m,j(w._payload),_)}if(As(w))return x(y,m,w,_);if(ys(w))return g(y,m,w,_);Xi(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,m!==null&&m.tag===6?(n(y,m.sibling),m=s(m,w),m.return=y,y=m):(n(y,m),m=bl(w,y.mode,_),m.return=y,y=m),o(y)):n(y,m)}return v}var es=Fg(!0),zg=Fg(!1),Xo=Wn(null),Jo=null,Fr=null,Tu=null;function Nu(){Tu=Fr=Jo=null}function Ou(t){var e=Xo.current;le(Xo),t._currentValue=e}function _c(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qr(t,e){Jo=t,Tu=Fr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ze=!0),t.firstContext=null)}function xt(t){var e=t._currentValue;if(Tu!==t)if(t={context:t,memoizedValue:e,next:null},Fr===null){if(Jo===null)throw Error(T(308));Fr=t,Jo.dependencies={lanes:0,firstContext:t}}else Fr=Fr.next=t;return e}var or=null;function Mu(t){or===null?or=[t]:or.push(t)}function $g(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Mu(e)):(n.next=s.next,s.next=n),e.interleaved=n,nn(t,r)}function nn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pn=!1;function Lu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Tn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Q&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,nn(t,n)}return s=r.interleaved,s===null?(e.next=e,Mu(r)):(e.next=s.next,s.next=e),r.interleaved=e,nn(t,n)}function Eo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xu(t,n)}}function hh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zo(t,e,n,r){var s=t.updateQueue;pn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,g=a;switch(f=e,p=n,g.tag){case 1:if(x=g.payload,typeof x=="function"){h=x.call(p,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,f=typeof x=="function"?x.call(p,h,f):x,f==null)break e;h=he({},h,f);break e;case 2:pn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);gr|=o,t.lanes=o,t.memoizedState=h}}function fh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(T(191,s));s.call(r)}}}var Ai={},Wt=Wn(Ai),gi=Wn(Ai),mi=Wn(Ai);function ar(t){if(t===Ai)throw Error(T(174));return t}function Au(t,e){switch(se(mi,e),se(gi,t),se(Wt,Ai),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tc(e,t)}le(Wt),se(Wt,e)}function ts(){le(Wt),le(gi),le(mi)}function Ug(t){ar(mi.current);var e=ar(Wt.current),n=tc(e,t.type);e!==n&&(se(gi,t),se(Wt,n))}function Du(t){gi.current===t&&(le(Wt),le(gi))}var ue=Wn(0);function ea(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ml=[];function Ru(){for(var t=0;t<ml.length;t++)ml[t]._workInProgressVersionPrimary=null;ml.length=0}var Co=sn.ReactCurrentDispatcher,yl=sn.ReactCurrentBatchConfig,pr=0,de=null,_e=null,je=null,ta=!1,qs=!1,yi=0,xv=0;function De(){throw Error(T(321))}function Iu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!At(t[n],e[n]))return!1;return!0}function Fu(t,e,n,r,s,i){if(pr=i,de=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Co.current=t===null||t.memoizedState===null?bv:kv,t=n(r,s),qs){i=0;do{if(qs=!1,yi=0,25<=i)throw Error(T(301));i+=1,je=_e=null,e.updateQueue=null,Co.current=Sv,t=n(r,s)}while(qs)}if(Co.current=na,e=_e!==null&&_e.next!==null,pr=0,je=_e=de=null,ta=!1,e)throw Error(T(300));return t}function zu(){var t=yi!==0;return yi=0,t}function zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?de.memoizedState=je=t:je=je.next=t,je}function vt(){if(_e===null){var t=de.alternate;t=t!==null?t.memoizedState:null}else t=_e.next;var e=je===null?de.memoizedState:je.next;if(e!==null)je=e,_e=t;else{if(t===null)throw Error(T(310));_e=t,t={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},je===null?de.memoizedState=je=t:je=je.next=t}return je}function xi(t,e){return typeof e=="function"?e(t):e}function xl(t){var e=vt(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=_e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((pr&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,de.lanes|=u,gr|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,At(r,e.memoizedState)||(Ze=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,de.lanes|=i,gr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vl(t){var e=vt(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);At(i,e.memoizedState)||(Ze=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Wg(){}function Hg(t,e){var n=de,r=vt(),s=e(),i=!At(r.memoizedState,s);if(i&&(r.memoizedState=s,Ze=!0),r=r.queue,$u(Kg.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||je!==null&&je.memoizedState.tag&1){if(n.flags|=2048,vi(9,qg.bind(null,n,r,s,e),void 0,null),Ee===null)throw Error(T(349));pr&30||Vg(n,e,s)}return s}function Vg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function qg(t,e,n,r){e.value=n,e.getSnapshot=r,Yg(e)&&Qg(t)}function Kg(t,e,n){return n(function(){Yg(e)&&Qg(t)})}function Yg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!At(t,n)}catch{return!0}}function Qg(t){var e=nn(t,1);e!==null&&Lt(e,t,1,-1)}function ph(t){var e=zt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:t},e.queue=t,t=t.dispatch=_v.bind(null,de,t),[e.memoizedState,t]}function vi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Gg(){return vt().memoizedState}function Po(t,e,n,r){var s=zt();de.flags|=t,s.memoizedState=vi(1|e,n,void 0,r===void 0?null:r)}function Pa(t,e,n,r){var s=vt();r=r===void 0?null:r;var i=void 0;if(_e!==null){var o=_e.memoizedState;if(i=o.destroy,r!==null&&Iu(r,o.deps)){s.memoizedState=vi(e,n,i,r);return}}de.flags|=t,s.memoizedState=vi(1|e,n,i,r)}function gh(t,e){return Po(8390656,8,t,e)}function $u(t,e){return Pa(2048,8,t,e)}function Xg(t,e){return Pa(4,2,t,e)}function Jg(t,e){return Pa(4,4,t,e)}function Zg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function em(t,e,n){return n=n!=null?n.concat([t]):null,Pa(4,4,Zg.bind(null,e,t),n)}function Bu(){}function tm(t,e){var n=vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Iu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function nm(t,e){var n=vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Iu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function rm(t,e,n){return pr&21?(At(n,e)||(n=lg(),de.lanes|=n,gr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ze=!0),t.memoizedState=n)}function vv(t,e){var n=te;te=n!==0&&4>n?n:4,t(!0);var r=yl.transition;yl.transition={};try{t(!1),e()}finally{te=n,yl.transition=r}}function sm(){return vt().memoizedState}function wv(t,e,n){var r=On(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},im(t))om(e,n);else if(n=$g(t,e,n,r),n!==null){var s=Ve();Lt(n,t,r,s),am(n,e,r)}}function _v(t,e,n){var r=On(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(im(t))om(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,At(a,o)){var l=e.interleaved;l===null?(s.next=s,Mu(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=$g(t,e,s,r),n!==null&&(s=Ve(),Lt(n,t,r,s),am(n,e,r))}}function im(t){var e=t.alternate;return t===de||e!==null&&e===de}function om(t,e){qs=ta=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function am(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xu(t,n)}}var na={readContext:xt,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},bv={readContext:xt,useCallback:function(t,e){return zt().memoizedState=[t,e===void 0?null:e],t},useContext:xt,useEffect:gh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Po(4194308,4,Zg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Po(4194308,4,t,e)},useInsertionEffect:function(t,e){return Po(4,2,t,e)},useMemo:function(t,e){var n=zt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wv.bind(null,de,t),[r.memoizedState,t]},useRef:function(t){var e=zt();return t={current:t},e.memoizedState=t},useState:ph,useDebugValue:Bu,useDeferredValue:function(t){return zt().memoizedState=t},useTransition:function(){var t=ph(!1),e=t[0];return t=vv.bind(null,t[1]),zt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=de,s=zt();if(ce){if(n===void 0)throw Error(T(407));n=n()}else{if(n=e(),Ee===null)throw Error(T(349));pr&30||Vg(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,gh(Kg.bind(null,r,i,t),[t]),r.flags|=2048,vi(9,qg.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=zt(),e=Ee.identifierPrefix;if(ce){var n=Jt,r=Xt;n=(r&~(1<<32-Mt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=yi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kv={readContext:xt,useCallback:tm,useContext:xt,useEffect:$u,useImperativeHandle:em,useInsertionEffect:Xg,useLayoutEffect:Jg,useMemo:nm,useReducer:xl,useRef:Gg,useState:function(){return xl(xi)},useDebugValue:Bu,useDeferredValue:function(t){var e=vt();return rm(e,_e.memoizedState,t)},useTransition:function(){var t=xl(xi)[0],e=vt().memoizedState;return[t,e]},useMutableSource:Wg,useSyncExternalStore:Hg,useId:sm,unstable_isNewReconciler:!1},Sv={readContext:xt,useCallback:tm,useContext:xt,useEffect:$u,useImperativeHandle:em,useInsertionEffect:Xg,useLayoutEffect:Jg,useMemo:nm,useReducer:vl,useRef:Gg,useState:function(){return vl(xi)},useDebugValue:Bu,useDeferredValue:function(t){var e=vt();return _e===null?e.memoizedState=t:rm(e,_e.memoizedState,t)},useTransition:function(){var t=vl(xi)[0],e=vt().memoizedState;return[t,e]},useMutableSource:Wg,useSyncExternalStore:Hg,useId:sm,unstable_isNewReconciler:!1};function Et(t,e){if(t&&t.defaultProps){e=he({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function bc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:he({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ta={isMounted:function(t){return(t=t._reactInternals)?vr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ve(),s=On(t),i=Zt(r,s);i.payload=e,n!=null&&(i.callback=n),e=Tn(t,i,s),e!==null&&(Lt(e,t,s,r),Eo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ve(),s=On(t),i=Zt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Tn(t,i,s),e!==null&&(Lt(e,t,s,r),Eo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ve(),r=On(t),s=Zt(n,r);s.tag=2,e!=null&&(s.callback=e),e=Tn(t,s,r),e!==null&&(Lt(e,t,r,n),Eo(e,t,r))}};function mh(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!di(n,r)||!di(s,i):!0}function lm(t,e,n){var r=!1,s=Fn,i=e.contextType;return typeof i=="object"&&i!==null?i=xt(i):(s=tt(e)?hr:Ue.current,r=e.contextTypes,i=(r=r!=null)?Jr(t,s):Fn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ta,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function yh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ta.enqueueReplaceState(e,e.state,null)}function kc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Lu(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=xt(i):(i=tt(e)?hr:Ue.current,s.context=Jr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(bc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ta.enqueueReplaceState(s,s.state,null),Zo(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ns(t,e){try{var n="",r=e;do n+=Jy(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function wl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jv=typeof WeakMap=="function"?WeakMap:Map;function cm(t,e,n){n=Zt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){sa||(sa=!0,Ac=r),Sc(t,e)},n}function um(t,e,n){n=Zt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Sc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Sc(t,e),typeof r!="function"&&(Nn===null?Nn=new Set([this]):Nn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function xh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jv;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=zv.bind(null,t,e,n),e.then(t,t))}function vh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wh(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zt(-1,1),e.tag=2,Tn(n,e,1))),n.lanes|=1),t)}var Ev=sn.ReactCurrentOwner,Ze=!1;function He(t,e,n,r){e.child=t===null?zg(e,null,n,r):es(e,t.child,n,r)}function _h(t,e,n,r,s){n=n.render;var i=e.ref;return qr(e,s),r=Fu(t,e,n,r,i,s),n=zu(),t!==null&&!Ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rn(t,e,s)):(ce&&n&&Eu(e),e.flags|=1,He(t,e,r,s),e.child)}function bh(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Qu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,dm(t,e,i,r,s)):(t=Mo(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:di,n(o,r)&&t.ref===e.ref)return rn(t,e,s)}return e.flags|=1,t=Mn(i,r),t.ref=e.ref,t.return=e,e.child=t}function dm(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(di(i,r)&&t.ref===e.ref)if(Ze=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ze=!0);else return e.lanes=t.lanes,rn(t,e,s)}return jc(t,e,n,r,s)}function hm(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},se($r,st),st|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,se($r,st),st|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,se($r,st),st|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,se($r,st),st|=r;return He(t,e,s,n),e.child}function fm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jc(t,e,n,r,s){var i=tt(n)?hr:Ue.current;return i=Jr(e,i),qr(e,s),n=Fu(t,e,n,r,i,s),r=zu(),t!==null&&!Ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rn(t,e,s)):(ce&&r&&Eu(e),e.flags|=1,He(t,e,n,s),e.child)}function kh(t,e,n,r,s){if(tt(n)){var i=!0;Yo(e)}else i=!1;if(qr(e,s),e.stateNode===null)To(t,e),lm(e,n,r),kc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=xt(c):(c=tt(n)?hr:Ue.current,c=Jr(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&yh(e,o,r,c),pn=!1;var f=e.memoizedState;o.state=f,Zo(e,r,o,s),l=e.memoizedState,a!==r||f!==l||et.current||pn?(typeof u=="function"&&(bc(e,n,u,r),l=e.memoizedState),(a=pn||mh(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Bg(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Et(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=xt(l):(l=tt(n)?hr:Ue.current,l=Jr(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&yh(e,o,r,l),pn=!1,f=e.memoizedState,o.state=f,Zo(e,r,o,s);var x=e.memoizedState;a!==h||f!==x||et.current||pn?(typeof p=="function"&&(bc(e,n,p,r),x=e.memoizedState),(c=pn||mh(e,n,c,r,f,x,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ec(t,e,n,r,i,s)}function Ec(t,e,n,r,s,i){fm(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&lh(e,n,!1),rn(t,e,i);r=e.stateNode,Ev.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=es(e,t.child,null,i),e.child=es(e,null,a,i)):He(t,e,a,i),e.memoizedState=r.state,s&&lh(e,n,!0),e.child}function pm(t){var e=t.stateNode;e.pendingContext?ah(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ah(t,e.context,!1),Au(t,e.containerInfo)}function Sh(t,e,n,r,s){return Zr(),Pu(s),e.flags|=256,He(t,e,n,r),e.child}var Cc={dehydrated:null,treeContext:null,retryLane:0};function Pc(t){return{baseLanes:t,cachePool:null,transitions:null}}function gm(t,e,n){var r=e.pendingProps,s=ue.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),se(ue,s&1),t===null)return wc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ma(o,r,0,null),t=ur(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Pc(n),e.memoizedState=Cc,t):Uu(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Cv(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Mn(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Mn(a,i):(i=ur(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Pc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Cc,r}return i=t.child,t=i.sibling,r=Mn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Uu(t,e){return e=Ma({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ji(t,e,n,r){return r!==null&&Pu(r),es(e,t.child,null,n),t=Uu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Cv(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=wl(Error(T(422))),Ji(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ma({mode:"visible",children:r.children},s,0,null),i=ur(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&es(e,t.child,null,o),e.child.memoizedState=Pc(o),e.memoizedState=Cc,i);if(!(e.mode&1))return Ji(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(T(419)),r=wl(i,r,void 0),Ji(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ze||a){if(r=Ee,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,nn(t,s),Lt(r,t,s,-1))}return Yu(),r=wl(Error(T(421))),Ji(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=$v.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,it=Pn(s.nextSibling),ot=e,ce=!0,Tt=null,t!==null&&(ht[ft++]=Xt,ht[ft++]=Jt,ht[ft++]=fr,Xt=t.id,Jt=t.overflow,fr=e),e=Uu(e,r.children),e.flags|=4096,e)}function jh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),_c(t.return,e,n)}function _l(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function mm(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(He(t,e,r.children,n),r=ue.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jh(t,n,e);else if(t.tag===19)jh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(se(ue,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ea(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),_l(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ea(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}_l(e,!0,n,null,i);break;case"together":_l(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function To(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,n=Mn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Pv(t,e,n){switch(e.tag){case 3:pm(e),Zr();break;case 5:Ug(e);break;case 1:tt(e.type)&&Yo(e);break;case 4:Au(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;se(Xo,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(se(ue,ue.current&1),e.flags|=128,null):n&e.child.childLanes?gm(t,e,n):(se(ue,ue.current&1),t=rn(t,e,n),t!==null?t.sibling:null);se(ue,ue.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return mm(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),se(ue,ue.current),r)break;return null;case 22:case 23:return e.lanes=0,hm(t,e,n)}return rn(t,e,n)}var ym,Tc,xm,vm;ym=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tc=function(){};xm=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ar(Wt.current);var i=null;switch(n){case"input":s=Xl(t,s),r=Xl(t,r),i=[];break;case"select":s=he({},s,{value:void 0}),r=he({},r,{value:void 0}),i=[];break;case"textarea":s=ec(t,s),r=ec(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qo)}nc(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(si.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(si.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&oe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};vm=function(t,e,n,r){n!==r&&(e.flags|=4)};function ks(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Re(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Tv(t,e,n){var r=e.pendingProps;switch(Cu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(e),null;case 1:return tt(e.type)&&Ko(),Re(e),null;case 3:return r=e.stateNode,ts(),le(et),le(Ue),Ru(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tt!==null&&(Ic(Tt),Tt=null))),Tc(t,e),Re(e),null;case 5:Du(e);var s=ar(mi.current);if(n=e.type,t!==null&&e.stateNode!=null)xm(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(T(166));return Re(e),null}if(t=ar(Wt.current),Gi(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Bt]=e,r[pi]=i,t=(e.mode&1)!==0,n){case"dialog":oe("cancel",r),oe("close",r);break;case"iframe":case"object":case"embed":oe("load",r);break;case"video":case"audio":for(s=0;s<Rs.length;s++)oe(Rs[s],r);break;case"source":oe("error",r);break;case"img":case"image":case"link":oe("error",r),oe("load",r);break;case"details":oe("toggle",r);break;case"input":Ad(r,i),oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},oe("invalid",r);break;case"textarea":Rd(r,i),oe("invalid",r)}nc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Qi(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Qi(r.textContent,a,t),s=["children",""+a]):si.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&oe("scroll",r)}switch(n){case"input":Bi(r),Dd(r,i,!0);break;case"textarea":Bi(r),Id(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=qo)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Kp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bt]=e,t[pi]=r,ym(t,e,!1,!1),e.stateNode=t;e:{switch(o=rc(n,r),n){case"dialog":oe("cancel",t),oe("close",t),s=r;break;case"iframe":case"object":case"embed":oe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Rs.length;s++)oe(Rs[s],t);s=r;break;case"source":oe("error",t),s=r;break;case"img":case"image":case"link":oe("error",t),oe("load",t),s=r;break;case"details":oe("toggle",t),s=r;break;case"input":Ad(t,r),s=Xl(t,r),oe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=he({},r,{value:void 0}),oe("invalid",t);break;case"textarea":Rd(t,r),s=ec(t,r),oe("invalid",t);break;default:s=r}nc(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Gp(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Yp(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ii(t,l):typeof l=="number"&&ii(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(si.hasOwnProperty(i)?l!=null&&i==="onScroll"&&oe("scroll",t):l!=null&&hu(t,i,l,o))}switch(n){case"input":Bi(t),Dd(t,r,!1);break;case"textarea":Bi(t),Id(t);break;case"option":r.value!=null&&t.setAttribute("value",""+In(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ur(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ur(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=qo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Re(e),null;case 6:if(t&&e.stateNode!=null)vm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(T(166));if(n=ar(mi.current),ar(Wt.current),Gi(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bt]=e,(i=r.nodeValue!==n)&&(t=ot,t!==null))switch(t.tag){case 3:Qi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qi(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bt]=e,e.stateNode=r}return Re(e),null;case 13:if(le(ue),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&it!==null&&e.mode&1&&!(e.flags&128))Ig(),Zr(),e.flags|=98560,i=!1;else if(i=Gi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(T(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(T(317));i[Bt]=e}else Zr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Re(e),i=!1}else Tt!==null&&(Ic(Tt),Tt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ue.current&1?ke===0&&(ke=3):Yu())),e.updateQueue!==null&&(e.flags|=4),Re(e),null);case 4:return ts(),Tc(t,e),t===null&&hi(e.stateNode.containerInfo),Re(e),null;case 10:return Ou(e.type._context),Re(e),null;case 17:return tt(e.type)&&Ko(),Re(e),null;case 19:if(le(ue),i=e.memoizedState,i===null)return Re(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ks(i,!1);else{if(ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ea(t),o!==null){for(e.flags|=128,ks(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return se(ue,ue.current&1|2),e.child}t=t.sibling}i.tail!==null&&ye()>rs&&(e.flags|=128,r=!0,ks(i,!1),e.lanes=4194304)}else{if(!r)if(t=ea(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ks(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ce)return Re(e),null}else 2*ye()-i.renderingStartTime>rs&&n!==1073741824&&(e.flags|=128,r=!0,ks(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ye(),e.sibling=null,n=ue.current,se(ue,r?n&1|2:n&1),e):(Re(e),null);case 22:case 23:return Ku(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?st&1073741824&&(Re(e),e.subtreeFlags&6&&(e.flags|=8192)):Re(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function Nv(t,e){switch(Cu(e),e.tag){case 1:return tt(e.type)&&Ko(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ts(),le(et),le(Ue),Ru(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Du(e),null;case 13:if(le(ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));Zr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return le(ue),null;case 4:return ts(),null;case 10:return Ou(e.type._context),null;case 22:case 23:return Ku(),null;case 24:return null;default:return null}}var Zi=!1,Fe=!1,Ov=typeof WeakSet=="function"?WeakSet:Set,A=null;function zr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pe(t,e,r)}else n.current=null}function Nc(t,e,n){try{n()}catch(r){pe(t,e,r)}}var Eh=!1;function Mv(t,e){if(fc=Wo,t=Sg(),ju(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++u===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(pc={focusedElem:t,selectionRange:n},Wo=!1,A=e;A!==null;)if(e=A,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,A=t;else for(;A!==null;){e=A;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,v=x.memoizedState,y=e.stateNode,m=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Et(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(_){pe(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,A=t;break}A=e.return}return x=Eh,Eh=!1,x}function Ks(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Nc(e,n,i)}s=s.next}while(s!==r)}}function Na(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Oc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function wm(t){var e=t.alternate;e!==null&&(t.alternate=null,wm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bt],delete e[pi],delete e[yc],delete e[pv],delete e[gv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _m(t){return t.tag===5||t.tag===3||t.tag===4}function Ch(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_m(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qo));else if(r!==4&&(t=t.child,t!==null))for(Mc(t,e,n),t=t.sibling;t!==null;)Mc(t,e,n),t=t.sibling}function Lc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lc(t,e,n),t=t.sibling;t!==null;)Lc(t,e,n),t=t.sibling}var Oe=null,Ct=!1;function an(t,e,n){for(n=n.child;n!==null;)bm(t,e,n),n=n.sibling}function bm(t,e,n){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(ba,n)}catch{}switch(n.tag){case 5:Fe||zr(n,e);case 6:var r=Oe,s=Ct;Oe=null,an(t,e,n),Oe=r,Ct=s,Oe!==null&&(Ct?(t=Oe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Oe.removeChild(n.stateNode));break;case 18:Oe!==null&&(Ct?(t=Oe,n=n.stateNode,t.nodeType===8?pl(t.parentNode,n):t.nodeType===1&&pl(t,n),ci(t)):pl(Oe,n.stateNode));break;case 4:r=Oe,s=Ct,Oe=n.stateNode.containerInfo,Ct=!0,an(t,e,n),Oe=r,Ct=s;break;case 0:case 11:case 14:case 15:if(!Fe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Nc(n,e,o),s=s.next}while(s!==r)}an(t,e,n);break;case 1:if(!Fe&&(zr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pe(n,e,a)}an(t,e,n);break;case 21:an(t,e,n);break;case 22:n.mode&1?(Fe=(r=Fe)||n.memoizedState!==null,an(t,e,n),Fe=r):an(t,e,n);break;default:an(t,e,n)}}function Ph(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ov),e.forEach(function(r){var s=Bv.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Oe=a.stateNode,Ct=!1;break e;case 3:Oe=a.stateNode.containerInfo,Ct=!0;break e;case 4:Oe=a.stateNode.containerInfo,Ct=!0;break e}a=a.return}if(Oe===null)throw Error(T(160));bm(i,o,s),Oe=null,Ct=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){pe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)km(e,t),e=e.sibling}function km(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jt(e,t),Dt(t),r&4){try{Ks(3,t,t.return),Na(3,t)}catch(g){pe(t,t.return,g)}try{Ks(5,t,t.return)}catch(g){pe(t,t.return,g)}}break;case 1:jt(e,t),Dt(t),r&512&&n!==null&&zr(n,n.return);break;case 5:if(jt(e,t),Dt(t),r&512&&n!==null&&zr(n,n.return),t.flags&32){var s=t.stateNode;try{ii(s,"")}catch(g){pe(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Vp(s,i),rc(a,o);var c=rc(a,i);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?Gp(s,h):u==="dangerouslySetInnerHTML"?Yp(s,h):u==="children"?ii(s,h):hu(s,u,h,c)}switch(a){case"input":Jl(s,i);break;case"textarea":qp(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ur(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ur(s,!!i.multiple,i.defaultValue,!0):Ur(s,!!i.multiple,i.multiple?[]:"",!1))}s[pi]=i}catch(g){pe(t,t.return,g)}}break;case 6:if(jt(e,t),Dt(t),r&4){if(t.stateNode===null)throw Error(T(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){pe(t,t.return,g)}}break;case 3:if(jt(e,t),Dt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ci(e.containerInfo)}catch(g){pe(t,t.return,g)}break;case 4:jt(e,t),Dt(t);break;case 13:jt(e,t),Dt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vu=ye())),r&4&&Ph(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Fe=(c=Fe)||u,jt(e,t),Fe=c):jt(e,t),Dt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(A=t,u=t.child;u!==null;){for(h=A=u;A!==null;){switch(f=A,p=f.child,f.tag){case 0:case 11:case 14:case 15:Ks(4,f,f.return);break;case 1:zr(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(g){pe(r,n,g)}}break;case 5:zr(f,f.return);break;case 22:if(f.memoizedState!==null){Nh(h);continue}}p!==null?(p.return=f,A=p):Nh(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Qp("display",o))}catch(g){pe(t,t.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){pe(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:jt(e,t),Dt(t),r&4&&Ph(t);break;case 21:break;default:jt(e,t),Dt(t)}}function Dt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_m(n)){var r=n;break e}n=n.return}throw Error(T(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ii(s,""),r.flags&=-33);var i=Ch(t);Lc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ch(t);Mc(t,a,o);break;default:throw Error(T(161))}}catch(l){pe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Lv(t,e,n){A=t,Sm(t)}function Sm(t,e,n){for(var r=(t.mode&1)!==0;A!==null;){var s=A,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Zi;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Fe;a=Zi;var c=Fe;if(Zi=o,(Fe=l)&&!c)for(A=s;A!==null;)o=A,l=o.child,o.tag===22&&o.memoizedState!==null?Oh(s):l!==null?(l.return=o,A=l):Oh(s);for(;i!==null;)A=i,Sm(i),i=i.sibling;A=s,Zi=a,Fe=c}Th(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,A=i):Th(t)}}function Th(t){for(;A!==null;){var e=A;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fe||Na(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Fe)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Et(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&fh(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fh(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&ci(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Fe||e.flags&512&&Oc(e)}catch(f){pe(e,e.return,f)}}if(e===t){A=null;break}if(n=e.sibling,n!==null){n.return=e.return,A=n;break}A=e.return}}function Nh(t){for(;A!==null;){var e=A;if(e===t){A=null;break}var n=e.sibling;if(n!==null){n.return=e.return,A=n;break}A=e.return}}function Oh(t){for(;A!==null;){var e=A;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Na(4,e)}catch(l){pe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){pe(e,s,l)}}var i=e.return;try{Oc(e)}catch(l){pe(e,i,l)}break;case 5:var o=e.return;try{Oc(e)}catch(l){pe(e,o,l)}}}catch(l){pe(e,e.return,l)}if(e===t){A=null;break}var a=e.sibling;if(a!==null){a.return=e.return,A=a;break}A=e.return}}var Av=Math.ceil,ra=sn.ReactCurrentDispatcher,Wu=sn.ReactCurrentOwner,mt=sn.ReactCurrentBatchConfig,Q=0,Ee=null,we=null,Me=0,st=0,$r=Wn(0),ke=0,wi=null,gr=0,Oa=0,Hu=0,Ys=null,Ge=null,Vu=0,rs=1/0,Kt=null,sa=!1,Ac=null,Nn=null,eo=!1,wn=null,ia=0,Qs=0,Dc=null,No=-1,Oo=0;function Ve(){return Q&6?ye():No!==-1?No:No=ye()}function On(t){return t.mode&1?Q&2&&Me!==0?Me&-Me:yv.transition!==null?(Oo===0&&(Oo=lg()),Oo):(t=te,t!==0||(t=window.event,t=t===void 0?16:gg(t.type)),t):1}function Lt(t,e,n,r){if(50<Qs)throw Qs=0,Dc=null,Error(T(185));Oi(t,n,r),(!(Q&2)||t!==Ee)&&(t===Ee&&(!(Q&2)&&(Oa|=n),ke===4&&yn(t,Me)),nt(t,r),n===1&&Q===0&&!(e.mode&1)&&(rs=ye()+500,Ca&&Hn()))}function nt(t,e){var n=t.callbackNode;yx(t,e);var r=Uo(t,t===Ee?Me:0);if(r===0)n!==null&&$d(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$d(n),e===1)t.tag===0?mv(Mh.bind(null,t)):Ag(Mh.bind(null,t)),hv(function(){!(Q&6)&&Hn()}),n=null;else{switch(cg(r)){case 1:n=yu;break;case 4:n=og;break;case 16:n=Bo;break;case 536870912:n=ag;break;default:n=Bo}n=Mm(n,jm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jm(t,e){if(No=-1,Oo=0,Q&6)throw Error(T(327));var n=t.callbackNode;if(Kr()&&t.callbackNode!==n)return null;var r=Uo(t,t===Ee?Me:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=oa(t,r);else{e=r;var s=Q;Q|=2;var i=Cm();(Ee!==t||Me!==e)&&(Kt=null,rs=ye()+500,cr(t,e));do try{Iv();break}catch(a){Em(t,a)}while(!0);Nu(),ra.current=i,Q=s,we!==null?e=0:(Ee=null,Me=0,e=ke)}if(e!==0){if(e===2&&(s=lc(t),s!==0&&(r=s,e=Rc(t,s))),e===1)throw n=wi,cr(t,0),yn(t,r),nt(t,ye()),n;if(e===6)yn(t,r);else{if(s=t.current.alternate,!(r&30)&&!Dv(s)&&(e=oa(t,r),e===2&&(i=lc(t),i!==0&&(r=i,e=Rc(t,i))),e===1))throw n=wi,cr(t,0),yn(t,r),nt(t,ye()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(T(345));case 2:er(t,Ge,Kt);break;case 3:if(yn(t,r),(r&130023424)===r&&(e=Vu+500-ye(),10<e)){if(Uo(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ve(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=mc(er.bind(null,t,Ge,Kt),e);break}er(t,Ge,Kt);break;case 4:if(yn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Mt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Av(r/1960))-r,10<r){t.timeoutHandle=mc(er.bind(null,t,Ge,Kt),r);break}er(t,Ge,Kt);break;case 5:er(t,Ge,Kt);break;default:throw Error(T(329))}}}return nt(t,ye()),t.callbackNode===n?jm.bind(null,t):null}function Rc(t,e){var n=Ys;return t.current.memoizedState.isDehydrated&&(cr(t,e).flags|=256),t=oa(t,e),t!==2&&(e=Ge,Ge=n,e!==null&&Ic(e)),t}function Ic(t){Ge===null?Ge=t:Ge.push.apply(Ge,t)}function Dv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!At(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yn(t,e){for(e&=~Hu,e&=~Oa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mt(e),r=1<<n;t[n]=-1,e&=~r}}function Mh(t){if(Q&6)throw Error(T(327));Kr();var e=Uo(t,0);if(!(e&1))return nt(t,ye()),null;var n=oa(t,e);if(t.tag!==0&&n===2){var r=lc(t);r!==0&&(e=r,n=Rc(t,r))}if(n===1)throw n=wi,cr(t,0),yn(t,e),nt(t,ye()),n;if(n===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,er(t,Ge,Kt),nt(t,ye()),null}function qu(t,e){var n=Q;Q|=1;try{return t(e)}finally{Q=n,Q===0&&(rs=ye()+500,Ca&&Hn())}}function mr(t){wn!==null&&wn.tag===0&&!(Q&6)&&Kr();var e=Q;Q|=1;var n=mt.transition,r=te;try{if(mt.transition=null,te=1,t)return t()}finally{te=r,mt.transition=n,Q=e,!(Q&6)&&Hn()}}function Ku(){st=$r.current,le($r)}function cr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dv(n)),we!==null)for(n=we.return;n!==null;){var r=n;switch(Cu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ko();break;case 3:ts(),le(et),le(Ue),Ru();break;case 5:Du(r);break;case 4:ts();break;case 13:le(ue);break;case 19:le(ue);break;case 10:Ou(r.type._context);break;case 22:case 23:Ku()}n=n.return}if(Ee=t,we=t=Mn(t.current,null),Me=st=e,ke=0,wi=null,Hu=Oa=gr=0,Ge=Ys=null,or!==null){for(e=0;e<or.length;e++)if(n=or[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}or=null}return t}function Em(t,e){do{var n=we;try{if(Nu(),Co.current=na,ta){for(var r=de.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ta=!1}if(pr=0,je=_e=de=null,qs=!1,yi=0,Wu.current=null,n===null||n.return===null){ke=1,wi=e,we=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Me,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=vh(o);if(p!==null){p.flags&=-257,wh(p,o,a,i,e),p.mode&1&&xh(i,c,e),e=p,l=c;var x=e.updateQueue;if(x===null){var g=new Set;g.add(l),e.updateQueue=g}else x.add(l);break e}else{if(!(e&1)){xh(i,c,e),Yu();break e}l=Error(T(426))}}else if(ce&&a.mode&1){var v=vh(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),wh(v,o,a,i,e),Pu(ns(l,a));break e}}i=l=ns(l,a),ke!==4&&(ke=2),Ys===null?Ys=[i]:Ys.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=cm(i,l,e);hh(i,y);break e;case 1:a=l;var m=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Nn===null||!Nn.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=um(i,a,e);hh(i,_);break e}}i=i.return}while(i!==null)}Tm(n)}catch(b){e=b,we===n&&n!==null&&(we=n=n.return);continue}break}while(!0)}function Cm(){var t=ra.current;return ra.current=na,t===null?na:t}function Yu(){(ke===0||ke===3||ke===2)&&(ke=4),Ee===null||!(gr&268435455)&&!(Oa&268435455)||yn(Ee,Me)}function oa(t,e){var n=Q;Q|=2;var r=Cm();(Ee!==t||Me!==e)&&(Kt=null,cr(t,e));do try{Rv();break}catch(s){Em(t,s)}while(!0);if(Nu(),Q=n,ra.current=r,we!==null)throw Error(T(261));return Ee=null,Me=0,ke}function Rv(){for(;we!==null;)Pm(we)}function Iv(){for(;we!==null&&!lx();)Pm(we)}function Pm(t){var e=Om(t.alternate,t,st);t.memoizedProps=t.pendingProps,e===null?Tm(t):we=e,Wu.current=null}function Tm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Nv(n,e),n!==null){n.flags&=32767,we=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ke=6,we=null;return}}else if(n=Tv(n,e,st),n!==null){we=n;return}if(e=e.sibling,e!==null){we=e;return}we=e=t}while(e!==null);ke===0&&(ke=5)}function er(t,e,n){var r=te,s=mt.transition;try{mt.transition=null,te=1,Fv(t,e,n,r)}finally{mt.transition=s,te=r}return null}function Fv(t,e,n,r){do Kr();while(wn!==null);if(Q&6)throw Error(T(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(xx(t,i),t===Ee&&(we=Ee=null,Me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||eo||(eo=!0,Mm(Bo,function(){return Kr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=mt.transition,mt.transition=null;var o=te;te=1;var a=Q;Q|=4,Wu.current=null,Mv(t,n),km(n,t),sv(pc),Wo=!!fc,pc=fc=null,t.current=n,Lv(n),cx(),Q=a,te=o,mt.transition=i}else t.current=n;if(eo&&(eo=!1,wn=t,ia=s),i=t.pendingLanes,i===0&&(Nn=null),hx(n.stateNode),nt(t,ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(sa)throw sa=!1,t=Ac,Ac=null,t;return ia&1&&t.tag!==0&&Kr(),i=t.pendingLanes,i&1?t===Dc?Qs++:(Qs=0,Dc=t):Qs=0,Hn(),null}function Kr(){if(wn!==null){var t=cg(ia),e=mt.transition,n=te;try{if(mt.transition=null,te=16>t?16:t,wn===null)var r=!1;else{if(t=wn,wn=null,ia=0,Q&6)throw Error(T(331));var s=Q;for(Q|=4,A=t.current;A!==null;){var i=A,o=i.child;if(A.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(A=c;A!==null;){var u=A;switch(u.tag){case 0:case 11:case 15:Ks(8,u,i)}var h=u.child;if(h!==null)h.return=u,A=h;else for(;A!==null;){u=A;var f=u.sibling,p=u.return;if(wm(u),u===c){A=null;break}if(f!==null){f.return=p,A=f;break}A=p}}}var x=i.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}A=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,A=o;else e:for(;A!==null;){if(i=A,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ks(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,A=y;break e}A=i.return}}var m=t.current;for(A=m;A!==null;){o=A;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,A=w;else e:for(o=m;A!==null;){if(a=A,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Na(9,a)}}catch(b){pe(a,a.return,b)}if(a===o){A=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,A=_;break e}A=a.return}}if(Q=s,Hn(),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(ba,t)}catch{}r=!0}return r}finally{te=n,mt.transition=e}}return!1}function Lh(t,e,n){e=ns(n,e),e=cm(t,e,1),t=Tn(t,e,1),e=Ve(),t!==null&&(Oi(t,1,e),nt(t,e))}function pe(t,e,n){if(t.tag===3)Lh(t,t,n);else for(;e!==null;){if(e.tag===3){Lh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nn===null||!Nn.has(r))){t=ns(n,t),t=um(e,t,1),e=Tn(e,t,1),t=Ve(),e!==null&&(Oi(e,1,t),nt(e,t));break}}e=e.return}}function zv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ve(),t.pingedLanes|=t.suspendedLanes&n,Ee===t&&(Me&n)===n&&(ke===4||ke===3&&(Me&130023424)===Me&&500>ye()-Vu?cr(t,0):Hu|=n),nt(t,e)}function Nm(t,e){e===0&&(t.mode&1?(e=Hi,Hi<<=1,!(Hi&130023424)&&(Hi=4194304)):e=1);var n=Ve();t=nn(t,e),t!==null&&(Oi(t,e,n),nt(t,n))}function $v(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Nm(t,n)}function Bv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(T(314))}r!==null&&r.delete(e),Nm(t,n)}var Om;Om=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||et.current)Ze=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ze=!1,Pv(t,e,n);Ze=!!(t.flags&131072)}else Ze=!1,ce&&e.flags&1048576&&Dg(e,Go,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;To(t,e),t=e.pendingProps;var s=Jr(e,Ue.current);qr(e,n),s=Fu(null,e,r,t,s,n);var i=zu();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tt(r)?(i=!0,Yo(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Lu(e),s.updater=Ta,e.stateNode=s,s._reactInternals=e,kc(e,r,t,n),e=Ec(null,e,r,!0,i,n)):(e.tag=0,ce&&i&&Eu(e),He(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(To(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Wv(r),t=Et(r,t),s){case 0:e=jc(null,e,r,t,n);break e;case 1:e=kh(null,e,r,t,n);break e;case 11:e=_h(null,e,r,t,n);break e;case 14:e=bh(null,e,r,Et(r.type,t),n);break e}throw Error(T(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Et(r,s),jc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Et(r,s),kh(t,e,r,s,n);case 3:e:{if(pm(e),t===null)throw Error(T(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Bg(t,e),Zo(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ns(Error(T(423)),e),e=Sh(t,e,r,n,s);break e}else if(r!==s){s=ns(Error(T(424)),e),e=Sh(t,e,r,n,s);break e}else for(it=Pn(e.stateNode.containerInfo.firstChild),ot=e,ce=!0,Tt=null,n=zg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zr(),r===s){e=rn(t,e,n);break e}He(t,e,r,n)}e=e.child}return e;case 5:return Ug(e),t===null&&wc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,gc(r,s)?o=null:i!==null&&gc(r,i)&&(e.flags|=32),fm(t,e),He(t,e,o,n),e.child;case 6:return t===null&&wc(e),null;case 13:return gm(t,e,n);case 4:return Au(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=es(e,null,r,n):He(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Et(r,s),_h(t,e,r,s,n);case 7:return He(t,e,e.pendingProps,n),e.child;case 8:return He(t,e,e.pendingProps.children,n),e.child;case 12:return He(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,se(Xo,r._currentValue),r._currentValue=o,i!==null)if(At(i.value,o)){if(i.children===s.children&&!et.current){e=rn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Zt(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),_c(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(T(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),_c(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}He(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,qr(e,n),s=xt(s),r=r(s),e.flags|=1,He(t,e,r,n),e.child;case 14:return r=e.type,s=Et(r,e.pendingProps),s=Et(r.type,s),bh(t,e,r,s,n);case 15:return dm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Et(r,s),To(t,e),e.tag=1,tt(r)?(t=!0,Yo(e)):t=!1,qr(e,n),lm(e,r,s),kc(e,r,s,n),Ec(null,e,r,!0,t,n);case 19:return mm(t,e,n);case 22:return hm(t,e,n)}throw Error(T(156,e.tag))};function Mm(t,e){return ig(t,e)}function Uv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(t,e,n,r){return new Uv(t,e,n,r)}function Qu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wv(t){if(typeof t=="function")return Qu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pu)return 11;if(t===gu)return 14}return 2}function Mn(t,e){var n=t.alternate;return n===null?(n=pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mo(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Qu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Nr:return ur(n.children,s,i,e);case fu:o=8,s|=8;break;case Kl:return t=pt(12,n,e,s|2),t.elementType=Kl,t.lanes=i,t;case Yl:return t=pt(13,n,e,s),t.elementType=Yl,t.lanes=i,t;case Ql:return t=pt(19,n,e,s),t.elementType=Ql,t.lanes=i,t;case Up:return Ma(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $p:o=10;break e;case Bp:o=9;break e;case pu:o=11;break e;case gu:o=14;break e;case fn:o=16,r=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=pt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ur(t,e,n,r){return t=pt(7,t,r,e),t.lanes=n,t}function Ma(t,e,n,r){return t=pt(22,t,r,e),t.elementType=Up,t.lanes=n,t.stateNode={isHidden:!1},t}function bl(t,e,n){return t=pt(6,t,null,e),t.lanes=n,t}function kl(t,e,n){return e=pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hv(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rl(0),this.expirationTimes=rl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gu(t,e,n,r,s,i,o,a,l){return t=new Hv(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=pt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lu(i),t}function Vv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Lm(t){if(!t)return Fn;t=t._reactInternals;e:{if(vr(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var n=t.type;if(tt(n))return Lg(t,n,e)}return e}function Am(t,e,n,r,s,i,o,a,l){return t=Gu(n,r,!0,t,s,i,o,a,l),t.context=Lm(null),n=t.current,r=Ve(),s=On(n),i=Zt(r,s),i.callback=e??null,Tn(n,i,s),t.current.lanes=s,Oi(t,s,r),nt(t,r),t}function La(t,e,n,r){var s=e.current,i=Ve(),o=On(s);return n=Lm(n),e.context===null?e.context=n:e.pendingContext=n,e=Zt(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Tn(s,e,o),t!==null&&(Lt(t,s,o,i),Eo(t,s,o)),o}function aa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ah(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xu(t,e){Ah(t,e),(t=t.alternate)&&Ah(t,e)}function qv(){return null}var Dm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ju(t){this._internalRoot=t}Aa.prototype.render=Ju.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));La(t,e,null,null)};Aa.prototype.unmount=Ju.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mr(function(){La(null,t,null,null)}),e[tn]=null}};function Aa(t){this._internalRoot=t}Aa.prototype.unstable_scheduleHydration=function(t){if(t){var e=hg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mn.length&&e!==0&&e<mn[n].priority;n++);mn.splice(n,0,t),n===0&&pg(t)}};function Zu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Da(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dh(){}function Kv(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=aa(o);i.call(c)}}var o=Am(e,r,t,0,null,!1,!1,"",Dh);return t._reactRootContainer=o,t[tn]=o.current,hi(t.nodeType===8?t.parentNode:t),mr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=aa(l);a.call(c)}}var l=Gu(t,0,!1,null,null,!1,!1,"",Dh);return t._reactRootContainer=l,t[tn]=l.current,hi(t.nodeType===8?t.parentNode:t),mr(function(){La(e,l,n,r)}),l}function Ra(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=aa(o);a.call(l)}}La(e,o,t,s)}else o=Kv(n,e,t,s,r);return aa(o)}ug=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ds(e.pendingLanes);n!==0&&(xu(e,n|1),nt(e,ye()),!(Q&6)&&(rs=ye()+500,Hn()))}break;case 13:mr(function(){var r=nn(t,1);if(r!==null){var s=Ve();Lt(r,t,1,s)}}),Xu(t,1)}};vu=function(t){if(t.tag===13){var e=nn(t,134217728);if(e!==null){var n=Ve();Lt(e,t,134217728,n)}Xu(t,134217728)}};dg=function(t){if(t.tag===13){var e=On(t),n=nn(t,e);if(n!==null){var r=Ve();Lt(n,t,e,r)}Xu(t,e)}};hg=function(){return te};fg=function(t,e){var n=te;try{return te=t,e()}finally{te=n}};ic=function(t,e,n){switch(e){case"input":if(Jl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ea(r);if(!s)throw Error(T(90));Hp(r),Jl(r,s)}}}break;case"textarea":qp(t,n);break;case"select":e=n.value,e!=null&&Ur(t,!!n.multiple,e,!1)}};Zp=qu;eg=mr;var Yv={usingClientEntryPoint:!1,Events:[Li,Ar,Ea,Xp,Jp,qu]},Ss={findFiberByHostInstance:ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qv={bundleType:Ss.bundleType,version:Ss.version,rendererPackageName:Ss.rendererPackageName,rendererConfig:Ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rg(t),t===null?null:t.stateNode},findFiberByHostInstance:Ss.findFiberByHostInstance||qv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var to=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!to.isDisabled&&to.supportsFiber)try{ba=to.inject(Qv),Ut=to}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yv;lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zu(e))throw Error(T(200));return Vv(t,e,null,n)};lt.createRoot=function(t,e){if(!Zu(t))throw Error(T(299));var n=!1,r="",s=Dm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Gu(t,1,!1,null,null,n,!1,r,s),t[tn]=e.current,hi(t.nodeType===8?t.parentNode:t),new Ju(e)};lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=rg(e),t=t===null?null:t.stateNode,t};lt.flushSync=function(t){return mr(t)};lt.hydrate=function(t,e,n){if(!Da(e))throw Error(T(200));return Ra(null,t,e,!0,n)};lt.hydrateRoot=function(t,e,n){if(!Zu(t))throw Error(T(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Dm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Am(e,null,t,1,n??null,s,!1,i,o),t[tn]=e.current,hi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Aa(e)};lt.render=function(t,e,n){if(!Da(e))throw Error(T(200));return Ra(null,t,e,!1,n)};lt.unmountComponentAtNode=function(t){if(!Da(t))throw Error(T(40));return t._reactRootContainer?(mr(function(){Ra(null,null,t,!1,function(){t._reactRootContainer=null,t[tn]=null})}),!0):!1};lt.unstable_batchedUpdates=qu;lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Da(n))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return Ra(t,e,n,!1,r)};lt.version="18.3.1-next-f1338f8080-20240426";function Rm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rm)}catch(t){console.error(t)}}Rm(),Rp.exports=lt;var Gv=Rp.exports,Rh=Gv;Vl.createRoot=Rh.createRoot,Vl.hydrateRoot=Rh.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _i(){return _i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_i.apply(this,arguments)}var _n;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_n||(_n={}));const Ih="popstate";function Xv(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Fc("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:la(s)}return Zv(e,n,null,t)}function ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Im(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Jv(){return Math.random().toString(36).substr(2,8)}function Fh(t,e){return{usr:t.state,key:t.key,idx:e}}function Fc(t,e,n,r){return n===void 0&&(n=null),_i({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ds(e):e,{state:n,key:e&&e.key||r||Jv()})}function la(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ds(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Zv(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=_n.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(_i({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=_n.Pop;let v=u(),y=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:y})}function f(v,y){a=_n.Push;let m=Fc(g.location,v,y);c=u()+1;let w=Fh(m,c),_=g.createHref(m);try{o.pushState(w,"",_)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;s.location.assign(_)}i&&l&&l({action:a,location:g.location,delta:1})}function p(v,y){a=_n.Replace;let m=Fc(g.location,v,y);c=u();let w=Fh(m,c),_=g.createHref(m);o.replaceState(w,"",_),i&&l&&l({action:a,location:g.location,delta:0})}function x(v){let y=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof v=="string"?v:la(v);return m=m.replace(/ $/,"%20"),ve(y,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,y)}let g={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Ih,h),l=v,()=>{s.removeEventListener(Ih,h),l=null}},createHref(v){return e(s,v)},createURL:x,encodeLocation(v){let y=x(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(v){return o.go(v)}};return g}var zh;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(zh||(zh={}));function ew(t,e,n){return n===void 0&&(n="/"),tw(t,e,n,!1)}function tw(t,e,n,r){let s=typeof e=="string"?ds(e):e,i=ed(s.pathname||"/",n);if(i==null)return null;let o=Fm(t);nw(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=fw(i);a=dw(o[l],c,r)}return a}function Fm(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ve(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ln([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(ve(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Fm(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:cw(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of zm(i.path))s(i,o,l)}),e}function zm(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=zm(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function nw(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:uw(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const rw=/^:[\w-]+$/,sw=3,iw=2,ow=1,aw=10,lw=-2,$h=t=>t==="*";function cw(t,e){let n=t.split("/"),r=n.length;return n.some($h)&&(r+=lw),e&&(r+=iw),n.filter(s=>!$h(s)).reduce((s,i)=>s+(rw.test(i)?sw:i===""?ow:aw),r)}function uw(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function dw(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=Bh({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=Bh({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Ln([i,h.pathname]),pathnameBase:yw(Ln([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Ln([i,h.pathnameBase]))}return o}function Bh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=hw(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let g=a[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const x=a[h];return p&&!x?c[f]=void 0:c[f]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function hw(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Im(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function fw(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Im(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ed(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function pw(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ds(t):t;return{pathname:n?n.startsWith("/")?n:gw(n,e):e,search:xw(r),hash:vw(s)}}function gw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Sl(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mw(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function td(t,e){let n=mw(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function nd(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ds(t):(s=_i({},t),ve(!s.pathname||!s.pathname.includes("?"),Sl("?","pathname","search",s)),ve(!s.pathname||!s.pathname.includes("#"),Sl("#","pathname","hash",s)),ve(!s.search||!s.search.includes("#"),Sl("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=pw(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ln=t=>t.join("/").replace(/\/\/+/g,"/"),yw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vw=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ww(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const $m=["post","put","patch","delete"];new Set($m);const _w=["get",...$m];new Set(_w);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bi(){return bi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bi.apply(this,arguments)}const rd=k.createContext(null),bw=k.createContext(null),Vn=k.createContext(null),Ia=k.createContext(null),on=k.createContext({outlet:null,matches:[],isDataRoute:!1}),Bm=k.createContext(null);function kw(t,e){let{relative:n}=e===void 0?{}:e;hs()||ve(!1);let{basename:r,navigator:s}=k.useContext(Vn),{hash:i,pathname:o,search:a}=Wm(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ln([r,o])),s.createHref({pathname:l,search:a,hash:i})}function hs(){return k.useContext(Ia)!=null}function wr(){return hs()||ve(!1),k.useContext(Ia).location}function Um(t){k.useContext(Vn).static||k.useLayoutEffect(t)}function qn(){let{isDataRoute:t}=k.useContext(on);return t?Iw():Sw()}function Sw(){hs()||ve(!1);let t=k.useContext(rd),{basename:e,future:n,navigator:r}=k.useContext(Vn),{matches:s}=k.useContext(on),{pathname:i}=wr(),o=JSON.stringify(td(s,n.v7_relativeSplatPath)),a=k.useRef(!1);return Um(()=>{a.current=!0}),k.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=nd(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ln([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,i,t])}function jw(){let{matches:t}=k.useContext(on),e=t[t.length-1];return e?e.params:{}}function Wm(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=k.useContext(Vn),{matches:s}=k.useContext(on),{pathname:i}=wr(),o=JSON.stringify(td(s,r.v7_relativeSplatPath));return k.useMemo(()=>nd(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Ew(t,e){return Cw(t,e)}function Cw(t,e,n,r){hs()||ve(!1);let{navigator:s,static:i}=k.useContext(Vn),{matches:o}=k.useContext(on),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=wr(),h;if(e){var f;let y=typeof e=="string"?ds(e):e;c==="/"||(f=y.pathname)!=null&&f.startsWith(c)||ve(!1),h=y}else h=u;let p=h.pathname||"/",x=p;if(c!=="/"){let y=c.replace(/^\//,"").split("/");x="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=!i&&n&&n.matches&&n.matches.length>0?n.matches:ew(t,{pathname:x}),v=Mw(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Ln([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Ln([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,r);return e&&v?k.createElement(Ia.Provider,{value:{location:bi({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:_n.Pop}},v):v}function Pw(){let t=Rw(),e=ww(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,null)}const Tw=k.createElement(Pw,null);class Nw extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(on.Provider,{value:this.props.routeContext},k.createElement(Bm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ow(t){let{routeContext:e,match:n,children:r}=t,s=k.useContext(rd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(on.Provider,{value:e},r)}function Mw(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||ve(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:p}=n,x=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let p,x=!1,g=null,v=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||Tw,l&&(c<0&&f===0?(x=!0,v=null):c===f&&(x=!0,v=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),m=()=>{let w;return p?w=g:x?w=v:h.route.Component?w=k.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=u,k.createElement(Ow,{match:h,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(Nw,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:m(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):m()},null)}var Hm=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Hm||{}),ca=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ca||{});function Lw(t){let e=k.useContext(rd);return e||ve(!1),e}function Aw(t){let e=k.useContext(bw);return e||ve(!1),e}function Dw(t){let e=k.useContext(on);return e||ve(!1),e}function Vm(t){let e=Dw(),n=e.matches[e.matches.length-1];return n.route.id||ve(!1),n.route.id}function Rw(){var t;let e=k.useContext(Bm),n=Aw(ca.UseRouteError),r=Vm(ca.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Iw(){let{router:t}=Lw(Hm.UseNavigateStable),e=Vm(ca.UseNavigateStable),n=k.useRef(!1);return Um(()=>{n.current=!0}),k.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,bi({fromRouteId:e},i)))},[t,e])}function Fw(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Gs(t){let{to:e,replace:n,state:r,relative:s}=t;hs()||ve(!1);let{future:i,static:o}=k.useContext(Vn),{matches:a}=k.useContext(on),{pathname:l}=wr(),c=qn(),u=nd(e,td(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(u);return k.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function dt(t){ve(!1)}function zw(t){let{basename:e="/",children:n=null,location:r,navigationType:s=_n.Pop,navigator:i,static:o=!1,future:a}=t;hs()&&ve(!1);let l=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:l,navigator:i,static:o,future:bi({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=ds(r));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:x="default"}=r,g=k.useMemo(()=>{let v=ed(u,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:x},navigationType:s}},[l,u,h,f,p,x,s]);return g==null?null:k.createElement(Vn.Provider,{value:c},k.createElement(Ia.Provider,{children:n,value:g}))}function $w(t){let{children:e,location:n}=t;return Ew(zc(e),n)}new Promise(()=>{});function zc(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let i=[...e,s];if(r.type===k.Fragment){n.push.apply(n,zc(r.props.children,i));return}r.type!==dt&&ve(!1),!r.props.index||!r.props.children||ve(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=zc(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $c(){return $c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$c.apply(this,arguments)}function Bw(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Uw(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ww(t,e){return t.button===0&&(!e||e==="_self")&&!Uw(t)}const Hw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Vw="6";try{window.__reactRouterVersion=Vw}catch{}const qw="startTransition",Uh=zy[qw];function Kw(t){let{basename:e,children:n,future:r,window:s}=t,i=k.useRef();i.current==null&&(i.current=Xv({window:s,v5Compat:!0}));let o=i.current,[a,l]=k.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=k.useCallback(h=>{c&&Uh?Uh(()=>l(h)):l(h)},[l,c]);return k.useLayoutEffect(()=>o.listen(u),[o,u]),k.useEffect(()=>Fw(r),[r]),k.createElement(zw,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Yw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Qw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,no=k.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,f=Bw(e,Hw),{basename:p}=k.useContext(Vn),x,g=!1;if(typeof c=="string"&&Qw.test(c)&&(x=c,Yw))try{let w=new URL(window.location.href),_=c.startsWith("//")?new URL(w.protocol+c):new URL(c),b=ed(_.pathname,p);_.origin===w.origin&&b!=null?c=b+_.search+_.hash:g=!0}catch{}let v=kw(c,{relative:s}),y=Gw(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function m(w){r&&r(w),w.defaultPrevented||y(w)}return k.createElement("a",$c({},f,{href:x||v,onClick:g||i?r:m,ref:n,target:l}))});var Wh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Wh||(Wh={}));var Hh;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Hh||(Hh={}));function Gw(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=qn(),c=wr(),u=Wm(t,{relative:o});return k.useCallback(h=>{if(Ww(h,n)){h.preventDefault();let f=r!==void 0?r:la(c)===la(u);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}const Xw="modulepreload",Jw=function(t){return"/"+t},Vh={},ss=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=Jw(l),l in Vh)return;Vh[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":Xw,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Zw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ss(async()=>{const{default:r}=await Promise.resolve().then(()=>fs);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class sd extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class e_ extends sd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class t_ extends sd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class n_ extends sd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Bc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Bc||(Bc={}));var r_=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class s_{constructor(e,{headers:n={},customFetch:r,region:s=Bc.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Zw(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return r_(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:c}).catch(x=>{throw new e_(x)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new t_(u);if(!u.ok)throw new n_(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield u.json():f==="application/octet-stream"?p=yield u.blob():f==="text/event-stream"?p=u:f==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}}var Xe={},id={},Fa={},Di={},za={},$a={},i_=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},is=i_();const o_=is.fetch,qm=is.fetch.bind(is),Km=is.Headers,a_=is.Request,l_=is.Response,fs=Object.freeze(Object.defineProperty({__proto__:null,Headers:Km,Request:a_,Response:l_,default:qm,fetch:o_},Symbol.toStringTag,{value:"Module"})),c_=ky(fs);var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});let u_=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ba.default=u_;var Ym=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($a,"__esModule",{value:!0});const d_=Ym(c_),h_=Ym(Ba);let f_=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=d_.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let c=null,u=null,h=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&v&&v.length>1&&(h=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{c=JSON.parse(g),Array.isArray(c)&&i.status===404&&(u=[],c=null,f=200,p="OK")}catch{i.status===404&&g===""?(f=204,p="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new h_.default(c)}return{error:c,data:u,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};$a.default=f_;var p_=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(za,"__esModule",{value:!0});const g_=p_($a);let m_=class extends g_.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};za.default=m_;var y_=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Di,"__esModule",{value:!0});const x_=y_(za);let v_=class extends x_.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Di.default=v_;var w_=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fa,"__esModule",{value:!0});const js=w_(Di);let __=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new js.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new js.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new js.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new js.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new js.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Fa.default=__;var Ua={},Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.version=void 0;Wa.version="0.0.0-automated";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.DEFAULT_HEADERS=void 0;const b_=Wa;Ua.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${b_.version}`};var Qm=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(id,"__esModule",{value:!0});const k_=Qm(Fa),S_=Qm(Di),j_=Ua;let E_=class Gm{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},j_.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new k_.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Gm(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{a.searchParams.append(u,h)})):(o="POST",l=n);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new S_.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};id.default=E_;var ps=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.PostgrestError=Xe.PostgrestBuilder=Xe.PostgrestTransformBuilder=Xe.PostgrestFilterBuilder=Xe.PostgrestQueryBuilder=Xe.PostgrestClient=void 0;const Xm=ps(id);Xe.PostgrestClient=Xm.default;const Jm=ps(Fa);Xe.PostgrestQueryBuilder=Jm.default;const Zm=ps(Di);Xe.PostgrestFilterBuilder=Zm.default;const e0=ps(za);Xe.PostgrestTransformBuilder=e0.default;const t0=ps($a);Xe.PostgrestBuilder=t0.default;const n0=ps(Ba);Xe.PostgrestError=n0.default;var C_=Xe.default={PostgrestClient:Xm.default,PostgrestQueryBuilder:Jm.default,PostgrestFilterBuilder:Zm.default,PostgrestTransformBuilder:e0.default,PostgrestBuilder:t0.default,PostgrestError:n0.default};const{PostgrestClient:P_,PostgrestQueryBuilder:rC,PostgrestFilterBuilder:sC,PostgrestTransformBuilder:iC,PostgrestBuilder:oC,PostgrestError:aC}=C_,T_="2.11.2",N_={"X-Client-Info":`realtime-js/${T_}`},O_="1.0.0",r0=1e4,M_=1e3;var Yr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Yr||(Yr={}));var rt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(rt||(rt={}));var Pt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Pt||(Pt={}));var Uc;(function(t){t.websocket="websocket"})(Uc||(Uc={}));var sr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(sr||(sr={}));class L_{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class s0{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var re;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(re||(re={}));const qh=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=A_(o,t,e,s),i),{})},A_=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?i0(i,o):Wc(o)},i0=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return F_(e,n)}switch(t){case re.bool:return D_(e);case re.float4:case re.float8:case re.int2:case re.int4:case re.int8:case re.numeric:case re.oid:return R_(e);case re.json:case re.jsonb:return I_(e);case re.timestamp:return z_(e);case re.abstime:case re.date:case re.daterange:case re.int4range:case re.int8range:case re.money:case re.reltime:case re.text:case re.time:case re.timestamptz:case re.timetz:case re.tsrange:case re.tstzrange:return Wc(e);default:return Wc(e)}},Wc=t=>t,D_=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},R_=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},I_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},F_=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>i0(e,a))}return t},z_=t=>typeof t=="string"?t.replace(" ","T"):t,o0=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class jl{constructor(e,n,r={},s=r0){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Kh;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Kh||(Kh={}));class Xs{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xs.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Xs.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Xs.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const f=u.map(v=>v.presence_ref),p=h.map(v=>v.presence_ref),x=u.filter(v=>p.indexOf(v.presence_ref)<0),g=h.filter(v=>f.indexOf(v.presence_ref)<0);x.length>0&&(a[c]=x),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Yh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Yh||(Yh={}));var Qh;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Qh||(Qh={}));var Yt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Yt||(Yt={}));class od{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=rt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new jl(this,Pt.join,this.params,this.timeout),this.rejoinTimer=new s0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Xs(this),this.broadcastEndpointURL=o0(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Yt.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Yt.CLOSED));const l={},c={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(Yt.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,x=[];for(let g=0;g<p;g++){const v=f[g],{filter:{event:y,schema:m,table:w,filter:_}}=v,b=u&&u[g];if(b&&b.event===y&&b.schema===m&&b.table===w&&b.filter===_)x.push(Object.assign(Object.assign({},v),{id:b.id}));else{this.unsubscribe(),e==null||e(Yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Yt.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(Yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new jl(this,Pt.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new jl(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Pt;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var x,g,v;return((x=p.filter)===null||x===void 0?void 0:x.event)==="*"||((v=(g=p.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var x,g,v,y,m,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,b=(x=p.filter)===null||x===void 0?void 0:x.event;return _&&((g=n.ids)===null||g===void 0?void 0:g.includes(_))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(m=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:g,table:v,commit_timestamp:y,type:m,errors:w}=x;f=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:y,eventType:m,new:{},old:{},errors:w}),this._getPayloadRecords(x))}p.callback(f,r)})}_isClosed(){return this.state===rt.closed}_isJoined(){return this.state===rt.joined}_isJoining(){return this.state===rt.joining}_isLeaving(){return this.state===rt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&od.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Pt.close,{},e)}_onError(e){this._on(Pt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=qh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=qh(e.columns,e.old_record)),n}}const $_=()=>{},B_=typeof WebSocket<"u",U_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class W_{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=N_,this.params={},this.timeout=r0,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=$_,this.conn=null,this.sendBuffer=[],this.serializer=new L_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>ss(async()=>{const{default:l}=await Promise.resolve().then(()=>fs);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Uc.websocket}`,this.httpEndpoint=o0(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new s0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(B_){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new H_(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ss(async()=>{const{default:e}=await import("./browser-eOT6DFNO.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:O_}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Yr.connecting:return sr.Connecting;case Yr.open:return sr.Open;case Yr.closing:return sr.Closing;default:return sr.Closed}}isConnected(){return this.connectionState()===sr.Open}channel(e,n={config:{}}){const r=new od(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(Pt.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(M_,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Pt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([U_],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class H_{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Yr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class ad extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Se(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class V_ extends ad{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Hc extends ad{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var q_=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const a0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ss(async()=>{const{default:r}=await Promise.resolve().then(()=>fs);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},K_=()=>q_(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ss(()=>Promise.resolve().then(()=>fs),void 0)).Response:Response}),Vc=t=>{if(Array.isArray(t))return t.map(n=>Vc(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Vc(r)}),e};var _r=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const El=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Y_=(t,e,n)=>_r(void 0,void 0,void 0,function*(){const r=yield K_();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new V_(El(s),t.status||500))}).catch(s=>{e(new Hc(El(s),s))}):e(new Hc(El(t),t))}),Q_=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Ri(t,e,n,r,s,i){return _r(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,Q_(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Y_(l,a,r))})})}function ua(t,e,n,r){return _r(this,void 0,void 0,function*(){return Ri(t,"GET",e,n,r)})}function gn(t,e,n,r,s){return _r(this,void 0,void 0,function*(){return Ri(t,"POST",e,r,s,n)})}function G_(t,e,n,r,s){return _r(this,void 0,void 0,function*(){return Ri(t,"PUT",e,r,s,n)})}function X_(t,e,n,r){return _r(this,void 0,void 0,function*(){return Ri(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function l0(t,e,n,r,s){return _r(this,void 0,void 0,function*(){return Ri(t,"DELETE",e,r,s,n)})}var Ye=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const J_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Z_{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=a0(s)}uploadOrUpdate(e,n,r,s){return Ye(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Gh),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Se(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Ye(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:Gh.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Se(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Ye(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield gn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new ad("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}update(e,n,r){return Ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Ye(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Ye(this,void 0,void 0,function*(){try{return{data:{path:(yield gn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Ye(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield gn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Ye(this,void 0,void 0,function*(){try{const s=yield gn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}})}download(e,n){return Ye(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield ua(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Se(a))return{data:null,error:a};throw a}})}info(e){return Ye(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ua(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Vc(r),error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}exists(e){return Ye(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield X_(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Se(r)&&r instanceof Hc){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Ye(this,void 0,void 0,function*(){try{return{data:yield l0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}})}list(e,n,r){return Ye(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},J_),n),{prefix:e||""});return{data:yield gn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const eb="2.7.1",tb={"X-Client-Info":`storage-js/${eb}`};var kr=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class nb{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},tb),n),this.fetch=a0(r)}listBuckets(){return kr(this,void 0,void 0,function*(){try{return{data:yield ua(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Se(e))return{data:null,error:e};throw e}})}getBucket(e){return kr(this,void 0,void 0,function*(){try{return{data:yield ua(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return kr(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return kr(this,void 0,void 0,function*(){try{return{data:yield G_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}emptyBucket(e){return kr(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}})}deleteBucket(e){return kr(this,void 0,void 0,function*(){try{return{data:yield l0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}})}}class rb extends nb{constructor(e,n={},r){super(e,n,r)}from(e){return new Z_(this.url,this.headers,e,this.fetch)}}const sb="2.49.4";let Is="";typeof Deno<"u"?Is="deno":typeof document<"u"?Is="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Is="react-native":Is="node";const ib={"X-Client-Info":`supabase-js-${Is}/${sb}`},ob={headers:ib},ab={schema:"public"},lb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cb={};var ub=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const db=t=>{let e;return t?e=t:typeof fetch>"u"?e=qm:e=fetch,(...n)=>e(...n)},hb=()=>typeof Headers>"u"?Km:Headers,fb=(t,e,n)=>{const r=db(n),s=hb();return(i,o)=>ub(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var pb=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function gb(t){return t.replace(/\/$/,"")}function mb(t,e){const{db:n,auth:r,realtime:s,global:i}=t,{db:o,auth:a,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),i),accessToken:()=>pb(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const c0="2.69.1",Pr=30*1e3,qc=3,Cl=qc*Pr,yb="http://localhost:9999",xb="supabase.auth.token",vb={"X-Client-Info":`gotrue-js/${c0}`},Kc="X-Supabase-Api-Version",u0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},wb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_b=6e5;class ld extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function H(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class bb extends ld{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function kb(t){return H(t)&&t.name==="AuthApiError"}class d0 extends ld{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Kn extends ld{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class dn extends Kn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Sb(t){return H(t)&&t.name==="AuthSessionMissingError"}class Pl extends Kn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ro extends Kn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class so extends Kn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function jb(t){return H(t)&&t.name==="AuthImplicitGrantRedirectError"}class Xh extends Kn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Yc extends Kn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Tl(t){return H(t)&&t.name==="AuthRetryableFetchError"}class Jh extends Kn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Js extends Kn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ef=` 	
\r=`.split(""),Eb=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ef.length;e+=1)t[ef[e].charCodeAt(0)]=-2;for(let e=0;e<Zh.length;e+=1)t[Zh[e].charCodeAt(0)]=e;return t})();function h0(t,e,n){const r=Eb[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function tf(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Tb(o,r,n)};for(let o=0;o<t.length;o+=1)h0(t.charCodeAt(o),s,i);return e.join("")}function Cb(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Pb(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Cb(r,e)}}function Tb(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Nb(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)h0(t.charCodeAt(s),n,r);return new Uint8Array(e)}function Ob(t){const e=[];return Pb(t,n=>e.push(n)),new Uint8Array(e)}function Mb(t){return Math.round(Date.now()/1e3)+t}function Lb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const It=()=>typeof window<"u"&&typeof document<"u",Yn={tested:!1,writable:!1},Zs=()=>{if(!It())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yn.tested)return Yn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Yn.tested=!0,Yn.writable=!0}catch{Yn.tested=!0,Yn.writable=!1}return Yn.writable};function Ab(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const f0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ss(async()=>{const{default:r}=await Promise.resolve().then(()=>fs);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Db=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",p0=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},io=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},oo=async(t,e)=>{await t.removeItem(e)};class Ha{constructor(){this.promise=new Ha.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ha.promiseConstructor=Promise;function Nl(t){const e=t.split(".");if(e.length!==3)throw new Js("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!wb.test(e[r]))throw new Js("JWT not in base64url format");return{header:JSON.parse(tf(e[0])),payload:JSON.parse(tf(e[1])),signature:Nb(e[2]),raw:{header:e[0],payload:e[1]}}}async function Rb(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ib(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Fb(t){return("0"+t.toString(16)).substr(-2)}function zb(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Fb).join("")}async function $b(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Bb(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await $b(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sr(t,e,n=!1){const r=zb();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await p0(t,`${e}-code-verifier`,s);const i=await Bb(r);return[i,r===i?"plain":"s256"]}const Ub=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Wb(t){const e=t.headers.get(Kc);if(!e||!e.match(Ub))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Hb(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Vb(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var qb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const tr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Kb=[502,503,504];async function nf(t){var e;if(!Db(t))throw new Yc(tr(t),0);if(Kb.includes(t.status))throw new Yc(tr(t),t.status);let n;try{n=await t.json()}catch(i){throw new d0(tr(i),i)}let r;const s=Wb(t);if(s&&s.getTime()>=u0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Jh(tr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new dn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Jh(tr(n),t.status,n.weak_password.reasons);throw new bb(tr(n),t.status||500,r)}const Yb=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function q(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Kc]||(i[Kc]=u0["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Qb(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Qb(t,e,n,r,s,i){const o=Yb(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Yc(tr(l),0)}if(a.ok||await nf(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await nf(l)}}function hn(t){var e;let n=null;Zb(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Mb(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function rf(t){const e=hn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function xn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Gb(t){return{data:t,error:null}}function Xb(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=qb(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Jb(t){return t}function Zb(t){return t.access_token&&t.refresh_token&&t.expires_in}var e1=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class t1{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=f0(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await q(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:xn})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=e1(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Xb,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(H(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:xn})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Jb});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(x.split(";")[1].split("=")[1]);c[`${v}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(H(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:xn})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:xn})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:xn})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(H(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}}const n1={getItem:t=>Zs()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Zs()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Zs()&&globalThis.localStorage.removeItem(t)}};function sf(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function r1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const jr={debug:!!(globalThis&&Zs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class g0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class s1 extends g0{}async function i1(t,e,n){jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),jr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new s1(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(jr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}r1();const o1={url:yb,storageKey:xb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function of(t,e,n){return await n()}class ki{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ki.nextInstanceID,ki.nextInstanceID+=1,this.instanceID>0&&It()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},o1),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new t1({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=f0(s.fetch),this.lock=s.lock||of,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:It()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=i1:this.lock=of,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Zs()?this.storage=n1:(this.memoryStorage={},this.storage=sf(this.memoryStorage)):(this.memoryStorage={},this.storage=sf(this.memoryStorage)),It()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${c0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Ab(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),It()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),jb(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return H(n)?{error:n}:{error:new d0("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:hn}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await Sr(this.storage,this.storageKey)),i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:x},xform:hn})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:hn})}else throw new ro("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:rf})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:rf})}else throw new ro("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Pl}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(H(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await io(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:hn});if(await oo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Pl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(H(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:hn}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Pl}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(H(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Sr(this.storage,this.storageKey));const{error:h}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new ro("You must provide either an email or phone number.")}catch(a){if(H(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:hn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Sr(this.storage,this.storageKey)),await q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Gb})}catch(i){if(H(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new dn;const{error:s}=await q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(H(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await q(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await q(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ro("You must provide either an email or phone number and a type")}catch(n){if(H(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await io(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Cl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:xn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new dn}:await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:xn})})}catch(n){if(H(n))return Sb(n)&&(await this._removeSession(),await oo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new dn;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Sr(this.storage,this.storageKey));const{data:c,error:u}=await q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:xn});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new dn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Nl(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(H(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new dn;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(H(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!It())throw new so("No browser detected.");if(e.error||e.error_description||e.error_code)throw new so(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Xh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new so("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Xh("No code detected.");const{data:m,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new so("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const p=f-u;p*1e3<=Pr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const x=f-h;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,u);const{data:g,error:v}=await this._getUser(i);if(v)throw v;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(H(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await io(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(kb(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await oo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Lb(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Sr(this.storage,this.storageKey,!0));try{return await q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(H(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await q(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return It()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(H(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(H(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Ib(async s=>(s>0&&await Rb(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:hn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Tl(i)&&Date.now()+o-r<Pr})}catch(r){if(this._debug(n,"error",r),H(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),It()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await io(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Cl;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Cl}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),Tl(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new dn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ha;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new dn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),H(i)){const o={session:null,error:i};return Tl(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await p0(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await oo(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&It()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Pr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Pr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Pr}ms, refresh threshold is ${qc} ticks`),s<=qc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof g0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!It()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Sr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(H(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await q(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(H(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(H(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(H(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Nl(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+_b>Date.now()))return r;const{data:s,error:i}=await q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Js("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new Js("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:p,error:x}=await this.getSession();if(x||!p.session)return{data:null,error:x};r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Nl(r);if(Hb(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const c=Vb(s.alg),u=await this.fetchJwk(s.kid,n),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,Ob(`${a}.${l}`)))throw new Js("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}}ki.nextInstanceID=0;const a1=ki;class l1 extends a1{constructor(e){super(e)}}var c1=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class u1{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=gb(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:ab,realtime:cb,auth:Object.assign(Object.assign({},lb),{storageKey:l}),global:ob},u=mb(r??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=fb(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new P_(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new s_(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new rb(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return c1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new l1({url:this.authUrl,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new W_(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const d1=(t,e,n)=>new u1(t,e,n),h1="https://quuounmfcyjkqdrfhstf.supabase.co",f1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF1dW91bm1mY3lqa3FkcmZoc3RmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc4NjI0NDIsImV4cCI6MjA2MzQzODQ0Mn0.xvDgWQ64uFFpEqW1RUFXnH5D_0rqz7KlhfsLKaYu01s",W=d1(h1,f1),m0=k.createContext(void 0),p1=({children:t})=>{const[e,n]=k.useState(null),[r,s]=k.useState(!0),i=qn(),o=async()=>{try{await W.auth.signOut()}finally{localStorage.clear(),n(null),i("/login")}};k.useEffect(()=>{W.auth.getSession().then(async({data:f,error:p})=>{const x=f.session;p||!(x!=null&&x.user)?await o():await a(x.user),s(!1)});const{data:{subscription:h}}=W.auth.onAuthStateChange(async(f,p)=>{if(console.log("Auth state changed:",{event:f,session:p}),f==="TOKEN_REFRESH_FAILED"){await o();return}try{p!=null&&p.user?await a(p.user):n(null)}finally{s(!1)}});return()=>{h.unsubscribe()}},[]);const a=async h=>{try{const{data:f,error:p}=await W.from("users").select("name, store, role").eq("auth_id",h.id).single();if(p)throw p;n({id:h.id,email:h.email||"",name:f.name,store:f.store,role:f.role})}catch(f){console.error("Error loading user profile:",f);try{await o()}catch(p){console.error("Error logging out after failed profile load:",p)}}},l=async(h,f)=>{try{s(!0);const{data:p,error:x}=await W.auth.signInWithPassword({email:h,password:f});if(x)throw x;return p.user?(await a(p.user),i("/"),!0):!1}catch(p){throw console.error("Error logging in:",p),p}finally{s(!1)}},c=async(h,f,p)=>{var x;try{s(!0);const{data:g,error:v}=await W.auth.signUp({email:f,password:p});if(v)throw v;const y=(x=g.user)==null?void 0:x.id;if(!y)throw new Error("No se pudo obtener el ID del usuario");const{error:m}=await W.from("users").insert([{auth_id:y,name:h,email:f,store:"",role:"employee"}]);if(m)throw m;return!0}catch(g){throw console.error("Error registering user:",g),g}finally{s(!1)}},u=async()=>{try{await W.auth.signOut(),n(null),i("/login")}catch(h){throw console.error("Error logging out:",h),h}};return d.jsx(m0.Provider,{value:{currentUser:e,login:l,register:c,logout:u,isLoading:r},children:t})},bt=()=>{const t=k.useContext(m0);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var g1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ge=(t,e)=>{const n=k.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>k.createElement("svg",{ref:u,...g1,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${m1(t)}`,a].join(" "),...c},[...e.map(([h,f])=>k.createElement(h,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=ge("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=ge("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=ge("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=ge("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=ge("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=ge("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=ge("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=ge("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=ge("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=ge("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=ge("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=ge("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=ge("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=ge("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=ge("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=ge("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=ge("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=ge("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),A1=({show:t,handleClose:e})=>{const[n,r]=k.useState(""),[s,i]=k.useState(""),[o,a]=k.useState(""),l=c=>{if(c.preventDefault(),a(""),n!==s){a("Las contraseñas no coinciden.");return}e()};return t?d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6 relative",children:[d.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,"aria-label":"Cerrar",children:"×"}),d.jsx("h2",{className:"text-xl font-bold mb-4 text-black",children:"Cambiar contraseña"}),d.jsxs("form",{onSubmit:l,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"Contraseña nueva"}),d.jsx("input",{type:"password",className:"w-full border border-gray-300 rounded px-3 py-2 text-black focus:outline-none focus:ring-2 focus:ring-indigo-500",value:n,onChange:c=>r(c.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar contraseña"}),d.jsx("input",{type:"password",className:"w-full border border-gray-300 rounded px-3 py-2 text-black focus:outline-none focus:ring-2 focus:ring-indigo-500",value:s,onChange:c=>i(c.target.value),required:!0})]}),o&&d.jsx("div",{className:"text-red-600 text-sm",children:o}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-200 text-black rounded shadow-none border-none hover:bg-gray-300 focus:outline-none",onClick:e,children:"Cancelar"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Cambiar contraseña"})]})]})]})}):null};function D1(){const t=wr(),{currentUser:e,logout:n}=bt(),[r,s]=Sn.useState(!1);if(!e)return null;const i=e.role;return d.jsxs("div",{className:"sticky top-0 left-0 h-screen w-64 min-w-64 max-w-64 bg-indigo-800 text-white flex flex-col z-30",children:[d.jsx("div",{className:"flex justify-between items-center p-4 border-b border-indigo-700",children:d.jsx("span",{className:"text-xl font-semibold",children:"Menú"})}),d.jsxs("nav",{className:"mt-4 flex flex-col h-[calc(100%-65px)]",children:[d.jsxs("div",{className:"flex-grow",children:[d.jsxs(no,{to:"/",className:`flex items-center px-6 py-3 ${t.pathname==="/"?"bg-indigo-900":"hover:bg-indigo-700"}`,children:[d.jsx(b1,{className:"h-5 w-5 mr-3"}),"Inicio"]}),d.jsxs(no,{to:"/tasks",className:`flex items-center px-6 py-3 ${t.pathname==="/tasks"||t.pathname.startsWith("/tasks/")&&!t.pathname.includes("new")?"bg-indigo-900":"hover:bg-indigo-700"}`,children:[d.jsx(v1,{className:"h-5 w-5 mr-3"}),"Mis tareas"]}),!1,(i==="supervisor"||i==="admin")&&d.jsxs(no,{to:"/tasks/new",className:`flex items-center px-6 py-3 ${t.pathname==="/tasks/new"?"bg-indigo-900":"hover:bg-indigo-700"}`,children:[d.jsx(C1,{className:"h-5 w-5 mr-3"}),"Creación"]}),i==="admin"&&d.jsxs(no,{to:"/admin",className:`flex items-center px-6 py-3 ${t.pathname==="/admin"?"bg-indigo-900":"hover:bg-indigo-700"}`,children:[d.jsx(x0,{className:"h-5 w-5 mr-3"}),"Administración"]})]}),d.jsxs("div",{className:"mt-auto p-2",children:[d.jsxs("button",{onClick:()=>s(!0),className:"w-full flex items-center px-4 py-3 mb-2 bg-indigo-700 hover:bg-indigo-600 rounded-md",children:[d.jsx("span",{className:"h-5 w-5 mr-3",children:"🔒"}),"Cambiar Contraseña"]}),d.jsxs("button",{onClick:async()=>{try{await n()}catch{alert("Error al cerrar sesión")}},className:"w-full flex items-center px-4 py-3 hover:bg-indigo-700 rounded-md",children:[d.jsx(j1,{className:"h-5 w-5 mr-3"}),"Cerrar Sesión"]})]})]}),r&&d.jsx(A1,{show:r,handleClose:()=>s(!1)})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ii(t){return t+.5|0}const bn=(t,e,n)=>Math.max(Math.min(t,n),e);function Fs(t){return bn(Ii(t*2.55),0,255)}function An(t){return bn(Ii(t*255),0,255)}function Gt(t){return bn(Ii(t/2.55)/100,0,1)}function af(t){return bn(Ii(t*100),0,100)}const ut={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Xc=[..."0123456789ABCDEF"],R1=t=>Xc[t&15],I1=t=>Xc[(t&240)>>4]+Xc[t&15],ao=t=>(t&240)>>4===(t&15),F1=t=>ao(t.r)&&ao(t.g)&&ao(t.b)&&ao(t.a);function z1(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ut[t[1]]*17,g:255&ut[t[2]]*17,b:255&ut[t[3]]*17,a:e===5?ut[t[4]]*17:255}:(e===7||e===9)&&(n={r:ut[t[1]]<<4|ut[t[2]],g:ut[t[3]]<<4|ut[t[4]],b:ut[t[5]]<<4|ut[t[6]],a:e===9?ut[t[7]]<<4|ut[t[8]]:255})),n}const $1=(t,e)=>t<255?e(t):"";function B1(t){var e=F1(t)?R1:I1;return t?"#"+e(t.r)+e(t.g)+e(t.b)+$1(t.a,e):void 0}const U1=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function v0(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function W1(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function H1(t,e,n){const r=v0(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function V1(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function ud(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=V1(n,r,s,u,i),l=l*60+.5),[l|0,c||0,a]}function dd(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(An)}function hd(t,e,n){return dd(v0,t,e,n)}function q1(t,e,n){return dd(H1,t,e,n)}function K1(t,e,n){return dd(W1,t,e,n)}function w0(t){return(t%360+360)%360}function Y1(t){const e=U1.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Fs(+e[5]):An(+e[5]));const s=w0(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=q1(s,i,o):e[1]==="hsv"?r=K1(s,i,o):r=hd(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function Q1(t,e){var n=ud(t);n[0]=w0(n[0]+e),n=hd(n),t.r=n[0],t.g=n[1],t.b=n[2]}function G1(t){if(!t)return;const e=ud(t),n=e[0],r=af(e[1]),s=af(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Gt(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const lf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},cf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function X1(){const t={},e=Object.keys(cf),n=Object.keys(lf);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,lf[i]);i=parseInt(cf[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let lo;function J1(t){lo||(lo=X1(),lo.transparent=[0,0,0,0]);const e=lo[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Z1=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ek(t){const e=Z1.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Fs(o):bn(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Fs(r):bn(r,0,255)),s=255&(e[4]?Fs(s):bn(s,0,255)),i=255&(e[6]?Fs(i):bn(i,0,255)),{r,g:s,b:i,a:n}}}function tk(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Gt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Ol=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Er=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function nk(t,e,n){const r=Er(Gt(t.r)),s=Er(Gt(t.g)),i=Er(Gt(t.b));return{r:An(Ol(r+n*(Er(Gt(e.r))-r))),g:An(Ol(s+n*(Er(Gt(e.g))-s))),b:An(Ol(i+n*(Er(Gt(e.b))-i))),a:t.a+n*(e.a-t.a)}}function co(t,e,n){if(t){let r=ud(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=hd(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function _0(t,e){return t&&Object.assign(e||{},t)}function uf(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=An(t[3]))):(e=_0(t,{r:0,g:0,b:0,a:1}),e.a=An(e.a)),e}function rk(t){return t.charAt(0)==="r"?ek(t):Y1(t)}class Si{constructor(e){if(e instanceof Si)return e;const n=typeof e;let r;n==="object"?r=uf(e):n==="string"&&(r=z1(e)||J1(e)||rk(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=_0(this._rgb);return e&&(e.a=Gt(e.a)),e}set rgb(e){this._rgb=uf(e)}rgbString(){return this._valid?tk(this._rgb):void 0}hexString(){return this._valid?B1(this._rgb):void 0}hslString(){return this._valid?G1(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=nk(this._rgb,e._rgb,n)),this}clone(){return new Si(this.rgb)}alpha(e){return this._rgb.a=An(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ii(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return co(this._rgb,2,e),this}darken(e){return co(this._rgb,2,-e),this}saturate(e){return co(this._rgb,1,e),this}desaturate(e){return co(this._rgb,1,-e),this}rotate(e){return Q1(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ht(){}const sk=(()=>{let t=0;return()=>t++})();function ne(t){return t==null}function be(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function G(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function wt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Rt(t,e){return wt(t)?t:e}function ee(t,e){return typeof t>"u"?e:t}const ik=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ae(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Z(t,e,n,r){let s,i,o;if(be(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(G(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function da(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function ha(t){if(be(t))return t.map(ha);if(G(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=ha(t[n[s]]);return e}return t}function b0(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function ok(t,e,n,r){if(!b0(t))return;const s=e[t],i=n[t];G(s)&&G(i)?ji(s,i,r):e[t]=ha(i)}function ji(t,e,n){const r=be(e)?e:[e],s=r.length;if(!G(t))return t;n=n||{};const i=n.merger||ok;let o;for(let a=0;a<s;++a){if(o=r[a],!G(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function ei(t,e){return ji(t,e,{merger:ak})}function ak(t,e,n){if(!b0(t))return;const r=e[t],s=n[t];G(r)&&G(s)?ei(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ha(s))}const df={"":t=>t,x:t=>t.x,y:t=>t.y};function lk(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function ck(t){const e=lk(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function os(t,e){return(df[e]||(df[e]=ck(e)))(t)}function fd(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ei=t=>typeof t<"u",zn=t=>typeof t=="function",hf=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function uk(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const $e=Math.PI,Dn=2*$e,fa=Number.POSITIVE_INFINITY,dk=$e/180,Nt=$e/2,Qn=$e/4,ff=$e*2/3,Jc=Math.log10,Rn=Math.sign;function Lo(t,e,n){return Math.abs(t-e)<n}function pf(t){const e=Math.round(t);t=Lo(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Jc(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function hk(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function fk(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function pa(t){return!fk(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function pk(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function gk(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function lr(t){return t*($e/180)}function mk(t){return t*(180/$e)}function gf(t){if(!wt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function yk(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*$e&&(i+=Dn),{angle:i,distance:s}}function xk(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Gn(t){return(t%Dn+Dn)%Dn}function vk(t,e,n,r){const s=Gn(t),i=Gn(e),o=Gn(n),a=Gn(i-s),l=Gn(o-s),c=Gn(s-i),u=Gn(s-o);return s===i||s===o||r&&i===o||a>l&&c<u}function Ot(t,e,n){return Math.max(e,Math.min(n,t))}function wk(t){return Ot(t,-32768,32767)}function Br(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function pd(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Zc=(t,e,n,r)=>pd(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),_k=(t,e,n)=>pd(t,n,r=>t[r][e]>=n);function bk(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const k0=["push","pop","shift","splice","unshift"];function kk(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),k0.forEach(n=>{const r="_onData"+fd(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function mf(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(k0.forEach(i=>{delete t[i]}),delete t._chartjs)}function S0(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const j0=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function E0(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,j0.call(window,()=>{r=!1,t.apply(e,n)}))}}function Sk(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const gd=t=>t==="start"?"left":t==="end"?"right":"center",Ie=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,jk=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e,uo=t=>t===0||t===1,yf=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Dn/n)),xf=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Dn/n)+1,ti={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Nt)+1,easeOutSine:t=>Math.sin(t*Nt),easeInOutSine:t=>-.5*(Math.cos($e*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>uo(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>uo(t)?t:yf(t,.075,.3),easeOutElastic:t=>uo(t)?t:xf(t,.075,.3),easeInOutElastic(t){return uo(t)?t:t<.5?.5*yf(t*2,.1125,.45):.5+.5*xf(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ti.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ti.easeInBounce(t*2)*.5:ti.easeOutBounce(t*2-1)*.5+.5};function C0(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function vf(t){return C0(t)?t:new Si(t)}function Ml(t){return C0(t)?t:new Si(t).saturate(.5).darken(.1).hexString()}const Ek=["x","y","borderWidth","radius","tension"],Ck=["color","borderColor","backgroundColor"];function Pk(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Ck},numbers:{type:"number",properties:Ek}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Tk(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const wf=new Map;function Nk(t,e){e=e||{};const n=t+JSON.stringify(e);let r=wf.get(n);return r||(r=new Intl.NumberFormat(t,e),wf.set(n,r)),r}function P0(t,e,n){return Nk(e,n).format(t)}const T0={values(t){return be(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=Ok(t,n)}const o=Jc(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),P0(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(Jc(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?T0.numeric.call(this,t,e,n):""}};function Ok(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var N0={formatters:T0};function Mk(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:N0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const yr=Object.create(null),eu=Object.create(null);function ni(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function Ll(t,e,n){return typeof e=="string"?ji(ni(t,e),n):ji(ni(t,""),e)}class Lk{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Ml(s.backgroundColor),this.hoverBorderColor=(r,s)=>Ml(s.borderColor),this.hoverColor=(r,s)=>Ml(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Ll(this,e,n)}get(e){return ni(this,e)}describe(e,n){return Ll(eu,e,n)}override(e,n){return Ll(yr,e,n)}route(e,n,r,s){const i=ni(this,e),o=ni(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return G(l)?Object.assign({},c,l):ee(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var xe=new Lk({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Pk,Tk,Mk]);function Ak(t){return!t||ne(t.size)||ne(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function _f(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Xn(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function bf(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function kf(t,e,n,r){O0(t,e,n,r,null)}function O0(t,e,n,r,s){let i,o,a,l,c,u,h,f;const p=e.pointStyle,x=e.rotation,g=e.radius;let v=(x||0)*dk;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(v),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),p){default:s?t.ellipse(n,r,s/2,g,0,0,Dn):t.arc(n,r,g,0,Dn),t.closePath();break;case"triangle":u=s?s/2:g,t.moveTo(n+Math.sin(v)*u,r-Math.cos(v)*g),v+=ff,t.lineTo(n+Math.sin(v)*u,r-Math.cos(v)*g),v+=ff,t.lineTo(n+Math.sin(v)*u,r-Math.cos(v)*g),t.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(v+Qn)*l,h=Math.cos(v+Qn)*(s?s/2-c:l),a=Math.sin(v+Qn)*l,f=Math.sin(v+Qn)*(s?s/2-c:l),t.arc(n-h,r-a,c,v-$e,v-Nt),t.arc(n+f,r-o,c,v-Nt,v),t.arc(n+h,r+a,c,v,v+Nt),t.arc(n-f,r+o,c,v+Nt,v+$e),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*g,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}v+=Qn;case"rectRot":h=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,f=Math.sin(v)*(s?s/2:g),t.moveTo(n-h,r-a),t.lineTo(n+f,r-o),t.lineTo(n+h,r+a),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":v+=Qn;case"cross":h=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,f=Math.sin(v)*(s?s/2:g),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":h=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,f=Math.sin(v)*(s?s/2:g),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),v+=Qn,h=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,f=Math.sin(v)*(s?s/2:g),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=s?s/2:Math.cos(v)*g,a=Math.sin(v)*g,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(v)*(s?s/2:g),r+Math.sin(v)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function M0(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function md(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function yd(t){t.restore()}function Dk(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ne(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Rk(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Ik(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ci(t,e,n,r,s,i={}){const o=be(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,Dk(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&Ik(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),ne(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),Rk(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function ga(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*$e,$e,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,$e,Nt,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Nt,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-Nt,!0),t.lineTo(n+o.topLeft,r)}const Fk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,zk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function $k(t,e){const n=(""+t).match(Fk);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Bk=t=>+t||0;function L0(t,e){const n={},r=G(e),s=r?Object.keys(e):e,i=G(t)?r?o=>ee(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=Bk(i(o));return n}function A0(t){return L0(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Qr(t){return L0(t,["topLeft","topRight","bottomLeft","bottomRight"])}function _t(t){const e=A0(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ze(t,e){t=t||{},e=e||xe.font;let n=ee(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ee(t.style,e.style);r&&!(""+r).match(zk)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:ee(t.family,e.family),lineHeight:$k(ee(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ee(t.weight,e.weight),string:""};return s.string=Ak(s),s}function ho(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function Uk(t,e,n){const{min:r,max:s}=t,i=ik(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function gs(t,e){return Object.assign(Object.create(t),e)}function xd(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=F0("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>xd([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return R0(a,l,()=>Gk(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return jf(a).includes(l)},ownKeys(a){return jf(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function as(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:D0(t,r),setContext:i=>as(t,i,n,r),override:i=>as(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return R0(i,o,()=>Hk(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function D0(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:zn(n)?n:()=>n,isIndexable:zn(r)?r:()=>r}}const Wk=(t,e)=>t?t+fd(e):e,vd=(t,e)=>G(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function R0(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function Hk(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return zn(a)&&o.isScriptable(e)&&(a=Vk(e,a,t,n)),be(a)&&a.length&&(a=qk(e,a,t,o.isIndexable)),vd(e,a)&&(a=as(a,s,i&&i[e],o)),a}function Vk(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),vd(t,l)&&(l=wd(s._scopes,s,t,l)),l}function qk(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(G(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=wd(c,s,t,u);e.push(as(h,i,o&&o[t],a))}}return e}function I0(t,e,n){return zn(t)?t(e,n):t}const Kk=(t,e)=>t===!0?e:typeof t=="string"?os(e,t):void 0;function Yk(t,e,n,r,s){for(const i of e){const o=Kk(n,i);if(o){t.add(o);const a=I0(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function wd(t,e,n,r){const s=e._rootScopes,i=I0(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=Sf(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=Sf(a,o,i,l,r),l===null)?!1:xd(Array.from(a),[""],s,i,()=>Qk(e,n,r))}function Sf(t,e,n,r,s){for(;n;)n=Yk(t,e,n,r,s);return n}function Qk(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return be(s)&&G(n)?n:s||{}}function Gk(t,e,n,r){let s;for(const i of e)if(s=F0(Wk(i,t),n),typeof s<"u")return vd(t,s)?wd(n,r,t,s):s}function F0(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function jf(t){let e=t._keys;return e||(e=t._keys=Xk(t._scopes)),e}function Xk(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}function _d(){return typeof window<"u"&&typeof document<"u"}function bd(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ma(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Va=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Jk(t,e){return Va(t).getPropertyValue(e)}const Zk=["top","right","bottom","left"];function dr(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=Zk[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const eS=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function tS(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(eS(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function nr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=Va(n),i=s.boxSizing==="border-box",o=dr(s,"padding"),a=dr(s,"border","width"),{x:l,y:c,box:u}=tS(t,n),h=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:p,height:x}=e;return i&&(p-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-h)/p*n.width/r),y:Math.round((c-f)/x*n.height/r)}}function nS(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&bd(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Va(i),l=dr(a,"border","width"),c=dr(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=ma(a.maxWidth,i,"clientWidth"),s=ma(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||fa,maxHeight:s||fa}}const fo=t=>Math.round(t*10)/10;function rS(t,e,n,r){const s=Va(t),i=dr(s,"margin"),o=ma(s.maxWidth,t,"clientWidth")||fa,a=ma(s.maxHeight,t,"clientHeight")||fa,l=nS(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const f=dr(s,"border","width"),p=dr(s,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=fo(Math.min(c,o,l.maxWidth)),u=fo(Math.min(u,a,l.maxHeight)),c&&!u&&(u=fo(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=fo(Math.floor(u*r))),{width:c,height:u}}function Ef(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const sS=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};_d()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Cf(t,e){const n=Jk(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}const iS=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},oS=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Gr(t,e,n){return t?iS(e,n):oS()}function z0(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function $0(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function po(t,e,n){return t.options.clip?t[n]:e[n]}function aS(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:po(n,e,"left"),right:po(n,e,"right"),top:po(r,e,"top"),bottom:po(r,e,"bottom")}:e}function lS(t,e){const n=e._clip;if(n.disabled)return!1;const r=aS(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class cS{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=j0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Vt=new cS;const Pf="transparent",uS={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=vf(t||Pf),s=r.valid&&vf(e||Pf);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class dS{constructor(e,n,r,s){const i=n[r];s=ho([e.to,s,i,e.from]);const o=ho([e.from,i,s]);this._active=!0,this._fn=e.fn||uS[e.type||typeof o],this._easing=ti[e.easing]||ti.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=ho([e.to,n,s,e.from]),this._from=ho([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class B0{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!G(e))return;const n=Object.keys(xe.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!G(i))return;const o={};for(const a of n)o[a]=i[a];(be(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=fS(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&hS(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let h=i[c];const f=r.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[c]=u;continue}i[c]=h=new dS(f,e,c,u),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Vt.add(this._chart,r),!0}}function hS(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function fS(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Tf(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function pS(t,e,n){if(n===!1)return!1;const r=Tf(t,n),s=Tf(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function gS(t){let e,n,r,s;return G(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function U0(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function Nf(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],wt(c)&&(i||e===0||Rn(e)===Rn(c))&&(e+=c)}return!u&&!r.all?0:e}function mS(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[i]:t[u]};return a}function Al(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function yS(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function xS(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function vS(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Of(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function Mf(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,u=yS(i,o,r),h=e.length;let f;for(let p=0;p<h;++p){const x=e[p],{[l]:g,[c]:v}=x,y=x._stacks||(x._stacks={});f=y[c]=vS(s,u,g),f[a]=v,f._top=Of(f,o,!0,r.type),f._bottom=Of(f,o,!1,r.type);const m=f._visualValues||(f._visualValues={});m[a]=v}}function Dl(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function wS(t,e){return gs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function _S(t,e,n){return gs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Es(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const Rl=t=>t==="reset"||t==="none",Lf=(t,e)=>e?t:Object.assign({},t),bS=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:U0(n,!0),values:null};class ri{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Al(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Es(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(h,f,p,x)=>h==="x"?f:h==="r"?x:p,i=n.xAxisID=ee(r.xAxisID,Dl(e,"x")),o=n.yAxisID=ee(r.yAxisID,Dl(e,"y")),a=n.rAxisID=ee(r.rAxisID,Dl(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),u=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&mf(this._data,this),e._stacked&&Es(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(G(n)){const s=this._cachedMeta;this._data=mS(n,s)}else if(r!==n){if(r){mf(r,this);const s=this._cachedMeta;Es(s),s._parsed=[]}n&&Object.isExtensible(n)&&kk(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Al(n.vScale,n),n.stack!==r.stack&&(s=!0,Es(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(Mf(this,n._parsed),n._stacked=Al(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,h,f;if(this._parsing===!1)r._parsed=s,r._sorted=!0,f=s;else{be(s[e])?f=this.parseArrayData(r,s,e,n):G(s[e])?f=this.parseObjectData(r,s,e,n):f=this.parsePrimitiveData(r,s,e,n);const p=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=h=f[u],l&&(p()&&(l=!1),c=h);r._sorted=l}o&&Mf(this,f)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,h=new Array(s);let f,p,x;for(f=0,p=s;f<p;++f)x=f+r,h[f]={[a]:u||i.parse(c[x],x),[l]:o.parse(n[x],x)};return h}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+r,h=n[u],a[l]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,f,p;for(u=0,h=s;u<h;++u)f=u+r,p=n[f],c[u]={x:i.parse(os(p,a),f),y:o.parse(os(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:U0(s,!0),values:n._stacks[e.axis]._visualValues};return Nf(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=Nf(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=bS(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=xS(a);let f,p;function x(){p=s[f];const g=p[a.axis];return!wt(p[e.axis])||u>g||h<g}for(f=0;f<o&&!(!x()&&(this.updateRangeFromParsed(c,e,p,l),i));++f);if(i){for(f=o-1;f>=0;--f)if(!x()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],wt(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=gS(ee(this.options.clip,pS(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=_S(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=wS(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Ei(r);if(a)return Lf(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(xe.elements[e]),x=()=>this.getContext(r,s,n),g=c.resolveNamedOptions(f,p,x,h);return g.$shared&&(g.$shared=l,i[o]=Object.freeze(Lf(g,l))),g}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(e,r,n))}const c=new B0(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Rl(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){Rl(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!Rl(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Es(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Y(ri,"defaults",{}),Y(ri,"datasetElementType",null),Y(ri,"dataElementType",null);function kS(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=S0(r.sort((s,i)=>s-i))}return t._cache.$bar}function SS(t){const e=t.iScale,n=kS(e,t.type);let r=e._length,s,i,o,a;const l=()=>{o===32767||o===-32768||(Ei(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(s=0,i=n.length;s<i;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,i=e.ticks.length;s<i;++s)o=e.getPixelForTick(s),l();return r}function jS(t,e,n,r){const s=n.barThickness;let i,o;return ne(s)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=s*r,o=1),{chunk:i/r,ratio:o,start:e.pixels[t]-i/2}}function ES(t,e,n,r){const s=e.pixels,i=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const c=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function CS(t,e,n,r){const s=n.parse(t[0],r),i=n.parse(t[1],r),o=Math.min(s,i),a=Math.max(s,i);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:i,min:o,max:a}}function W0(t,e,n,r){return be(t)?CS(t,e,n,r):e[n.axis]=n.parse(t,r),e}function Af(t,e,n,r){const s=t.iScale,i=t.vScale,o=s.getLabels(),a=s===i,l=[];let c,u,h,f;for(c=n,u=n+r;c<u;++c)f=e[c],h={},h[s.axis]=a||s.parse(o[c],c),l.push(W0(f,h,i,c));return l}function Il(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function PS(t,e,n){return t!==0?Rn(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function TS(t){let e,n,r,s,i;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:e,top:s,bottom:i}}function NS(t,e,n,r){let s=e.borderSkipped;const i={};if(!s){t.borderSkipped=i;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=TS(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=u:(i[Df(u,o,a,l)]=!0,s=c)),i[Df(s,o,a,l)]=!0,t.borderSkipped=i}function Df(t,e,n,r){return r?(t=OS(t,e,n),t=Rf(t,n,e)):t=Rf(t,e,n),t}function OS(t,e,n){return t===e?n:t===n?e:t}function Rf(t,e,n){return t==="start"?e:t==="end"?n:t}function MS(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Ao extends ri{parsePrimitiveData(e,n,r,s){return Af(e,n,r,s)}parseArrayData(e,n,r,s){return Af(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=i.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let f,p,x,g;for(f=r,p=r+s;f<p;++f)g=n[f],x={},x[i.axis]=i.parse(os(g,c),f),h.push(W0(os(g,u),x,o,f));return h}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(e),o=i._custom,a=Il(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const i=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,s);for(let p=n;p<n+r;p++){const x=this.getParsed(p),g=i||ne(x[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),v=this._calculateBarIndexPixels(p,u),y=(x._stacks||{})[a.axis],m={horizontal:c,base:g.base,enableBorderRadius:!y||Il(x._custom)||o===y._top||o===y._bottom,x:c?g.head:v.center,y:c?v.center:g.head,height:c?v.size:Math.abs(g.size),width:c?Math.abs(g.size):v.size};f&&(m.options=h||this.resolveDataElementOptions(p,e[p].active?"active":s));const w=m.options||e[p].options;NS(m,w,y,o),MS(m,w,u.ratio),this.updateElement(e[p],p,m,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const h=u._parsed.find(p=>p[r.axis]===l),f=h&&h[u.vScale.axis];if(ne(f)||isNaN(f))return!0};for(const u of s)if(!(n!==void 0&&c(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const s=this._getStacks(e,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,o;for(i=0,o=n.data.length;i<o;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const a=e.barThickness;return{min:a||SS(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),c=l._custom,u=Il(c);let h=l[n.axis],f=0,p=r?this.applyStack(n,l,r):h,x,g;p!==h&&(f=p-h,p=h),u&&(h=c.barStart,p=c.barEnd-c.barStart,h!==0&&Rn(h)!==Rn(c.barEnd)&&(f=0),f+=h);const v=!ne(i)&&!u?i:f;let y=n.getPixelForValue(v);if(this.chart.getDataVisibility(e)?x=n.getPixelForValue(f+p):x=y,g=x-y,Math.abs(g)<o){g=PS(g,n,a)*o,h===a&&(y-=g/2);const m=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),_=Math.min(m,w),b=Math.max(m,w);y=Math.max(Math.min(y,b),_),x=y+g,r&&!u&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(x)-n.getValueForPixel(y))}if(y===n.getPixelForValue(a)){const m=Rn(g)*n.getLineWidthForValue(a)/2;y+=m,g-=m}return{size:g,base:y,head:x,center:x+g/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,i=s.skipNull,o=ee(s.maxBarThickness,1/0);let a,l;if(n.grouped){const c=i?this._getStackCount(e):n.stackCount,u=s.barThickness==="flex"?ES(e,n,s,c):jS(e,n,s,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}Y(Ao,"id","bar"),Y(Ao,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Y(Ao,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Jn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class kd{constructor(e){Y(this,"options");this.options=e||{}}static override(e){Object.assign(kd.prototype,e)}init(){}formats(){return Jn()}parse(){return Jn()}format(){return Jn()}add(){return Jn()}diff(){return Jn()}startOf(){return Jn()}endOf(){return Jn()}}var LS={_date:kd};function AS(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?_k:Zc;if(r){if(s._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=c(i,e,n-h),p=c(i,e,n+h);return{lo:f.lo,hi:p.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:h}=s._cachedMeta,{_parsed:f}=t,p=f.slice(0,u.lo+1).reverse().findIndex(g=>!ne(g[h.axis]));u.lo-=Math.max(0,p);const x=f.slice(u.hi).findIndex(g=>!ne(g[h.axis]));u.hi+=Math.max(0,x)}return u}}return{lo:0,hi:i.length-1}}function Fi(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:h,hi:f}=AS(i[a],e,o,s);for(let p=h;p<=f;++p){const x=u[p];x.skip||r(x,c,p)}}}function DS(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Fl(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||Fi(t,n,e,function(a,l,c){!s&&!M0(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function RS(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=yk(o,{x:e.x,y:e.y});vk(h,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return Fi(t,n,e,i),s}function IS(t,e,n,r,s,i){let o=[];const a=DS(n);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const p=u.inRange(e.x,e.y,s);if(r&&!p)return;const x=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(x))&&!p)return;const v=a(e,x);v<l?(o=[{element:u,datasetIndex:h,index:f}],l=v):v===l&&o.push({element:u,datasetIndex:h,index:f})}return Fi(t,n,e,c),o}function zl(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?RS(t,e,n,s):IS(t,e,n,r,s,i)}function If(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Fi(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var FS={evaluateInteractionItems:Fi,modes:{index(t,e,n,r){const s=nr(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Fl(t,s,i,r,o):zl(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=nr(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Fl(t,s,i,r,o):zl(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const s=nr(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Fl(t,s,i,r,o)},nearest(t,e,n,r){const s=nr(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return zl(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=nr(e,t);return If(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=nr(e,t);return If(t,s,"y",n.intersect,r)}}};const H0=["left","top","right","bottom"];function Cs(t,e){return t.filter(n=>n.pos===e)}function Ff(t,e){return t.filter(n=>H0.indexOf(n.pos)===-1&&n.box.axis===e)}function Ps(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function zS(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function $S(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!H0.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function BS(t,e){const n=$S(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=u?u*s:l&&e.availableHeight)}return n}function US(t){const e=zS(t),n=Ps(e.filter(c=>c.box.fullSize),!0),r=Ps(Cs(e,"left"),!0),s=Ps(Cs(e,"right")),i=Ps(Cs(e,"top"),!0),o=Ps(Cs(e,"bottom")),a=Ff(e,"x"),l=Ff(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Cs(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function zf(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function V0(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function WS(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!G(s)){n.size&&(t[s]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,t[s]+=n.size}i.getPadding&&V0(o,i.getPadding());const a=Math.max(0,e.outerWidth-zf(o,t,"left","right")),l=Math.max(0,e.outerHeight-zf(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function HS(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function VS(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function zs(t,e,n,r){const s=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,VS(a.horizontal,e));const{same:h,other:f}=WS(e,n,a,r);c|=h&&s.length,u=u||f,l.fullSize||s.push(a)}return c&&zs(s,e,n,r)||u}function go(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function $f(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,f=c.size||l.height;Ei(c.start)&&(o=c.start),l.fullSize?go(l,s.left,o,n.outerWidth-s.right-s.left,f):go(l,e.left+c.placed,o,h,f),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,f=c.size||l.width;Ei(c.start)&&(i=c.start),l.fullSize?go(l,i,s.top,f,n.outerHeight-s.bottom-s.top):go(l,i,e.top+c.placed,f,h),c.start=i,c.placed+=h,i=l.right}}e.x=i,e.y=o}var gt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=_t(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=US(t.boxes),l=a.vertical,c=a.horizontal;Z(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,v)=>v.box.options&&v.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},s);V0(f,_t(r));const p=Object.assign({maxPadding:f,w:i,h:o,x:s.left,y:s.top},s),x=BS(l.concat(c),h);zs(a.fullSize,p,h,x),zs(l,p,h,x),zs(c,p,h,x)&&zs(l,p,h,x),HS(p),$f(a.leftAndTop,p,h,x),p.x+=p.w,p.y+=p.h,$f(a.rightAndBottom,p,h,x),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Z(a.chartArea,g=>{const v=g.box;Object.assign(v,t.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class q0{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class qS extends q0{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Do="$chartjs",KS={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Bf=t=>t===null||t==="";function YS(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Do]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Bf(s)){const i=Cf(t,"width");i!==void 0&&(t.width=i)}if(Bf(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Cf(t,"height");i!==void 0&&(t.height=i)}return t}const K0=sS?{passive:!0}:!1;function QS(t,e,n){t&&t.addEventListener(e,n,K0)}function GS(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,K0)}function XS(t,e){const n=KS[t.type]||t.type,{x:r,y:s}=nr(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function ya(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function JS(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||ya(a.addedNodes,r),o=o&&!ya(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function ZS(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||ya(a.removedNodes,r),o=o&&!ya(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Pi=new Map;let Uf=0;function Y0(){const t=window.devicePixelRatio;t!==Uf&&(Uf=t,Pi.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function ej(t,e){Pi.size||window.addEventListener("resize",Y0),Pi.set(t,e)}function tj(t){Pi.delete(t),Pi.size||window.removeEventListener("resize",Y0)}function nj(t,e,n){const r=t.canvas,s=r&&bd(r);if(!s)return;const i=E0((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(s),ej(t,i),o}function $l(t,e,n){n&&n.disconnect(),e==="resize"&&tj(t)}function rj(t,e,n){const r=t.canvas,s=E0(i=>{t.ctx!==null&&n(XS(i,t))},t);return QS(r,e,s),s}class sj extends q0{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(YS(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Do])return!1;const r=n[Do].initial;["height","width"].forEach(i=>{const o=r[i];ne(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Do],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:JS,detach:ZS,resize:nj}[n]||rj;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:$l,detach:$l,resize:$l}[n]||GS)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return rS(e,n,r,s)}isAttached(e){const n=e&&bd(e);return!!(n&&n.isConnected)}}function ij(t){return!_d()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?qS:sj}class $n{constructor(){Y(this,"x");Y(this,"y");Y(this,"active",!1);Y(this,"options");Y(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return pa(this.x)&&pa(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}Y($n,"defaults",{}),Y($n,"defaultRoutes");function oj(t,e){const n=t.options.ticks,r=aj(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?cj(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return uj(e,c,i,o/s),c;const u=lj(i,e,s);if(o>0){let h,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(mo(e,c,u,ne(p)?0:a-p,a),h=0,f=o-1;h<f;h++)mo(e,c,u,i[h],i[h+1]);return mo(e,c,u,l,ne(p)?e.length:l+p),c}return mo(e,c,u),c}function aj(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function lj(t,e,n){const r=dj(t),s=e.length/n;if(!r)return Math.max(s,1);const i=hk(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function cj(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function uj(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function mo(t,e,n,r,s){const i=ee(r,0),o=Math.min(ee(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function dj(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const hj=t=>t==="left"?"right":t==="right"?"left":t,Wf=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Hf=(t,e)=>Math.min(e||t,t);function Vf(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function fj(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function pj(t,e){Z(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function Ts(t){return t.drawTicks?t.tickLength:0}function qf(t,e){if(!t.display)return 0;const n=ze(t.font,e),r=_t(t.padding);return(be(t.text)?t.text.length:1)*n.lineHeight+r.height}function gj(t,e){return gs(t,{scale:e,type:"scale"})}function mj(t,e,n){return gs(t,{tick:n,index:e,type:"tick"})}function yj(t,e,n){let r=gd(t);return(n&&e!=="right"||!n&&e==="right")&&(r=hj(r)),r}function xj(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,f,p,x;const g=o-s,v=a-i;if(t.isHorizontal()){if(p=Ie(r,i,a),G(n)){const y=Object.keys(n)[0],m=n[y];x=u[y].getPixelForValue(m)+g-e}else n==="center"?x=(c.bottom+c.top)/2+g-e:x=Wf(t,n,e);f=a-i}else{if(G(n)){const y=Object.keys(n)[0],m=n[y];p=u[y].getPixelForValue(m)-v+e}else n==="center"?p=(c.left+c.right)/2-v+e:p=Wf(t,n,e);x=Ie(r,o,s),h=n==="left"?-Nt:Nt}return{titleX:p,titleY:x,maxWidth:f,rotation:h}}class ms extends $n{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Rt(e,Number.POSITIVE_INFINITY),n=Rt(n,Number.NEGATIVE_INFINITY),r=Rt(r,Number.POSITIVE_INFINITY),s=Rt(s,Number.NEGATIVE_INFINITY),{min:Rt(e,r),max:Rt(n,s),minDefined:wt(e),maxDefined:wt(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Rt(n,Rt(r,n)),max:Rt(r,Rt(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ae(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Uk(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Vf(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=oj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ae(this.options.afterUpdate,[this])}beforeSetDimensions(){ae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ae(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ae(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=ae(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){ae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Hf(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=Ot(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),h+6>a&&(a=p/(r-(e.offset?.5:1)),l=this.maxHeight-Ts(e.grid)-n.padding-qf(e.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),o=mk(Math.min(Math.asin(Ot((u.highest.height+6)/a,-1,1)),Math.asin(Ot(l/c,-1,1))-Math.asin(Ot(f/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ae(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ae(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=qf(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ts(i)+l):(e.height=this.maxHeight,e.width=Ts(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),p=r.padding*2,x=lr(this.labelRotation),g=Math.cos(x),v=Math.sin(x);if(a){const y=r.mirror?0:v*h.width+g*f.height;e.height=Math.min(this.maxHeight,e.height+y+p)}else{const y=r.mirror?0:g*h.width+v*f.height;e.width=Math.min(this.maxWidth,e.width+y+p)}this._calculatePadding(c,u,v,g)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=s*e.width,p=r*n.height):(f=r*e.height,p=s*n.width):i==="start"?p=n.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ae(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)ne(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Vf(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/Hf(n,r));let c=0,u=0,h,f,p,x,g,v,y,m,w,_,b;for(h=0;h<n;h+=l){if(x=e[h].label,g=this._resolveTickFontOptions(h),s.font=v=g.string,y=i[v]=i[v]||{data:{},gc:[]},m=g.lineHeight,w=_=0,!ne(x)&&!be(x))w=_f(s,y.data,y.gc,w,x),_=m;else if(be(x))for(f=0,p=x.length;f<p;++f)b=x[f],!ne(b)&&!be(b)&&(w=_f(s,y.data,y.gc,w,b),_+=m);o.push(w),a.push(_),c=Math.max(w,c),u=Math.max(_,u)}pj(i,n);const j=o.indexOf(c),S=a.indexOf(u),E=L=>({width:o[L]||0,height:a[L]||0});return{first:E(0),last:E(n-1),widest:E(j),highest:E(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return wk(this._alignToPixels?Xn(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=mj(this.getContext(),e,r))}return this.$context||(this.$context=gj(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=lr(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=Ts(i),p=[],x=a.setContext(this.getContext()),g=x.display?x.width:0,v=g/2,y=function(B){return Xn(r,B,g)};let m,w,_,b,j,S,E,L,N,R,F,X;if(o==="top")m=y(this.bottom),S=this.bottom-f,L=m-v,R=y(e.top)+v,X=e.bottom;else if(o==="bottom")m=y(this.top),R=e.top,X=y(e.bottom)-v,S=m+v,L=this.top+f;else if(o==="left")m=y(this.right),j=this.right-f,E=m-v,N=y(e.left)+v,F=e.right;else if(o==="right")m=y(this.left),N=e.left,F=y(e.right)-v,j=m+v,E=this.left+f;else if(n==="x"){if(o==="center")m=y((e.top+e.bottom)/2+.5);else if(G(o)){const B=Object.keys(o)[0],I=o[B];m=y(this.chart.scales[B].getPixelForValue(I))}R=e.top,X=e.bottom,S=m+v,L=S+f}else if(n==="y"){if(o==="center")m=y((e.left+e.right)/2);else if(G(o)){const B=Object.keys(o)[0],I=o[B];m=y(this.chart.scales[B].getPixelForValue(I))}j=m-v,E=j-f,N=e.left,F=e.right}const ie=ee(s.ticks.maxTicksLimit,h),K=Math.max(1,Math.ceil(h/ie));for(w=0;w<h;w+=K){const B=this.getContext(w),I=i.setContext(B),C=a.setContext(B),P=I.lineWidth,O=I.color,D=C.dash||[],$=C.dashOffset,me=I.tickWidth,Ce=I.tickColor,kt=I.tickBorderDash||[],Pe=I.tickBorderDashOffset;_=fj(this,w,l),_!==void 0&&(b=Xn(r,_,P),c?j=E=N=F=b:S=L=R=X=b,p.push({tx1:j,ty1:S,tx2:E,ty2:L,x1:N,y1:R,x2:F,y2:X,width:P,color:O,borderDash:D,borderDashOffset:$,tickWidth:me,tickColor:Ce,tickBorderDash:kt,tickBorderDashOffset:Pe}))}return this._ticksLength=h,this._borderValue=m,p}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=i,f=Ts(r.grid),p=f+u,x=h?-u:p,g=-lr(this.labelRotation),v=[];let y,m,w,_,b,j,S,E,L,N,R,F,X="middle";if(s==="top")j=this.bottom-x,S=this._getXAxisLabelAlignment();else if(s==="bottom")j=this.top+x,S=this._getXAxisLabelAlignment();else if(s==="left"){const K=this._getYAxisLabelAlignment(f);S=K.textAlign,b=K.x}else if(s==="right"){const K=this._getYAxisLabelAlignment(f);S=K.textAlign,b=K.x}else if(n==="x"){if(s==="center")j=(e.top+e.bottom)/2+p;else if(G(s)){const K=Object.keys(s)[0],B=s[K];j=this.chart.scales[K].getPixelForValue(B)+p}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")b=(e.left+e.right)/2-p;else if(G(s)){const K=Object.keys(s)[0],B=s[K];b=this.chart.scales[K].getPixelForValue(B)}S=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?X="top":l==="end"&&(X="bottom"));const ie=this._getLabelSizes();for(y=0,m=a.length;y<m;++y){w=a[y],_=w.label;const K=i.setContext(this.getContext(y));E=this.getPixelForTick(y)+i.labelOffset,L=this._resolveTickFontOptions(y),N=L.lineHeight,R=be(_)?_.length:1;const B=R/2,I=K.color,C=K.textStrokeColor,P=K.textStrokeWidth;let O=S;o?(b=E,S==="inner"&&(y===m-1?O=this.options.reverse?"left":"right":y===0?O=this.options.reverse?"right":"left":O="center"),s==="top"?c==="near"||g!==0?F=-R*N+N/2:c==="center"?F=-ie.highest.height/2-B*N+N:F=-ie.highest.height+N/2:c==="near"||g!==0?F=N/2:c==="center"?F=ie.highest.height/2-B*N:F=ie.highest.height-R*N,h&&(F*=-1),g!==0&&!K.showLabelBackdrop&&(b+=N/2*Math.sin(g))):(j=E,F=(1-R)*N/2);let D;if(K.showLabelBackdrop){const $=_t(K.backdropPadding),me=ie.heights[y],Ce=ie.widths[y];let kt=F-$.top,Pe=0-$.left;switch(X){case"middle":kt-=me/2;break;case"bottom":kt-=me;break}switch(S){case"center":Pe-=Ce/2;break;case"right":Pe-=Ce;break;case"inner":y===m-1?Pe-=Ce:y>0&&(Pe-=Ce/2);break}D={left:Pe,top:kt,width:Ce+$.width,height:me+$.height,color:K.backdropColor}}v.push({label:_,font:L,textOffset:F,options:{rotation:g,color:I,strokeColor:C,strokeWidth:P,textAlign:O,textBaseline:X,translation:[b,j],backdrop:D}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-lr(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=Xn(e,this.left,o)-o/2,u=Xn(e,this.right,a)+a/2,h=f=l):(h=Xn(e,this.top,o)-o/2,f=Xn(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&md(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Ci(r,c,0,u,l,a)}s&&yd(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=ze(r.font),o=_t(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||G(n)?(l+=o.bottom,be(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=xj(this,l,n,a);Ci(e,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:f,textAlign:yj(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ee(e.grid&&e.grid.z,-1),s=ee(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ms.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ze(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class yo{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;_j(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,vj(e,o,r),this.override&&xe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in xe[s]&&(delete xe[s][r],this.override&&delete yr[r])}}function vj(t,e,n){const r=ji(Object.create(null),[n?xe.get(n):{},xe.get(e),t.defaults]);xe.set(e,r),t.defaultRoutes&&wj(e,t.defaultRoutes),t.descriptors&&xe.describe(e,t.descriptors)}function wj(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");xe.route(i,s,l,a)})}function _j(t){return"id"in t&&"defaults"in t}class bj{constructor(){this.controllers=new yo(ri,"datasets",!0),this.elements=new yo($n,"elements"),this.plugins=new yo(Object,"plugins"),this.scales=new yo(ms,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Z(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=fd(e);ae(r["before"+s],[],r),n[e](r),ae(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var $t=new bj;class kj{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(ae(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){ne(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=ee(r.options&&r.options.plugins,{}),i=Sj(r);return s===!1&&!n?[]:Ej(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function Sj(t){const e={},n=[],r=Object.keys($t.plugins.items);for(let i=0;i<r.length;i++)n.push($t.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function jj(t,e){return!e&&t===!1?null:t===!0?{}:t}function Ej(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=jj(r[l],s);c!==null&&i.push({plugin:a,options:Cj(t.config,{plugin:a,local:n[l]},c,o)})}return i}function Cj(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function tu(t,e){const n=xe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Pj(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Tj(t,e){return t===e?"_index_":"_value_"}function Kf(t){if(t==="x"||t==="y"||t==="r")return t}function Nj(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function nu(t,...e){if(Kf(t))return t;for(const n of e){const r=n.axis||Nj(n.position)||t.length>1&&Kf(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Yf(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Oj(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Yf(t,"x",n[0])||Yf(t,"y",n[0])}return{}}function Mj(t,e){const n=yr[t.type]||{scales:{}},r=e.scales||{},s=tu(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!G(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=nu(o,a,Oj(o,t),xe.scales[a.type]),c=Tj(l,s),u=n.scales||{};i[o]=ei(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||tu(a,e),u=(yr[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=Pj(h,l),p=o[f+"AxisID"]||f;i[p]=i[p]||Object.create(null),ei(i[p],[{axis:f},r[p],u[h]])})}),Object.keys(i).forEach(o=>{const a=i[o];ei(a,[xe.scales[a.type],xe.scale])}),i}function Q0(t){const e=t.options||(t.options={});e.plugins=ee(e.plugins,{}),e.scales=Mj(t,e)}function G0(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Lj(t){return t=t||{},t.data=G0(t.data),Q0(t),t}const Qf=new Map,X0=new Set;function xo(t,e){let n=Qf.get(t);return n||(n=e(),Qf.set(t,n),X0.add(n)),n}const Ns=(t,e,n)=>{const r=os(e,n);r!==void 0&&t.add(r)};class Aj{constructor(e){this._config=Lj(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=G0(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Q0(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return xo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return xo(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return xo(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return xo(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>Ns(l,e,h))),u.forEach(h=>Ns(l,s,h)),u.forEach(h=>Ns(l,yr[i]||{},h)),u.forEach(h=>Ns(l,xe,h)),u.forEach(h=>Ns(l,eu,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),X0.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,yr[n]||{},xe.datasets[n]||{},{type:n},xe,eu]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Gf(this._resolverCache,e,s);let l=o;if(Rj(o,n)){i.$shared=!1,r=zn(r)?r():r;const c=this.createResolver(e,r,a);l=as(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=Gf(this._resolverCache,e,r);return G(n)?as(i,n,void 0,s):i}}function Gf(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:xd(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const Dj=t=>G(t)&&Object.getOwnPropertyNames(t).some(e=>zn(t[e]));function Rj(t,e){const{isScriptable:n,isIndexable:r}=D0(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(zn(a)||Dj(a))||o&&be(a))return!0}return!1}var Ij="4.4.9";const Fj=["top","bottom","left","right","chartArea"];function Xf(t,e){return t==="top"||t==="bottom"||Fj.indexOf(t)===-1&&e==="x"}function Jf(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Zf(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ae(n&&n.onComplete,[t],e)}function zj(t){const e=t.chart,n=e.options.animation;ae(n&&n.onProgress,[t],e)}function J0(t){return _d()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ro={},ep=t=>{const e=J0(t);return Object.values(Ro).filter(n=>n.canvas===e).pop()};function $j(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function Bj(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var un;let qa=(un=class{static register(...e){$t.add(...e),tp()}static unregister(...e){$t.remove(...e),tp()}constructor(e,n){const r=this.config=new Aj(n),s=J0(e),i=ep(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||ij(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=sk(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new kj,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Sk(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Ro[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Vt.listen(this,"complete",Zf),Vt.listen(this,"progress",zj),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return ne(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return $t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ef(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return bf(this.canvas,this.ctx),this}stop(){return Vt.stop(this),this}resize(e,n){Vt.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Ef(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ae(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Z(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=nu(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Z(i,o=>{const a=o.options,l=a.id,c=nu(l,a),u=ee(a.type,o.dtype);(a.position===void 0||Xf(a.position,c)!==Xf(o.dposition))&&(a.position=o.dposition),s[l]=!0;let h=null;if(l in r&&r[l].type===u)h=r[l];else{const f=$t.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(a,e)}),Z(s,(o,a)=>{o||delete r[a]}),Z(r,o=>{gt.configure(this,o,o.options),gt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Jf("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||tu(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=$t.getController(a),{datasetElementType:c,dataElementType:u}=xe.datasets[a];Object.assign(l,{dataElementType:$t.getElement(u),datasetElementType:c&&$t.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Z(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!s&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Z(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Jf("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Z(this.scales,e=>{gt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!hf(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;$j(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!hf(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;gt.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Z(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,zn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Vt.has(this)?this.attached&&!Vt.running(this)&&Vt.start(this):(this.draw(),Zf({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=lS(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&md(n,s),e.controller.draw(),s&&yd(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return M0(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=FS.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=gs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);Ei(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Vt.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),bf(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ro[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};Z(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Z(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Z(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!da(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=uk(e),c=Bj(e,this._lastEvent,r,l);r&&(this._lastEvent=null,ae(i.onHover,[e,a,this],this),l&&ae(i.onClick,[e,a,this],this));const u=!da(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},Y(un,"defaults",xe),Y(un,"instances",Ro),Y(un,"overrides",yr),Y(un,"registry",$t),Y(un,"version",Ij),Y(un,"getChart",ep),un);function tp(){return Z(qa.instances,t=>t._plugins.invalidate())}function Z0(t,e){const{x:n,y:r,base:s,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,s),l=Math.max(n,s),c=r-h,u=r+h):(h=i/2,a=n-h,l=n+h,c=Math.min(r,s),u=Math.max(r,s)),{left:a,top:c,right:l,bottom:u}}function kn(t,e,n,r){return t?0:Ot(e,n,r)}function Uj(t,e,n){const r=t.options.borderWidth,s=t.borderSkipped,i=A0(r);return{t:kn(s.top,i.top,0,n),r:kn(s.right,i.right,0,e),b:kn(s.bottom,i.bottom,0,n),l:kn(s.left,i.left,0,e)}}function Wj(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,i=Qr(s),o=Math.min(e,n),a=t.borderSkipped,l=r||G(s);return{topLeft:kn(!l||a.top||a.left,i.topLeft,0,o),topRight:kn(!l||a.top||a.right,i.topRight,0,o),bottomLeft:kn(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:kn(!l||a.bottom||a.right,i.bottomRight,0,o)}}function Hj(t){const e=Z0(t),n=e.right-e.left,r=e.bottom-e.top,s=Uj(t,n/2,r/2),i=Wj(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:i},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function Bl(t,e,n,r){const s=e===null,i=n===null,a=t&&!(s&&i)&&Z0(t,r);return a&&(s||Br(e,a.left,a.right))&&(i||Br(n,a.top,a.bottom))}function Vj(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function qj(t,e){t.rect(e.x,e.y,e.w,e.h)}function Ul(t,e,n={}){const r=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+i,h:t.h+o,radius:t.radius}}class Io extends $n{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:o}=Hj(this),a=Vj(o.radius)?ga:qj;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,Ul(o,n,i)),e.clip(),a(e,Ul(i,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,Ul(i,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,r){return Bl(this,e,n,r)}inXRange(e,n){return Bl(this,e,null,n)}inYRange(e,n){return Bl(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Y(Io,"id","bar"),Y(Io,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Y(Io,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const np=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Kj=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class rp extends $n{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ae(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=ze(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=np(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((x,g)=>{const v=r+n/2+i.measureText(x.text).width;(g===0||c[c.length-1]+v+2*a>o)&&(h+=u,c[c.length-(g>0?0:1)]=0,p+=u,f++),l[g]={left:0,top:p,row:f,width:v,height:s},c[c.length-1]+=v+a}),h}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,f=0,p=0,x=0,g=0;return this.legendItems.forEach((v,y)=>{const{itemWidth:m,itemHeight:w}=Yj(r,n,i,v,s);y>0&&p+w+2*a>u&&(h+=f+a,c.push({width:f,height:p}),x+=f+a,g++,f=p=0),l[y]={left:x,top:p,col:g,width:m,height:w},f=Math.max(f,m),p+=w+a}),h+=f,c.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Gr(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ie(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Ie(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Ie(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Ie(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;md(e,this),this._draw(),yd(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=xe.color,l=Gr(e.rtl,this.left,this.width),c=ze(o.font),{padding:u}=o,h=c.size,f=h/2;let p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:x,boxHeight:g,itemHeight:v}=np(o,h),y=function(j,S,E){if(isNaN(x)||x<=0||isNaN(g)||g<0)return;s.save();const L=ee(E.lineWidth,1);if(s.fillStyle=ee(E.fillStyle,a),s.lineCap=ee(E.lineCap,"butt"),s.lineDashOffset=ee(E.lineDashOffset,0),s.lineJoin=ee(E.lineJoin,"miter"),s.lineWidth=L,s.strokeStyle=ee(E.strokeStyle,a),s.setLineDash(ee(E.lineDash,[])),o.usePointStyle){const N={radius:g*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:L},R=l.xPlus(j,x/2),F=S+f;O0(s,N,R,F,o.pointStyleWidth&&x)}else{const N=S+Math.max((h-g)/2,0),R=l.leftForLtr(j,x),F=Qr(E.borderRadius);s.beginPath(),Object.values(F).some(X=>X!==0)?ga(s,{x:R,y:N,w:x,h:g,radius:F}):s.rect(R,N,x,g),s.fill(),L!==0&&s.stroke()}s.restore()},m=function(j,S,E){Ci(s,E.text,j,S+v/2,c,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},w=this.isHorizontal(),_=this._computeTitleHeight();w?p={x:Ie(i,this.left+u,this.right-r[0]),y:this.top+u+_,line:0}:p={x:this.left+u,y:Ie(i,this.top+_+u,this.bottom-n[0].height),line:0},z0(this.ctx,e.textDirection);const b=v+u;this.legendItems.forEach((j,S)=>{s.strokeStyle=j.fontColor,s.fillStyle=j.fontColor;const E=s.measureText(j.text).width,L=l.textAlign(j.textAlign||(j.textAlign=o.textAlign)),N=x+f+E;let R=p.x,F=p.y;l.setWidth(this.width),w?S>0&&R+N+u>this.right&&(F=p.y+=b,p.line++,R=p.x=Ie(i,this.left+u,this.right-r[p.line])):S>0&&F+b>this.bottom&&(R=p.x=R+n[p.line].width+u,p.line++,F=p.y=Ie(i,this.top+_+u,this.bottom-n[p.line].height));const X=l.x(R);if(y(X,F,j),R=jk(L,R+x+f,w?R+N:this.right,e.rtl),m(l.x(R),F,j),w)p.x+=N+u;else if(typeof j.text!="string"){const ie=c.lineHeight;p.y+=ey(j,ie)+u}else p.y+=b}),$0(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=ze(n.font),s=_t(n.padding);if(!n.display)return;const i=Gr(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=Ie(e.align,h,this.right-f);else{const x=this.columnSizes.reduce((g,v)=>Math.max(g,v.height),0);u=c+Ie(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const p=Ie(a,h,h+f);o.textAlign=i.textAlign(gd(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Ci(o,n.text,p,u,r)}_computeTitleHeight(){const e=this.options.title,n=ze(e.font),r=_t(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(Br(e,this.left,this.right)&&Br(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Br(e,s.left,s.left+s.width)&&Br(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!Xj(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=Kj(s,r);s&&!i&&ae(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&ae(n.onHover,[e,r,this],this)}else r&&ae(n.onClick,[e,r,this],this)}}function Yj(t,e,n,r,s){const i=Qj(r,t,e,n),o=Gj(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function Qj(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function Gj(t,e,n){let r=t;return typeof e.text!="string"&&(r=ey(e,n)),r}function ey(t,e){const n=t.text?t.text.length:0;return e*n}function Xj(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Jj={id:"legend",_element:rp,start(t,e,n){const r=t.legend=new rp({ctx:t.ctx,options:n,chart:t});gt.configure(t,r,n),gt.addBox(t,r)},stop(t){gt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;gt.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=_t(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ty extends $n{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=be(r.text)?r.text.length:1;this._padding=_t(r.padding);const i=s*ze(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Ie(a,r,i),h=n+e,c=i-r):(o.position==="left"?(u=r+e,h=Ie(a,s,n),l=$e*-.5):(u=i-e,h=Ie(a,n,s),l=$e*.5),c=s-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=ze(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);Ci(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:gd(n.align),textBaseline:"middle",translation:[o,a]})}}function Zj(t,e){const n=new ty({ctx:t.ctx,options:e,chart:t});gt.configure(t,n,e),gt.addBox(t,n),t.titleBlock=n}var e2={id:"title",_element:ty,start(t,e,n){Zj(t,n)},stop(t){const e=t.titleBlock;gt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;gt.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const $s={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=xk(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Ft(t,e){return e&&(be(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function qt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function t2(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function sp(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=ze(e.bodyFont),c=ze(e.titleFont),u=ze(e.footerFont),h=i.length,f=s.length,p=r.length,x=_t(e.padding);let g=x.height,v=0,y=r.reduce((_,b)=>_+b.before.length+b.lines.length+b.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const _=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=p*_+(y-p)*l.lineHeight+(y-1)*e.bodySpacing}f&&(g+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let m=0;const w=function(_){v=Math.max(v,n.measureText(_).width+m)};return n.save(),n.font=c.string,Z(t.title,w),n.font=l.string,Z(t.beforeBody.concat(t.afterBody),w),m=e.displayColors?o+2+e.boxPadding:0,Z(r,_=>{Z(_.before,w),Z(_.lines,w),Z(_.after,w)}),m=0,n.font=u.string,Z(t.footer,w),n.restore(),v+=x.width,{width:v,height:g}}function n2(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function r2(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function s2(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),r2(c,t,e,n)&&(c="center"),c}function ip(t,e,n){const r=n.yAlign||e.yAlign||n2(t,n);return{xAlign:n.xAlign||e.xAlign||s2(t,e,n,r),yAlign:r}}function i2(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function o2(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function op(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=Qr(o);let x=i2(e,a);const g=o2(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(u,f)+s:a==="right"&&(x+=Math.max(h,p)+s),{x:Ot(x,0,r.width-e.width),y:Ot(g,0,r.height-e.height)}}function vo(t,e,n){const r=_t(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function ap(t){return Ft([],qt(t))}function a2(t,e,n){return gs(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function lp(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const ny={beforeTitle:Ht,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Ht,beforeBody:Ht,beforeLabel:Ht,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return ne(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Ht,afterBody:Ht,beforeFooter:Ht,footer:Ht,afterFooter:Ht};function Qe(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?ny[e].call(n,r):s}class ru extends $n{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new B0(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=a2(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Qe(r,"beforeTitle",this,e),i=Qe(r,"title",this,e),o=Qe(r,"afterTitle",this,e);let a=[];return a=Ft(a,qt(s)),a=Ft(a,qt(i)),a=Ft(a,qt(o)),a}getBeforeBody(e,n){return ap(Qe(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Z(e,i=>{const o={before:[],lines:[],after:[]},a=lp(r,i);Ft(o.before,qt(Qe(a,"beforeLabel",this,i))),Ft(o.lines,Qe(a,"label",this,i)),Ft(o.after,qt(Qe(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return ap(Qe(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Qe(r,"beforeFooter",this,e),i=Qe(r,"footer",this,e),o=Qe(r,"afterFooter",this,e);let a=[];return a=Ft(a,qt(s)),a=Ft(a,qt(i)),a=Ft(a,qt(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(t2(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,f)=>e.filter(u,h,f,r))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,r))),Z(a,u=>{const h=lp(e.callbacks,u);s.push(Qe(h,"labelColor",this,u)),i.push(Qe(h,"labelPointStyle",this,u)),o.push(Qe(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=$s[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=sp(this,r),c=Object.assign({},a,l),u=ip(this.chart,r,c),h=op(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Qr(a),{x:f,y:p}=e,{width:x,height:g}=n;let v,y,m,w,_,b;return i==="center"?(_=p+g/2,s==="left"?(v=f,y=v-o,w=_+o,b=_-o):(v=f+x,y=v+o,w=_-o,b=_+o),m=v):(s==="left"?y=f+Math.max(l,u)+o:s==="right"?y=f+x-Math.max(c,h)-o:y=this.caretX,i==="top"?(w=p,_=w-o,v=y-o,m=y+o):(w=p+g,_=w+o,v=y+o,m=y-o),b=w),{x1:v,x2:y,x3:m,y1:w,y2:_,y3:b}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=Gr(r.rtl,this.x,this.width);for(e.x=vo(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=ze(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=ze(i.bodyFont),h=vo(this,"left",i),f=s.x(h),p=l<u.lineHeight?(u.lineHeight-l)/2:0,x=n.y+p;if(i.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=s.leftForLtr(f,c)+c/2,y=x+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,kf(e,g,v,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,kf(e,g,v,y)}else{e.lineWidth=G(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=s.leftForLtr(f,c),v=s.leftForLtr(s.xPlus(f,1),c-2),y=Qr(o.borderRadius);Object.values(y).some(m=>m!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,ga(e,{x:g,y:x,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),ga(e,{x:v,y:x+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(g,x,c,l),e.strokeRect(g,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(v,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,h=ze(r.bodyFont);let f=h.lineHeight,p=0;const x=Gr(r.rtl,this.x,this.width),g=function(E){n.fillText(E,x.x(e.x+p),e.y+f/2),e.y+=f+i},v=x.textAlign(o);let y,m,w,_,b,j,S;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=vo(this,v,r),n.fillStyle=r.bodyColor,Z(this.beforeBody,g),p=a&&v!=="right"?o==="center"?c/2+u:c+2+u:0,_=0,j=s.length;_<j;++_){for(y=s[_],m=this.labelTextColors[_],n.fillStyle=m,Z(y.before,g),w=y.lines,a&&w.length&&(this._drawColorBox(n,e,_,x,r),f=Math.max(h.lineHeight,l)),b=0,S=w.length;b<S;++b)g(w[b]),f=h.lineHeight;Z(y.after,g)}p=0,f=h.lineHeight,Z(this.afterBody,g),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=Gr(r.rtl,this.x,this.width);for(e.x=vo(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=ze(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:x}=Qr(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+u-x),n.quadraticCurveTo(a+c,l+u,a+c-x,l+u),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=$s[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=sp(this,e),l=Object.assign({},o,this._size),c=ip(n,e,l),u=op(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=_t(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),z0(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),$0(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!da(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!da(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=$s[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}Y(ru,"positioners",$s);var l2={id:"tooltip",_element:ru,positioners:$s,afterInit(t,e,n){n&&(t.tooltip=new ru({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ny},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const c2=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function u2(t,e,n,r){const s=t.indexOf(e);if(s===-1)return c2(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const d2=(t,e)=>t===null?null:Ot(Math.round(t),0,e);function cp(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class su extends ms{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ne(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:u2(r,e,ee(n,e),this._addedLabels),d2(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return cp.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Y(su,"id","category"),Y(su,"defaults",{ticks:{callback:cp}});function h2(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=t,p=i||1,x=u-1,{min:g,max:v}=e,y=!ne(o),m=!ne(a),w=!ne(c),_=(v-g)/(h+1);let b=pf((v-g)/x/p)*p,j,S,E,L;if(b<1e-14&&!y&&!m)return[{value:g},{value:v}];L=Math.ceil(v/b)-Math.floor(g/b),L>x&&(b=pf(L*b/x/p)*p),ne(l)||(j=Math.pow(10,l),b=Math.ceil(b*j)/j),s==="ticks"?(S=Math.floor(g/b)*b,E=Math.ceil(v/b)*b):(S=g,E=v),y&&m&&i&&pk((a-o)/i,b/1e3)?(L=Math.round(Math.min((a-o)/b,u)),b=(a-o)/L,S=o,E=a):w?(S=y?o:S,E=m?a:E,L=c-1,b=(E-S)/L):(L=(E-S)/b,Lo(L,Math.round(L),b/1e3)?L=Math.round(L):L=Math.ceil(L));const N=Math.max(gf(b),gf(S));j=Math.pow(10,ne(l)?N:l),S=Math.round(S*j)/j,E=Math.round(E*j)/j;let R=0;for(y&&(f&&S!==o?(n.push({value:o}),S<o&&R++,Lo(Math.round((S+R*b)*j)/j,o,up(o,_,t))&&R++):S<o&&R++);R<L;++R){const F=Math.round((S+R*b)*j)/j;if(m&&F>a)break;n.push({value:F})}return m&&f&&E!==a?n.length&&Lo(n[n.length-1].value,a,up(a,_,t))?n[n.length-1].value=a:n.push({value:a}):(!m||E===a)&&n.push({value:E}),n}function up(t,e,{horizontal:n,minRotation:r}){const s=lr(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class f2 extends ms{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return ne(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=Rn(s),c=Rn(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=h2(s,i);return e.bounds==="ticks"&&gk(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return P0(e,this.chart.options.locale,this.options.ticks.format)}}class iu extends f2{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=wt(e)?e:0,this.max=wt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=lr(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Y(iu,"id","linear"),Y(iu,"defaults",{ticks:{callback:N0.formatters.numeric}});const Ka={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Je=Object.keys(Ka);function dp(t,e){return t-e}function hp(t,e){if(ne(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),wt(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(pa(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function fp(t,e,n,r){const s=Je.length;for(let i=Je.indexOf(t);i<s-1;++i){const o=Ka[Je[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Je[i]}return Je[s-1]}function p2(t,e,n,r,s){for(let i=Je.length-1;i>=Je.indexOf(n);i--){const o=Je[i];if(Ka[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return Je[n?Je.indexOf(n):0]}function g2(t){for(let e=Je.indexOf(t)+1,n=Je.length;e<n;++e)if(Ka[Je[e]].common)return Je[e]}function pp(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=pd(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function m2(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function gp(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:m2(t,r,s,n)}class xa extends ms{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new LS._date(e.adapters.date);s.init(n),ei(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:hp(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=wt(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=wt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=bk(s,i,o);return this._unit=n.unit||(r.autoSkip?fp(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):p2(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:g2(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),gp(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ot(n,0,o),r=Ot(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||fp(i.minUnit,n,r,this._getLabelCapacity(n)),a=ee(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=pa(l)||l===!0,u={};let h=n,f,p;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<r;f=+e.add(f,a,o),p++)pp(u,f,x);return(f===r||s.bounds==="ticks"||p===1)&&pp(u,f,x),Object.keys(u).sort(dp).map(g=>+g)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return ae(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=r[n],p=c&&h&&f&&f.major;return this._adapter.format(e,s||(p?h:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=lr(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,gp(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(hp(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return S0(e.sort(dp))}}Y(xa,"id","time"),Y(xa,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function wo(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=Zc(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=Zc(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class mp extends xa{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=wo(n,this.min),this._tableRange=wo(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(wo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return wo(this._table,r*this._tableRange+this._minPos,!0)}}Y(mp,"id","timeseries"),Y(mp,"defaults",xa.defaults);const ry="label";function yp(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function y2(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function sy(t,e){t.labels=e}function iy(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ry;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function x2(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ry;const n={labels:[],datasets:[]};return sy(n,t.labels),iy(n,t.datasets,e),n}function v2(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...f}=t,p=k.useRef(null),x=k.useRef(null),g=()=>{p.current&&(x.current=new qa(p.current,{type:o,data:x2(a,i),options:l&&{...l},plugins:c}),yp(e,x.current))},v=()=>{yp(e,null),x.current&&(x.current.destroy(),x.current=null)};return k.useEffect(()=>{!s&&x.current&&l&&y2(x.current,l)},[s,l]),k.useEffect(()=>{!s&&x.current&&sy(x.current.config.data,a.labels)},[s,a.labels]),k.useEffect(()=>{!s&&x.current&&a.datasets&&iy(x.current.config.data,a.datasets,i)},[s,a.datasets]),k.useEffect(()=>{x.current&&(s?(v(),setTimeout(g)):x.current.update(h))},[s,l,a.labels,a.datasets,h]),k.useEffect(()=>{x.current&&(v(),setTimeout(g))},[o]),k.useEffect(()=>(g(),()=>v()),[]),Sn.createElement("canvas",{ref:p,role:"img",height:n,width:r,...f},u)}const w2=k.forwardRef(v2);function _2(t,e){return qa.register(e),k.forwardRef((n,r)=>Sn.createElement(w2,{...n,ref:r,type:t}))}const b2=_2("bar",Ao);qa.register(su,iu,Io,e2,l2,Jj);function k2(){const{currentUser:t}=bt(),[e,n]=k.useState([]),[r,s]=k.useState(!0),[i,o]=k.useState(null);if(k.useEffect(()=>{(async()=>{if(t)try{let h=W.from("tasks").select("*");t.role!=="admin"&&(h=h.eq("assigned_user_auth_id",t.id));const{data:f,error:p}=await h;if(p)throw new Error("Error al obtener tareas");n(f||[])}catch(h){o(h instanceof Error?h.message:"Error fetching tasks")}finally{s(!1)}})()},[t]),!t)return d.jsx("p",{className:"p-8 text-center",children:"Please log in."});if(r)return d.jsx("div",{className:"p-8 text-center",children:"Loading dashboard data..."});if(i)return d.jsxs("div",{className:"p-8 text-center text-red-600",children:["Error: ",i]});const a=()=>{const u={Pendiente:0,OK:0};return e.forEach(h=>{h.status&&(u[h.status]=(u[h.status]||0)+1)}),{labels:Object.keys(u),datasets:[{label:"Number of Tasks",data:Object.values(u),backgroundColor:["rgba(255, 159, 64, 0.7)","rgba(75, 192, 192, 0.7)"],borderColor:["rgb(255, 159, 64)","rgb(75, 192, 192)"],borderWidth:1}]}},l=()=>{const u={};e.forEach(p=>{!p.stores||!p.status||p.stores.forEach(x=>{u[x]||(u[x]={Pendiente:0,OK:0}),u[x][p.status]=(u[x][p.status]||0)+1})});const h=Object.keys(u);return{labels:h,datasets:["Pendiente","OK"].map((p,x)=>({label:p,data:h.map(g=>u[g][p]),backgroundColor:["rgba(255, 159, 64, 0.7)","rgba(75, 192, 192, 0.7)"][x],borderColor:["rgb(255, 159, 64)","rgb(75, 192, 192)"][x],borderWidth:1}))}},c={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:t.role==="admin"?"Tasks by Store and Status":"Your Tasks by Status"}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}};return d.jsxs("div",{className:"p-8",children:[d.jsxs("div",{className:"mb-8 text-center",children:[d.jsxs("h1",{className:"text-2xl font-bold mb-4",children:["Welcome, ",t.name]}),d.jsxs("p",{className:"text-gray-600",children:["Store: ",t.store]}),d.jsxs("p",{className:"text-gray-500 text-sm",children:["Role: ",t.role]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-8",children:d.jsx("div",{className:"w-full h-[400px]",children:d.jsx(b2,{options:c,data:t.role==="admin"?l():a()})})}),d.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Total Tasks"}),d.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:e.length})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Tareas Pendientes"}),d.jsx("p",{className:"text-3xl font-bold text-orange-500",children:e.filter(u=>u.status==="Pendiente").length})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Tareas OK"}),d.jsx("p",{className:"text-3xl font-bold text-teal-500",children:e.filter(u=>u.status==="OK").length})]})]})]})}function S2(){const[t,e]=k.useState(""),[n,r]=k.useState(""),[s,i]=k.useState(""),{login:o,isLoading:a,currentUser:l}=bt(),c=qn();k.useEffect(()=>{l&&c("/")},[l,c]);const u=async h=>{if(h.preventDefault(),i(""),!t||!n){i("Por favor, completa todos los campos.");return}try{await o(t,n)}catch(f){f instanceof Error&&(f.message.includes("Invalid login credentials")?i("Email o contraseña incorrectos."):i("Error al iniciar sesión. Por favor intenta nuevamente."))}};return d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:d.jsxs("div",{className:"p-8 bg-white shadow-xl rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx(S1,{className:"mx-auto text-indigo-600 h-16 w-16"}),d.jsx("h1",{className:"text-2xl font-bold text-gray-800 mt-4",children:"Iniciar Sesión"}),d.jsx("p",{className:"text-gray-600",children:"Gestor de Tareas Wild Lama"})]}),d.jsxs("form",{onSubmit:u,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),d.jsx("input",{type:"email",id:"email",value:t,onChange:h=>e(h.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),d.jsx("input",{type:"password",id:"password",value:n,onChange:h=>r(h.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0})]}),s&&d.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded",children:d.jsx("p",{className:"text-red-700 text-sm",children:s})}),d.jsx("button",{type:"submit",disabled:a,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-300",children:a?"Iniciando sesión...":"Iniciar Sesión"})]})]})})}function j2(){const[t,e]=k.useState(""),[n,r]=k.useState(""),[s,i]=k.useState(""),[o,a]=k.useState(""),[l,c]=k.useState(!1),u=qn(),{register:h}=bt(),f=async p=>{p.preventDefault(),a(""),c(!0);try{await h(t,n,s)?u("/login"):a("No se pudo registrar el usuario.")}catch(x){const g=x instanceof Error?x.message:"Error al registrar.";a(g)}finally{c(!1)}};return d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:d.jsxs("div",{className:"p-8 bg-white shadow-xl rounded-lg w-full max-w-md",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Registro"}),d.jsxs("form",{onSubmit:f,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre"}),d.jsx("input",{type:"text",id:"name",value:t,onChange:p=>e(p.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),d.jsx("input",{type:"email",id:"email",value:n,onChange:p=>r(p.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),d.jsx("input",{type:"password",id:"password",value:s,onChange:p=>i(p.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),o&&d.jsx("p",{className:"text-red-500 text-sm text-center",children:o}),d.jsx("button",{type:"submit",disabled:l,className:"w-full py-2 px-4 bg-indigo-600 text-white rounded-md font-medium hover:bg-indigo-700 disabled:bg-indigo-300",children:l?"Registrando...":"Registrarse"})]}),d.jsx("div",{className:"mt-4 text-center",children:d.jsx("button",{onClick:()=>u("/login"),className:"text-indigo-600 hover:underline text-sm",children:"¿Ya tienes cuenta? Inicia sesión"})})]})})}function Be(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Bn(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const oy=6048e5,E2=864e5;let C2={};function Ya(){return C2}function Ti(t,e){var a,l,c,u;const n=Ya(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=Be(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function va(t){return Ti(t,{weekStartsOn:1})}function ay(t){const e=Be(t),n=e.getFullYear(),r=Bn(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=va(r),i=Bn(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=va(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function wa(t){const e=Be(t);return e.setHours(0,0,0,0),e}function xp(t){const e=Be(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function P2(t,e){const n=wa(t),r=wa(e),s=+n-xp(n),i=+r-xp(r);return Math.round((s-i)/E2)}function T2(t){const e=ay(t),n=Bn(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),va(n)}function N2(t){return Bn(t,Date.now())}function ly(t,e){const n=wa(t),r=wa(e);return+n==+r}function O2(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function M2(t){if(!O2(t)&&typeof t!="number")return!1;const e=Be(t);return!isNaN(Number(e))}function L2(t){const e=Be(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function A2(t,e){const n=Be(t.start),r=Be(t.end);let s=+n>+r;const i=s?+n:+r,o=s?r:n;o.setHours(0,0,0,0);let a=1;const l=[];for(;+o<=i;)l.push(Be(o)),o.setDate(o.getDate()+a),o.setHours(0,0,0,0);return s?l.reverse():l}function D2(t){const e=Be(t);return e.setDate(1),e.setHours(0,0,0,0),e}function R2(t){const e=Be(t),n=Bn(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const I2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},F2=(t,e,n)=>{let r;const s=I2[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Wl(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const z2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},B2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},U2={date:Wl({formats:z2,defaultWidth:"full"}),time:Wl({formats:$2,defaultWidth:"full"}),dateTime:Wl({formats:B2,defaultWidth:"full"})},W2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},H2=(t,e,n,r)=>W2[t];function Os(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const V2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},q2={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},K2={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Y2={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Q2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},G2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},X2=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},J2={ordinalNumber:X2,era:Os({values:V2,defaultWidth:"wide"}),quarter:Os({values:q2,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Os({values:K2,defaultWidth:"wide"}),day:Os({values:Y2,defaultWidth:"wide"}),dayPeriod:Os({values:Q2,defaultWidth:"wide",formattingValues:G2,defaultFormattingWidth:"wide"})};function Ms(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?eE(a,h=>h.test(o)):Z2(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function Z2(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function eE(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function tE(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const nE=/^(\d+)(th|st|nd|rd)?/i,rE=/\d+/i,sE={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},iE={any:[/^b/i,/^(a|c)/i]},oE={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},aE={any:[/1/i,/2/i,/3/i,/4/i]},lE={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cE={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uE={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dE={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},hE={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fE={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pE={ordinalNumber:tE({matchPattern:nE,parsePattern:rE,valueCallback:t=>parseInt(t,10)}),era:Ms({matchPatterns:sE,defaultMatchWidth:"wide",parsePatterns:iE,defaultParseWidth:"any"}),quarter:Ms({matchPatterns:oE,defaultMatchWidth:"wide",parsePatterns:aE,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ms({matchPatterns:lE,defaultMatchWidth:"wide",parsePatterns:cE,defaultParseWidth:"any"}),day:Ms({matchPatterns:uE,defaultMatchWidth:"wide",parsePatterns:dE,defaultParseWidth:"any"}),dayPeriod:Ms({matchPatterns:hE,defaultMatchWidth:"any",parsePatterns:fE,defaultParseWidth:"any"})},gE={code:"en-US",formatDistance:F2,formatLong:U2,formatRelative:H2,localize:J2,match:pE,options:{weekStartsOn:0,firstWeekContainsDate:1}};function mE(t){const e=Be(t);return P2(e,R2(e))+1}function yE(t){const e=Be(t),n=+va(e)-+T2(e);return Math.round(n/oy)+1}function cy(t,e){var u,h,f,p;const n=Be(t),r=n.getFullYear(),s=Ya(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(f=s.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=Bn(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=Ti(o,e),l=Bn(t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=Ti(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function xE(t,e){var a,l,c,u;const n=Ya(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=cy(t,e),i=Bn(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Ti(i,e)}function vE(t,e){const n=Be(t),r=+Ti(n,e)-+xE(n,e);return Math.round(r/oy)+1}function J(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ln={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return J(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):J(n+1,2)},d(t,e){return J(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return J(t.getHours()%12||12,e.length)},H(t,e){return J(t.getHours(),e.length)},m(t,e){return J(t.getMinutes(),e.length)},s(t,e){return J(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return J(s,e.length)}},Cr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},vp={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return ln.y(t,e)},Y:function(t,e,n,r){const s=cy(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return J(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):J(i,e.length)},R:function(t,e){const n=ay(t);return J(n,e.length)},u:function(t,e){const n=t.getFullYear();return J(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return J(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return J(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ln.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return J(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=vE(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):J(s,e.length)},I:function(t,e,n){const r=yE(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):J(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ln.d(t,e)},D:function(t,e,n){const r=mE(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):J(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return J(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return J(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return J(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Cr.noon:r===0?s=Cr.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Cr.evening:r>=12?s=Cr.afternoon:r>=4?s=Cr.morning:s=Cr.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ln.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ln.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):J(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):J(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ln.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ln.s(t,e)},S:function(t,e){return ln.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return _p(r);case"XXXX":case"XX":return rr(r);case"XXXXX":case"XXX":default:return rr(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return _p(r);case"xxxx":case"xx":return rr(r);case"xxxxx":case"xxx":default:return rr(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+wp(r,":");case"OOOO":default:return"GMT"+rr(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+wp(r,":");case"zzzz":default:return"GMT"+rr(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return J(r,e.length)},T:function(t,e,n){const r=t.getTime();return J(r,e.length)}};function wp(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+J(i,2)}function _p(t,e){return t%60===0?(t>0?"-":"+")+J(Math.abs(t)/60,2):rr(t,e)}function rr(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=J(Math.trunc(r/60),2),i=J(r%60,2);return n+s+e+i}const bp=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},uy=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},wE=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return bp(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",bp(r,e)).replace("{{time}}",uy(s,e))},_E={p:uy,P:wE},bE=/^D+$/,kE=/^Y+$/,SE=["D","DD","YY","YYYY"];function jE(t){return bE.test(t)}function EE(t){return kE.test(t)}function CE(t,e,n){const r=PE(t,e,n);if(console.warn(r),SE.includes(t))throw new RangeError(r)}function PE(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const TE=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,NE=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,OE=/^'([^]*?)'?$/,ME=/''/g,LE=/[a-zA-Z]/;function kp(t,e,n){var u,h,f,p;const r=Ya(),s=r.locale??gE,i=r.firstWeekContainsDate??((h=(u=r.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((p=(f=r.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,a=Be(t);if(!M2(a))throw new RangeError("Invalid time value");let l=e.match(NE).map(x=>{const g=x[0];if(g==="p"||g==="P"){const v=_E[g];return v(x,s.formatLong)}return x}).join("").match(TE).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const g=x[0];if(g==="'")return{isToken:!1,value:AE(x)};if(vp[g])return{isToken:!0,value:x};if(g.match(LE))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(x=>{if(!x.isToken)return x.value;const g=x.value;(EE(g)||jE(g))&&CE(g,e,String(t));const v=vp[g[0]];return v(a,g,s.localize,c)}).join("")}function AE(t){const e=t.match(OE);return e?e[1].replace(ME,"'"):t}function DE(t){return ly(t,N2(t))}const dy=({taskId:t,onClose:e,onStatusChange:n})=>{var b,j,S,E,L,N,R,F,X,ie,K;const{currentUser:r}=bt(),[s,i]=k.useState(null),[o,a]=k.useState(!0),[l,c]=k.useState(null),[u,h]=k.useState(null),[f,p]=k.useState(null),[x,g]=k.useState(!1),[v,y]=k.useState([]);k.useEffect(()=>{(async()=>{if(!t){c("ID de tarea no proporcionado."),a(!1);return}a(!0),c(null);try{const{data:I,error:C}=await W.from("tasks").select("*").eq("id",t).single();if(C||!I)throw new Error("Tarea no encontrada.");const P={...I,stores:Array.isArray(I.stores)?I.stores:typeof I.stores=="string"&&I.stores.length>0?I.stores.split(",").map($=>$.trim()):typeof I.store=="string"&&I.store.length>0?I.store.split(",").map($=>$.trim()):[],due_date:I.due_date||"",priority:I.priority,status:I.status,taskType:I.task_type||I.taskType||"",assigned_user_auth_id:I.assigned_user_auth_id||I.assignedUserAuthId||"",evidenceImageUrl:I.evidence_image_url||I.evidenceImageUrl||"",isRecurring:I.is_recurring??I.isRecurring,recurrencePattern:I.recurrence_pattern??I.recurrencePattern};i(P);const{data:O}=await W.from("task_evidence").select("*").eq("task_id",I.id).order("created_at",{ascending:!0});let D=Array.isArray(O)?O:[];if(P.evidenceImageUrl&&(D=[...D,{id:`legacy-${I.id}`,task_id:I.id,url:P.evidenceImageUrl,uploaded_by_auth_id:P.assigned_user_auth_id||"",created_at:P.due_date||""}]),y(D),P.assigned_user_auth_id){const{data:$,error:me}=await W.from("users").select("*").eq("auth_id",P.assigned_user_auth_id).single();h(me||!$?{id:-1,auth_id:P.assigned_user_auth_id,name:`Auth ID: ${P.assigned_user_auth_id}`,email:"",store:"",role:""}:$)}}catch(I){c(I instanceof Error?I.message:"Error desconocido al cargar la tarea")}finally{a(!1)}})()},[t]);const m=B=>{B.target.files&&B.target.files[0]&&p(B.target.files[0])},w=async()=>{if(!(!s||!f)){g(!0);try{const B=f.name.split(".").pop(),I=`task-${s.id}-${Date.now()}.${B}`,{error:C}=await W.storage.from("evidence").upload(I,f);if(C)throw C;const{data:P}=W.storage.from("evidence").getPublicUrl(I),O=P.publicUrl,{data:D,error:$}=await W.from("task_evidence").insert({task_id:s.id,url:O,uploaded_by_auth_id:(r==null?void 0:r.id)??null}).select().single();if($)throw $;const{error:me}=await W.from("tasks").update({status:"OK"}).eq("id",s.id);if(me)throw me;i({...s,status:"OK"}),y([...v,D]),p(null)}catch(B){c(B instanceof Error?B.message:"No se pudo subir la evidencia")}finally{g(!1)}}};if(o)return d.jsx("div",{className:"p-8 text-center text-gray-700",children:"Cargando detalle de tarea..."});if(l)return d.jsxs("div",{className:"p-8 text-center text-red-600 bg-red-50 p-4 rounded-md",children:["Error: ",l]});if(!s)return d.jsx("div",{className:"p-8 text-center text-gray-700",children:"Tarea no encontrada."});const _=(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="supervisor"||(r==null?void 0:r.role)==="employee"||(r==null?void 0:r.id)===s.assigned_user_auth_id;return d.jsxs("div",{className:"rounded-xl p-6 md:p-8 max-w-2xl mx-auto relative",children:[e&&d.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl font-bold z-10","aria-label":"Cerrar",children:"×"}),d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start mb-6 pb-6 border-b border-gray-200",children:[d.jsxs("div",{className:"flex items-center w-full",children:[d.jsx("button",{"data-status":!0,onClick:async B=>{var C;if(B.stopPropagation(),!s)return;const I=((C=s.status)==null?void 0:C.toLowerCase().replace(" ",""))==="ok"?"Pendiente":"OK";try{const{error:P}=await W.from("tasks").update({status:I}).eq("id",s.id);if(P)throw new Error("Error al actualizar estado de la tarea");i({...s,status:I}),n&&n(I)}catch(P){c(P instanceof Error?P.message:"No se pudo actualizar el estado")}},className:`transition-colors rounded-full p-1 focus:outline-none mr-3 ${((b=s.status)==null?void 0:b.toLowerCase().replace(" ",""))==="ok"?"text-teal-600":"text-gray-400 hover:text-indigo-500"}`,title:((j=s.status)==null?void 0:j.toLowerCase().replace(" ",""))==="ok"?"Marcar como Pendiente":"Marcar como OK","aria-label":((S=s.status)==null?void 0:S.toLowerCase().replace(" ",""))==="ok"?"Marcar como Pendiente":"Marcar como OK",children:((E=s.status)==null?void 0:E.toLowerCase().replace(" ",""))==="ok"?d.jsx(Qc,{size:28,fill:"none",strokeWidth:2}):d.jsx(Gc,{size:28,strokeWidth:2})}),d.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2 md:mb-0",children:s.name})]}),d.jsxs("div",{className:"flex space-x-2 mt-2 md:mt-0",children:[d.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${((L=s.priority)==null?void 0:L.toLowerCase())==="urgente"||((N=s.priority)==null?void 0:N.toLowerCase())==="high"?"bg-red-100 text-red-700":((R=s.priority)==null?void 0:R.toLowerCase())==="rutinaria"||((F=s.priority)==null?void 0:F.toLowerCase())==="medium"?"bg-yellow-100 text-yellow-700":((X=s.priority)==null?void 0:X.toLowerCase())==="low"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.priority||"N/A"}),d.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full border ${((ie=s.status)==null?void 0:ie.toLowerCase().replace(" ",""))==="pendiente"?"bg-orange-50 text-orange-700 border-orange-200":((K=s.status)==null?void 0:K.toLowerCase().replace(" ",""))==="ok"?"bg-teal-50 text-teal-700 border-teal-200":"bg-gray-100 text-gray-700 border-gray-200"}`,children:s.status||"N/A"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 mb-6 text-sm",children:[d.jsxs("div",{children:[d.jsx("strong",{className:"text-gray-500",children:"Tipo de Tarea:"})," ",d.jsx("span",{className:"text-gray-800",children:s.task_type||"No especificado"})]}),d.jsxs("div",{children:[d.jsx("strong",{className:"text-gray-500",children:"Tiendas:"})," ",d.jsx("span",{className:"text-gray-800",children:Array.isArray(s.stores)&&s.stores.length>0?s.stores.join(", "):"N/A"})]}),d.jsxs("div",{children:[d.jsx("strong",{className:"text-gray-500",children:"Asignada a:"})," ",d.jsx("span",{className:"text-gray-800",children:(u==null?void 0:u.name)||(s.assigned_user_auth_id?`Auth ID: ${s.assigned_user_auth_id}`:"Nadie")})]}),d.jsxs("div",{children:[d.jsx("strong",{className:"text-gray-500",children:"Fecha Límite:"})," ",d.jsx("span",{className:"text-gray-800",children:s.due_date||"No definida"})]})]}),s.description&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-1",children:"Descripción:"}),d.jsx("p",{className:"text-gray-600 leading-relaxed whitespace-pre-wrap",children:s.description})]}),v.length>0&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-2",children:"Evidencias:"}),d.jsx(RE,{images:v.map(B=>({url:B.url,id:String(B.id)}))})]}),_&&d.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 space-y-6",children:d.jsxs("div",{children:[d.jsx("label",{htmlFor:"evidence-upload",className:"block text-sm font-medium text-gray-700 mb-1",children:"Subir/Actualizar Evidencia:"}),d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-3 space-y-2 md:space-y-0",children:[d.jsx("input",{id:"evidence-upload",name:"evidence-upload",type:"file",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",onChange:m,accept:"image/*"}),d.jsxs("button",{type:"button",onClick:w,disabled:!f||x,className:"px-5 py-3 bg-teal-600 text-white rounded-md hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:bg-gray-300 flex items-center text-sm",children:[d.jsx(L1,{size:18,className:"mr-2"}),x?"Subiendo...":"Subir Evidencia"]})]})]})})]})},RE=({images:t})=>{const[e,n]=k.useState(0),[r,s]=k.useState(!1);if(t.length===0)return null;const i=()=>n(a=>a===0?t.length-1:a-1),o=()=>n(a=>a===t.length-1?0:a+1);return d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsxs("div",{className:"relative w-full flex justify-center items-center",children:[d.jsx("button",{onClick:i,className:"absolute left-0 z-10 bg-white bg-opacity-70 rounded-full p-2 shadow hover:bg-opacity-100 transition","aria-label":"Anterior",children:d.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),d.jsx("img",{src:t[e].url,alt:`Evidencia ${e+1}`,className:"max-w-xs md:max-w-md rounded-lg shadow-md border mx-8 cursor-pointer",onClick:()=>s(!0)}),d.jsx("button",{onClick:o,className:"absolute right-0 z-10 bg-white bg-opacity-70 rounded-full p-2 shadow hover:bg-opacity-100 transition","aria-label":"Siguiente",children:d.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]}),d.jsx("div",{className:"mt-2 flex space-x-2",children:t.map((a,l)=>d.jsx("button",{onClick:()=>n(l),className:`w-3 h-3 rounded-full ${l===e?"bg-indigo-600":"bg-gray-300"}`,"aria-label":`Ir a la imagen ${l+1}`},a.id))}),d.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[e+1," / ",t.length]}),r&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70",onClick:()=>s(!1),children:d.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg flex items-center justify-center",style:{maxWidth:"60vw",maxHeight:"60vh",width:"auto",height:"auto"},onClick:a=>a.stopPropagation(),children:[d.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 text-2xl font-bold z-10",onClick:()=>s(!1),"aria-label":"Cerrar",children:"×"}),d.jsx("img",{src:t[e].url,alt:`Evidencia ampliada ${e+1}`,className:"object-contain rounded max-w-full max-h-[60vh]",style:{display:"block",margin:"0 auto"}})]})})]})};function IE(){const{currentUser:t}=bt(),[e,n]=k.useState([]),[r,s]=k.useState(!0),[i,o]=k.useState(null),[a,l]=k.useState("table"),[c,u]=k.useState("all"),[h,f]=k.useState("all"),[p,x]=k.useState("all"),[g,v]=k.useState((t==null?void 0:t.role)==="supervisor"?t.store:"all"),[y,m]=k.useState(!1),[w,_]=k.useState(null),[b,j]=k.useState(!0),[S,E]=k.useState(!1),[L,N]=k.useState(!1),[R,F]=k.useState(null),X=qn(),ie=new Date,K=D2(ie),B=L2(ie),I=A2({start:K,end:B});if(k.useEffect(()=>{(async()=>{if(t){s(!0),o(null);try{let U=W.from("tasks").select("*");t.role==="employee"?U=U.eq("assigned_user_auth_id",t.id):t.role==="supervisor"?U=U.contains("stores",[t.store]):t.role==="admin"&&g!=="all"&&(U=U.contains("stores",[g]));const{data:fe,error:z}=await U;if(z)throw new Error("Error al cargar tareas");const We=(fe||[]).map(Te=>({...Te,assigned_user_name:Te.assigned_user_name||null,stores:Array.isArray(Te.stores)?Te.stores:typeof Te.stores=="string"&&Te.stores.length>0?Te.stores.split(",").map(Xa=>Xa.trim()):typeof Te.store=="string"&&Te.store.length>0?Te.store.split(",").map(Xa=>Xa.trim()):[]}));n(We)}catch(U){o(U instanceof Error?U.message:"Error desconocido al cargar tareas")}finally{s(!1)}}})()},[t,g]),r)return d.jsx("div",{className:"p-8 text-center",children:"Cargando tareas..."});if(i)return d.jsxs("div",{className:"p-8 text-center text-red-500",children:["Error: ",i]});const C=M=>{switch(M==null?void 0:M.toLowerCase()){case"urgente":case"high":return"bg-red-100 text-red-700";case"rutinaria":case"medium":return"bg-yellow-100 text-yellow-700";case"low":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},P=M=>{switch(M==null?void 0:M.toLowerCase().replace(" ","")){case"pendiente":case"pending":return"bg-yellow-50 text-yellow-700 border border-yellow-200";case"ok":return"bg-green-50 text-green-700 border border-green-200";case"inprogress":return"bg-blue-100 text-blue-700";case"completed":return"bg-teal-100 text-teal-700";default:return"bg-gray-100 text-gray-700"}};let O="Mis tareas";(t==null?void 0:t.role)==="admin"?O="Todas las tareas (Vista Administrador)":((t==null?void 0:t.role)==="supervisor"||(t==null?void 0:t.role)==="employee")&&(O="Tareas tienda");const D=e.filter(M=>{var We,Te;const U=c==="all"||((We=M.status)==null?void 0:We.toLowerCase().replace(" ",""))===c.toLowerCase().replace(" ",""),fe=h==="all"||((Te=M.priority)==null?void 0:Te.toLowerCase())===h.toLowerCase(),z=p==="all"||M.assigned_user_auth_id===p;return U&&fe&&z}),$=()=>{const M=D.filter(z=>["pendiente","pending"].includes(St(z.status))),U=D.filter(z=>["ok"].includes(St(z.status))),fe=(z,We)=>d.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-5 hover:shadow-xl transition-shadow cursor-pointer flex flex-col",onClick:Te=>{Te.target.closest("button[data-status]")||Ed(z.id)},children:[d.jsxs("div",{className:"flex items-start mb-2",children:[d.jsx("button",{"data-status":!0,onClick:Te=>{Te.stopPropagation(),Cd(z)},className:`transition-colors rounded-full p-1 focus:outline-none mt-1 mr-3 ${We?"text-teal-600":"text-gray-400 hover:text-indigo-500"}`,title:We?"Marcar como Pendiente":"Marcar como OK","aria-label":We?"Marcar como Pendiente":"Marcar como OK",children:We?d.jsx(Qc,{size:22,fill:"none",strokeWidth:2}):d.jsx(Gc,{size:22,strokeWidth:2})}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:z.name}),d.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${C(z.priority)}`,children:z.priority||"N/A"})]}),d.jsx("p",{className:"text-sm text-gray-600 mb-1 line-clamp-2 h-10",children:z.description||"Sin descripción."})]})]}),d.jsxs("div",{className:"text-xs text-gray-500 my-3",children:[z.stores&&z.stores.length>0&&d.jsxs("span",{className:"block",children:["Tiendas: ",z.stores.join(", ")]}),d.jsxs("span",{className:"block",children:["Vence: ",z.due_date||"N/A"]}),d.jsxs("span",{className:"block font-medium",children:["Asignada a: ",z.assigned_user_name??"N/A"]})]}),d.jsx("div",{className:"flex justify-start items-center mt-auto",children:d.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${P(z.status)}`,children:z.status||"N/A"})})]},z.id);return d.jsxs("div",{children:[d.jsxs("div",{className:"mb-4 border rounded-lg bg-white shadow",children:[d.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-3 text-lg font-semibold text-gray-800 hover:bg-gray-50 focus:outline-none",onClick:()=>j(z=>!z),children:[d.jsxs("span",{children:["🕒 Pendiente (",M.length,")"]}),d.jsx("span",{className:`transform transition-transform ${b?"":"-rotate-90"}`,children:"▼"})]}),b&&d.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.length>0?M.map(z=>fe(z,!1)):d.jsx("div",{className:"p-4 text-gray-500 col-span-full",children:"No hay tareas pendientes."})})]}),d.jsxs("div",{className:"mb-4 border rounded-lg bg-white shadow",children:[d.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-3 text-lg font-semibold text-gray-800 hover:bg-gray-50 focus:outline-none",onClick:()=>E(z=>!z),children:[d.jsxs("span",{children:["✔️ OK (",U.length,")"]}),d.jsx("span",{className:`transform transition-transform ${S?"":"-rotate-90"}`,children:"▼"})]}),S&&d.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.length>0?U.map(z=>fe(z,!0)):d.jsx("div",{className:"p-4 text-gray-500 col-span-full",children:"No hay tareas OK."})})]})]})},me=()=>d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[d.jsx("div",{className:"text-xl font-semibold text-center mb-6",children:kp(ie,"MMMM yyyy")}),d.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"].map(M=>d.jsx("div",{className:"text-center font-medium text-gray-500 text-sm",children:M},M))}),d.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:K.getDay()}).map((M,U)=>d.jsx("div",{className:"h-32 bg-gray-50 rounded-lg"},`empty-${U}`)),I.map((M,U)=>{const fe=D.filter(z=>z.due_date&&ly(new Date(z.due_date),M));return d.jsxs("div",{className:`h-32 p-1 border rounded-lg ${DE(M)?"border-indigo-500":"border-gray-200"}`,children:[d.jsx("div",{className:"text-right text-sm font-medium mb-1",children:kp(M,"d")}),d.jsx("div",{className:"overflow-y-auto max-h-24",children:fe.map(z=>d.jsx("div",{onClick:()=>X(`/tasks/${z.id}`),className:`text-xs p-1 mb-1 rounded cursor-pointer ${P(z.status)} truncate`,title:`${z.name} - ${z.assigned_user_name??""}`,children:z.name},z.id))})]},U)})]})]}),Ce=M=>{_(M),m(!0)},kt=async()=>{if(w){s(!0),o(null);try{const{error:M}=await W.from("tasks").delete().eq("id",w.id);if(M)throw new Error("Error al eliminar la tarea");n(U=>U.filter(fe=>fe.id!==w.id)),m(!1),_(null)}catch(M){o(M instanceof Error?M.message:"Error desconocido al eliminar la tarea")}finally{s(!1)}}},Pe=()=>{m(!1),_(null)},St=M=>(M??"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[^a-z]/g,""),Qa=D.filter(M=>["pendiente","pending"].includes(St(M.status))),Ga=D.filter(M=>["ok"].includes(St(M.status))),Ae={info:"",tarea:"w-1/4",tienda:"w-1/6",asignado:"w-1/6",vence:"w-1/12",prioridad:"w-1/12",estado:"w-1/12",acciones:"w-12"},Sd=(t==null?void 0:t.role)==="admin",jd=M=>d.jsxs("table",{className:"w-full table-auto divide-y divide-gray-200 text-sm sm:text-base",children:[d.jsx("thead",{className:"bg-gray-100",children:d.jsxs("tr",{children:[d.jsx("th",{className:Ae.info}),d.jsx("th",{className:Ae.tarea+" px-2 py-3 sm:px-6 sm:py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap",children:"Tarea"}),Sd&&d.jsx("th",{className:Ae.tienda+" px-2 py-3 sm:px-6 sm:py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap",children:"Tienda"}),d.jsx("th",{className:Ae.asignado+" px-2 py-3 sm:px-6 sm:py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap",children:"Asignado A"}),d.jsx("th",{className:Ae.vence+" px-2 py-3 sm:px-6 sm:py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap",children:"Vence"}),d.jsx("th",{className:Ae.prioridad+" px-2 py-3 sm:px-6 sm:py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap",children:"Prioridad"}),d.jsx("th",{className:Ae.estado+" px-2 py-3 sm:px-6 sm:py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap",children:"Estado"}),d.jsx("th",{className:Ae.acciones+" px-2 py-3 sm:px-6 sm:py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(U=>{var z;const fe=St(U.status)==="ok";return d.jsxs("tr",{className:"hover:bg-indigo-50 transition-colors duration-150 cursor-pointer active:bg-indigo-100",style:{WebkitTapHighlightColor:"transparent"},onClick:We=>{We.target.closest("button[data-delete],button[data-status]")||Ed(U.id)},children:[d.jsx("td",{className:Ae.info+" px-2 py-3 sm:px-3 sm:py-4 whitespace-nowrap align-middle text-center",children:d.jsx("button",{"data-status":!0,onClick:We=>{We.stopPropagation(),Cd(U)},className:`transition-colors rounded-full p-1 focus:outline-none ${fe?"text-teal-600":"text-gray-400 hover:text-indigo-500"}`,title:fe?"Marcar como Pendiente":"Marcar como OK","aria-label":fe?"Marcar como Pendiente":"Marcar como OK",children:fe?d.jsx(Qc,{size:22,fill:"none",strokeWidth:2}):d.jsx(Gc,{size:22,strokeWidth:2})})}),d.jsxs("td",{className:Ae.tarea+" px-2 py-3 sm:px-6 sm:py-4 whitespace-nowrap align-middle truncate max-w-xs",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:U.name}),d.jsx("div",{className:"text-xs text-gray-500 line-clamp-1 truncate",children:U.description||"Sin descripción"})]}),Sd&&d.jsx("td",{className:Ae.tienda+" px-2 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-700 align-middle truncate max-w-xs",children:d.jsx("span",{className:"truncate",children:((z=U.stores)==null?void 0:z.join(", "))||d.jsx("span",{className:"text-gray-300",children:"-"})})}),d.jsx("td",{className:Ae.asignado+" px-2 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-700 align-middle",children:U.assigned_user_name??"N/A"}),d.jsx("td",{className:Ae.vence+" px-2 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-700 align-middle",children:U.due_date??"N/A"}),d.jsx("td",{className:Ae.prioridad+" px-2 py-3 sm:px-6 sm:py-4 whitespace-nowrap align-middle",children:d.jsx("span",{className:`px-2 py-1 text-xs leading-5 font-semibold rounded-full ${C(U.priority)}`,children:U.priority||"N/A"})}),d.jsx("td",{className:Ae.estado+" px-2 py-3 sm:px-6 sm:py-4 whitespace-nowrap align-middle",children:d.jsx("span",{className:`px-2 py-1 text-xs leading-5 font-semibold rounded-full ${P(U.status)}`,children:U.status||"N/A"})}),d.jsx("td",{className:Ae.acciones+" px-2 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm font-medium align-middle flex gap-2 items-center",children:(t==null?void 0:t.role)==="admin"&&d.jsx("button",{"data-delete":!0,onClick:We=>{We.stopPropagation(),Ce(U)},className:"text-red-600 hover:text-red-800 focus:outline-none",title:"Eliminar Tarea",children:d.jsx(cd,{size:20})})})]},U.id)})})]}),py=()=>d.jsxs("div",{className:"w-full overflow-x-auto",children:[y&&w&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:d.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-2xl max-w-sm w-full relative",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Eliminar tarea"}),d.jsxs("p",{className:"mb-6 text-gray-700",children:["¿Estás seguro de que deseas eliminar la tarea ",d.jsx("span",{className:"font-semibold",children:w.name}),"? Esta acción no se puede deshacer."]}),d.jsxs("div",{className:"flex justify-center gap-3",children:[d.jsx("button",{onClick:Pe,className:"px-4 py-2 rounded bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Cancelar"}),d.jsx("button",{onClick:kt,className:"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700",children:"Eliminar"})]})]})}),d.jsxs("div",{className:"mb-4 border rounded-lg bg-white shadow",children:[d.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-3 text-lg font-semibold text-gray-800 hover:bg-gray-50 focus:outline-none",onClick:()=>j(M=>!M),children:[d.jsxs("span",{children:["🕒 Pendiente (",Qa.length,")"]}),d.jsx("span",{className:`transform transition-transform ${b?"":"-rotate-90"}`,children:"▼"})]}),b&&d.jsx("div",{className:"p-2 pt-0",children:Qa.length>0?jd(Qa):d.jsx("div",{className:"p-4 text-gray-500",children:"No hay tareas pendientes."})})]}),d.jsxs("div",{className:"mb-4 border rounded-lg bg-white shadow",children:[d.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-3 text-lg font-semibold text-gray-800 hover:bg-gray-50 focus:outline-none",onClick:()=>E(M=>!M),children:[d.jsxs("span",{children:["✔️ OK (",Ga.length,")"]}),d.jsx("span",{className:`transform transition-transform ${S?"":"-rotate-90"}`,children:"▼"})]}),S&&d.jsx("div",{className:"p-2 pt-0",children:Ga.length>0?jd(Ga):d.jsx("div",{className:"p-4 text-gray-500",children:"No hay tareas OK."})})]})]}),gy=()=>{u("all"),f("all"),x("all"),(t==null?void 0:t.role)==="admin"?v("all"):(t==null?void 0:t.role)==="supervisor"&&v(t.store)},my=Array.from(new Set(D.flatMap(M=>M.stores||[]))),yy=Array.from(new Set(D.map(M=>M.assigned_user_name).filter(M=>!!M))),Ed=M=>{F(M),N(!0)},xy=()=>{N(!1),F(null)},Cd=async M=>{const U=St(M.status)==="ok"?"Pendiente":"OK";try{await W.from("tasks").update({status:U}).eq("id",M.id),n(fe=>fe.map(z=>z.id===M.id?{...z,status:U}:z))}catch{}};return d.jsxs("div",{className:"p-4 md:p-8",children:[d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[d.jsx("h1",{className:"text-2xl font-bold",children:O}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("button",{onClick:()=>l("table"),className:`p-2 rounded-lg ${a==="table"?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:"Vista de listado",children:d.jsx(M1,{size:20})}),d.jsx("button",{onClick:()=>l("grid"),className:`p-2 rounded-lg ${a==="grid"?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:"Vista de cuadrícula",children:d.jsx(k1,{size:20})}),d.jsx("button",{onClick:()=>l("calendar"),className:`p-2 rounded-lg ${a==="calendar"?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:"Vista de calendario",children:d.jsx(x1,{size:20})})]})]}),d.jsxs("div",{className:"mb-6 p-4 bg-white rounded-xl shadow-lg grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 items-end w-full",children:[(t==null?void 0:t.role)==="admin"&&d.jsxs("div",{children:[d.jsx("label",{htmlFor:"store-filter-tasks",className:"block text-xs font-medium text-gray-500 mb-1",children:"Tienda"}),d.jsxs("select",{id:"store-filter-tasks",value:g,onChange:M=>v(M.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todas las Tiendas"}),my.map(M=>d.jsx("option",{value:M,children:M},M))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"status-filter-tasks",className:"block text-xs font-medium text-gray-500 mb-1",children:"Estado"}),d.jsxs("select",{id:"status-filter-tasks",value:c,onChange:M=>u(M.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todos"}),d.jsx("option",{value:"Pendiente",children:"Pendiente"}),d.jsx("option",{value:"OK",children:"OK"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"priority-filter-tasks",className:"block text-xs font-medium text-gray-500 mb-1",children:"Prioridad"}),d.jsxs("select",{id:"priority-filter-tasks",value:h,onChange:M=>f(M.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todas"}),d.jsx("option",{value:"Urgente",children:"Urgente"}),d.jsx("option",{value:"Rutinaria",children:"Rutinaria"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"user-filter-tasks",className:"block text-xs font-medium text-gray-500 mb-1",children:"Asignado A"}),d.jsxs("select",{id:"user-filter-tasks",value:p,onChange:M=>x(M.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todos los Usuarios"}),yy.map(M=>d.jsx("option",{value:M,children:M},M))]})]}),d.jsx("div",{className:"flex justify-end items-end h-full",children:d.jsx("button",{type:"button",onClick:gy,className:"p-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg shadow-sm border border-gray-300 transition flex items-center",title:"Resetear Filtros","aria-label":"Resetear Filtros",children:d.jsx(_1,{size:20})})})]}),D.length===0&&d.jsx("p",{className:"text-gray-600",children:"No hay tareas para mostrar."}),a==="table"?py():a==="grid"?$():me(),L&&R&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",children:d.jsx("div",{className:"relative bg-white rounded-2xl shadow-2xl p-0 max-w-3xl w-full mx-4",style:{maxHeight:"90vh",overflowY:"auto"},children:d.jsx(dy,{taskId:R,onClose:xy,onStatusChange:M=>{n(U=>U.map(fe=>fe.id===R?{...fe,status:M}:fe))}})})})]})}const Ne=[];for(let t=0;t<256;++t)Ne.push((t+256).toString(16).slice(1));function FE(t,e=0){return(Ne[t[e+0]]+Ne[t[e+1]]+Ne[t[e+2]]+Ne[t[e+3]]+"-"+Ne[t[e+4]]+Ne[t[e+5]]+"-"+Ne[t[e+6]]+Ne[t[e+7]]+"-"+Ne[t[e+8]]+Ne[t[e+9]]+"-"+Ne[t[e+10]]+Ne[t[e+11]]+Ne[t[e+12]]+Ne[t[e+13]]+Ne[t[e+14]]+Ne[t[e+15]]).toLowerCase()}let Hl;const zE=new Uint8Array(16);function $E(){if(!Hl){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Hl=crypto.getRandomValues.bind(crypto)}return Hl(zE)}const BE=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Sp={randomUUID:BE};function UE(t,e,n){var s;if(Sp.randomUUID&&!e&&!t)return Sp.randomUUID();t=t||{};const r=t.random??((s=t.rng)==null?void 0:s.call(t))??$E();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,FE(r)}function WE(){const{currentUser:t}=bt(),e=qn(),[n,r]=k.useState({name:"",description:"",assignedUserAuthId:"",stores:(t==null?void 0:t.role)==="supervisor"?[t.store]:[],due_date:"",priority:"Rutinaria",taskType:"",isRecurring:!1,recurrenceType:"weekly",interval:1,daysOfWeek:[],dayOfMonth:1,recurrenceEndDate:""}),[s,i]=k.useState([]),[o,a]=k.useState([]),[l,c]=k.useState(!1),[u,h]=k.useState(null),[f,p]=k.useState(!1),[x,g]=k.useState(!1),[v,y]=k.useState("tasks"),[m,w]=k.useState(null),[_,b]=k.useState(null),[j,S]=k.useState({title:"",message:"",targetStores:[],allStores:!1});k.useEffect(()=>{(async()=>{try{const{data:P,error:O}=await W.from("users").select("*");if(O)throw new Error("Failed to fetch users");i(P||[]);const D=Array.from(new Set((P||[]).map($=>$.store))).sort();a(D),(t==null?void 0:t.role)==="admin"&&D.length>0}catch{h("Error al cargar usuarios")}})()},[t]);const E=C=>{const{name:P,value:O,type:D}=C.target;if(D==="checkbox"){const $=C.target.checked;r(me=>({...me,[P]:$}))}else r($=>({...$,[P]:O}))},L=C=>{r(P=>{const O=P.daysOfWeek.includes(C)?P.daysOfWeek.filter(D=>D!==C):[...P.daysOfWeek,C];return{...P,daysOfWeek:O}})},N=C=>{r(P=>P.stores.includes(C)?{...P,stores:P.stores.filter(O=>O!==C)}:{...P,stores:[...P.stores,C]})},R=C=>{r(P=>({...P,stores:C?o:[]}))},F=C=>{const{name:P,value:O}=C.target;S(D=>({...D,[P]:O}))},X=C=>{S(P=>({...P,allStores:C,targetStores:C?o:[]}))},ie=C=>{S(P=>{if(P.targetStores.includes(C)){const O=P.targetStores.filter(D=>D!==C);return{...P,targetStores:O,allStores:O.length===o.length}}else{const O=[...P.targetStores,C];return{...P,targetStores:O,allStores:O.length===o.length}}})},K=async C=>{if(C.preventDefault(),h(null),c(!0),p(!1),!t){b("error"),w("No se pudo identificar al usuario actual para asignar la tarea."),c(!1),setTimeout(()=>{w(null),b(null),c(!1)},2200);return}try{let P;n.isRecurring&&(P={type:n.recurrenceType,interval:n.interval,endDate:n.recurrenceEndDate||void 0},n.recurrenceType==="weekly"?P.daysOfWeek=n.daysOfWeek:n.recurrenceType==="monthly"&&(P.dayOfMonth=n.dayOfMonth));const O={name:n.name,description:n.description,store:n.stores.join(","),assigned_user_id:n.assignedUserAuthId||null,due_date:n.due_date,priority:n.priority,status:"Pendiente",task_type:n.taskType,evidence_image_url:"",is_recurring:n.isRecurring,recurrence_pattern:n.isRecurring?P:null,assigned_user_auth_id:n.assignedUserAuthId||null},{error:D}=await W.from("tasks").insert(O);if(D)throw D;b("success"),w("¡Tarea creada exitosamente!"),setTimeout(()=>{w(null),b(null),c(!1)},1800)}catch(P){b("error"),w(P instanceof Error?P.message:"Ocurrió un error desconocido"),setTimeout(()=>{w(null),b(null),c(!1)},2200)}finally{c(!1)}};if((t==null?void 0:t.role)!=="supervisor"&&(t==null?void 0:t.role)!=="admin")return d.jsxs("div",{className:"p-8 text-center",children:[d.jsx("p",{className:"text-red-600",children:"No tienes permiso para crear tareas."}),d.jsx("button",{onClick:()=>e("/"),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Volver al Inicio"})]});const B=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],I=n.stores.length===0?s:s.filter(C=>n.stores.includes(C.store));return d.jsxs("div",{className:"p-8",children:[d.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Panel de Tareas"}),d.jsx("div",{className:"mb-6",children:d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[d.jsxs("button",{className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center transition-colors duration-150 ${v==="tasks"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>y("tasks"),children:[d.jsx(w1,{className:"w-5 h-5 mr-2"}),"Tareas"]}),d.jsxs("button",{className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center transition-colors duration-150 ${v==="announcements"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>y("announcements"),children:[d.jsx(y0,{className:"w-5 h-5 mr-2"}),"Comunicados"]})]})})}),v==="tasks"&&d.jsx("div",{children:d.jsx("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded",onClick:()=>p(!0),children:"Crear Tarea"})}),v==="announcements"&&d.jsx("div",{children:d.jsx("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded mb-6",onClick:()=>g(!0),children:"Crear Comunicado"})}),f&&!m&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:d.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-2xl max-w-2xl w-full relative",children:[d.jsx("button",{onClick:()=>p(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl font-bold","aria-label":"Cerrar",children:"×"}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Crear Tarea"}),u&&d.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded",role:"alert",children:d.jsx("p",{children:u})}),d.jsxs("form",{onSubmit:K,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Tarea *"}),d.jsx("input",{type:"text",name:"name",id:"name",required:!0,className:"mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:n.name,onChange:E,placeholder:"Ej: Limpieza Bodega Semanal"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),d.jsx("textarea",{name:"description",id:"description",rows:4,className:"mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:n.description,onChange:E,placeholder:"Instrucciones detalladas de la tarea..."})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiendas *"}),d.jsxs("div",{className:"border rounded-md p-2 bg-gray-50 max-h-40 overflow-y-auto",children:[d.jsxs("label",{className:"flex items-center mb-2 font-medium",children:[d.jsx("input",{type:"checkbox",checked:n.stores.length===o.length&&o.length>0,onChange:C=>R(C.target.checked),className:"mr-2"}),"Seleccionar todas"]}),o.map(C=>d.jsxs("label",{className:"flex items-center mb-1",children:[d.jsx("input",{type:"checkbox",checked:n.stores.includes(C),onChange:()=>N(C),className:"mr-2"}),C]},C))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"assignedUserAuthId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Asignar a Usuario"}),d.jsxs("select",{name:"assignedUserAuthId",id:"assignedUserAuthId",className:"mt-1 block w-full p-3 border border-gray-300 bg-white rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:n.assignedUserAuthId,onChange:E,children:[d.jsx("option",{value:"",children:"Sin asignar"}),I.map(C=>((t==null?void 0:t.role)==="admin"||C.store===(t==null?void 0:t.store))&&d.jsxs("option",{value:C.auth_id,children:[C.name," (",C.store,")"]},C.id))]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"due_date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Límite *"}),d.jsx("input",{type:"date",name:"due_date",id:"due_date",required:!0,className:"mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:n.due_date,onChange:E,min:new Date().toISOString().split("T")[0]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridad"}),d.jsxs("select",{name:"priority",id:"priority",className:"mt-1 block w-full p-3 border border-gray-300 bg-white rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:n.priority,onChange:E,children:[d.jsx("option",{value:"Rutinaria",children:"Rutinaria"}),d.jsx("option",{value:"Urgente",children:"Urgente"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"taskType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Tarea"}),d.jsxs("select",{name:"taskType",id:"taskType",className:"mt-1 block w-full p-3 border border-gray-300 bg-white rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:n.taskType,onChange:E,children:[d.jsx("option",{value:"",children:"Seleccionar tipo..."}),d.jsx("option",{value:"Limpieza",children:"Limpieza"}),d.jsx("option",{value:"Visual Merchandising",children:"Visual Merchandising"}),d.jsx("option",{value:"Operaciones",children:"Operaciones"}),d.jsx("option",{value:"Inventario",children:"Inventario"}),d.jsx("option",{value:"Mantenimiento",children:"Mantenimiento"}),d.jsx("option",{value:"Apertura",children:"Apertura"}),d.jsx("option",{value:"Cierre",children:"Cierre"}),d.jsx("option",{value:"Capacitación",children:"Capacitación"}),d.jsx("option",{value:"Compras",children:"Compras"}),d.jsx("option",{value:"Incidencia",children:"Incidencia"}),d.jsx("option",{value:"Otro",children:"Otro"})]})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isRecurring",name:"isRecurring",checked:n.isRecurring,onChange:E,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),d.jsx("label",{htmlFor:"isRecurring",className:"ml-2 block text-sm text-gray-900",children:"Tarea Recurrente"})]}),n.isRecurring&&d.jsxs("div",{className:"space-y-4 pl-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"recurrenceType",className:"block text-sm font-medium text-gray-700",children:"Tipo de Recurrencia"}),d.jsxs("select",{id:"recurrenceType",name:"recurrenceType",value:n.recurrenceType,onChange:E,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[d.jsx("option",{value:"daily",children:"Diaria"}),d.jsx("option",{value:"weekly",children:"Semanal"}),d.jsx("option",{value:"monthly",children:"Mensual"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"interval",className:"block text-sm font-medium text-gray-700",children:"Intervalo"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:n.interval,onChange:E,className:"mt-1 block w-24 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),d.jsx("span",{className:"text-sm text-gray-500",children:n.recurrenceType==="daily"?"días":n.recurrenceType==="weekly"?"semanas":"meses"})]})]}),n.recurrenceType==="weekly"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Días de la Semana"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:B.map((C,P)=>d.jsxs("label",{className:"inline-flex items-center",children:[d.jsx("input",{type:"checkbox",checked:n.daysOfWeek.includes(P),onChange:()=>L(P),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),d.jsx("span",{className:"ml-2 text-sm text-gray-700",children:C})]},C))})]}),n.recurrenceType==="monthly"&&d.jsxs("div",{children:[d.jsx("label",{htmlFor:"dayOfMonth",className:"block text-sm font-medium text-gray-700",children:"Día del Mes"}),d.jsx("input",{type:"number",id:"dayOfMonth",name:"dayOfMonth",min:"1",max:"31",value:n.dayOfMonth,onChange:E,className:"mt-1 block w-24 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"recurrenceEndDate",className:"block text-sm font-medium text-gray-700",children:"Fecha de Fin (opcional)"}),d.jsx("input",{type:"date",id:"recurrenceEndDate",name:"recurrenceEndDate",value:n.recurrenceEndDate,onChange:E,min:new Date().toISOString().split("T")[0],className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),d.jsx("div",{className:"pt-5",children:d.jsxs("div",{className:"flex justify-center space-x-3",children:[d.jsx("button",{type:"button",onClick:()=>p(!1),className:"w-32 px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"}),d.jsx("button",{type:"submit",disabled:l,className:"w-32 px-6 py-3 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400",children:l?"Creando...":"Crear"})]})})]})]})}),x&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:d.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-2xl max-w-2xl w-full relative",children:[d.jsx("button",{onClick:()=>g(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl font-bold","aria-label":"Cerrar",children:"×"}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Crear Comunicado"}),d.jsxs("form",{className:"space-y-6",onSubmit:async C=>{if(C.preventDefault(),!j.title.trim()||!j.message.trim()){b("error"),w("Completa el título y el mensaje.");return}g(!1);try{const P=j.allStores?null:s.filter(D=>j.targetStores.includes(D.store)).map(D=>D.store_id||D.store).filter((D,$,me)=>me.indexOf(D)===$),{error:O}=await W.from("announcements").insert({id:UE(),title:j.title,message:j.message,created_at:new Date().toISOString(),created_by:(t==null?void 0:t.id)||(t==null?void 0:t.auth_id),target_store_ids:P});if(O)throw O;b("success"),w("¡Comunicado creado exitosamente!"),S({title:"",message:"",targetStores:[],allStores:!1})}catch{b("error"),w("Error al crear el comunicado.")}},children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"announcement-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Título del Comunicado *"}),d.jsx("input",{type:"text",id:"announcement-title",name:"title",required:!0,className:"mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:j.title,onChange:F})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"announcement-message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje *"}),d.jsx("textarea",{id:"announcement-message",name:"message",rows:4,required:!0,className:"mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:j.message,onChange:F})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiendas destinatarias *"}),d.jsxs("div",{className:"border rounded-md p-2 bg-gray-50 max-h-40 overflow-y-auto",children:[d.jsxs("label",{className:"flex items-center mb-2 font-medium",children:[d.jsx("input",{type:"checkbox",checked:j.allStores,onChange:C=>X(C.target.checked),className:"mr-2"}),"Todas las tiendas"]}),o.map(C=>d.jsxs("label",{className:"flex items-center mb-1",children:[d.jsx("input",{type:"checkbox",checked:j.targetStores.includes(C),onChange:()=>ie(C),className:"mr-2"}),C]},C))]})]}),d.jsx("div",{className:"pt-5",children:d.jsxs("div",{className:"flex justify-center space-x-3",children:[d.jsx("button",{type:"button",onClick:()=>g(!1),className:"w-32 px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"}),d.jsx("button",{type:"submit",className:"w-32 px-6 py-3 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Crear"})]})})]})]})}),m&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:d.jsxs("div",{className:"bg-white rounded-xl shadow-2xl px-10 py-8 flex flex-col items-center justify-center max-w-md w-full",role:"alert",children:[_==="success"&&d.jsxs("svg",{className:"w-12 h-12 mb-4 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"white"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2l4-4"})]}),_==="error"&&d.jsx("svg",{className:"w-12 h-12 mb-4 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),d.jsx("p",{className:"text-lg font-semibold mb-2",children:_==="success"?"Éxito":"Error"}),d.jsx("p",{className:"text-center text-gray-600",children:m})]})})]})}function HE(){const{id:t}=jw();return t?d.jsx(dy,{taskId:t}):d.jsx("div",{className:"p-8 text-center text-gray-700",children:"ID de tarea no proporcionado."})}function VE(){const{currentUser:t}=bt(),e=qn(),[n,r]=k.useState([]),[s,i]=k.useState([]),[o,a]=k.useState(!0),[l,c]=k.useState(null),[u,h]=k.useState("all"),[f,p]=k.useState("all"),[x,g]=k.useState("all"),[v,y]=k.useState((t==null?void 0:t.role)==="supervisor"?t.store:"all");k.useEffect(()=>{if(!t||t.role!=="supervisor"&&t.role!=="admin"){a(!1);return}(async()=>{a(!0),c(null);try{const{data:E,error:L}=await W.from("users").select("*");if(L)throw new Error("Error al cargar usuarios");i(E||[]);let N=W.from("tasks").select("*");t.role==="supervisor"?N=N.contains("stores",[t.store]):t.role==="admin"&&v!=="all"&&(N=N.contains("stores",[v]));const{data:R,error:F}=await N;if(F)throw new Error("Error al cargar tareas");const X=(R||[]).map(ie=>{var K;return{...ie,assignedUserName:((K=(E||[]).find(B=>B.auth_id===ie.assigned_user_auth_id))==null?void 0:K.name)||"Desconocido"}});r(X)}catch(E){c(E instanceof Error?E.message:"Error desconocido al cargar datos")}finally{a(!1)}})()},[t,v]);const m=n.filter(S=>{var R,F;const E=u==="all"||((R=S.status)==null?void 0:R.toLowerCase().replace(" ",""))===u.toLowerCase().replace(" ",""),L=f==="all"||((F=S.priority)==null?void 0:F.toLowerCase())===f.toLowerCase(),N=x==="all"||S.assigned_user_auth_id===x;return E&&L&&N});if(!t||t.role!=="supervisor"&&t.role!=="admin")return d.jsx(Gs,{to:"/",replace:!0});if(o)return d.jsx("div",{className:"p-8 text-center",children:"Cargando vista general de tienda..."});if(l)return d.jsxs("div",{className:"p-8 text-center text-red-500 bg-red-50 p-4 rounded-md",children:["Error: ",l]});const w=S=>{switch(S==null?void 0:S.toLowerCase()){case"urgente":case"high":return"bg-red-100 text-red-700";case"rutinaria":case"medium":return"bg-yellow-100 text-yellow-700";case"low":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},_=S=>{switch(S==null?void 0:S.toLowerCase().replace(" ","")){case"pendiente":return"bg-orange-100 text-orange-700";case"ok":return"bg-teal-100 text-teal-700";default:return"bg-gray-100 text-gray-700"}},b=Array.from(new Set(s.map(S=>S.store))).sort(),j=Array.from(new Set(n.map(S=>S.assigned_user_auth_id))).map(S=>s.find(E=>E.auth_id===S)).filter(S=>S!==void 0);return d.jsxs("div",{children:[d.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:d.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2 sm:mb-0",children:"Vista de Tienda"})}),d.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:t.role==="admin"?"Visualizando tareas (Administración)":`Tienda: ${t.store} (Supervisor)`}),d.jsxs("div",{className:"mb-6 p-4 bg-white rounded-xl shadow-lg grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[t.role==="admin"&&d.jsxs("div",{children:[d.jsx("label",{htmlFor:"store-filter-overview",className:"block text-xs font-medium text-gray-500 mb-1",children:"Tienda"}),d.jsxs("select",{id:"store-filter-overview",value:v,onChange:S=>y(S.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todas las Tiendas"}),b.map(S=>d.jsx("option",{value:S,children:S},S))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"status-filter-overview",className:"block text-xs font-medium text-gray-500 mb-1",children:"Estado"}),d.jsxs("select",{id:"status-filter-overview",value:u,onChange:S=>h(S.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todos"}),d.jsx("option",{value:"Pendiente",children:"Pendiente"}),d.jsx("option",{value:"OK",children:"OK"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"priority-filter-overview",className:"block text-xs font-medium text-gray-500 mb-1",children:"Prioridad"}),d.jsxs("select",{id:"priority-filter-overview",value:f,onChange:S=>p(S.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todas"}),d.jsx("option",{value:"Urgente",children:"Urgente"}),d.jsx("option",{value:"Rutinaria",children:"Rutinaria"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"user-filter-overview",className:"block text-xs font-medium text-gray-500 mb-1",children:"Asignado A"}),d.jsxs("select",{id:"user-filter-overview",value:x,onChange:S=>g(S.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todos los Usuarios"}),j.map(S=>d.jsx("option",{value:S.auth_id,children:S.name},S.auth_id))]})]})]}),m.length===0&&!o&&d.jsx("p",{className:"text-gray-600 text-center py-6",children:"No hay tareas que coincidan con los filtros."}),d.jsx("div",{className:"bg-white rounded-xl shadow-2xl overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-100",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tarea"}),t.role==="admin"&&d.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tienda"}),d.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Asignado A"}),d.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Vence"}),d.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Prioridad"}),d.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Estado"}),d.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(S=>{var E;return d.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.name}),d.jsx("div",{className:"text-xs text-gray-500 line-clamp-1",children:S.description||"Sin descripción"})]}),t.role==="admin"&&d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:((E=S.stores)==null?void 0:E.join(", "))||"N/A"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:S.assignedUserName||"N/A"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:S.due_date||"N/A"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`px-3 py-1 text-xs leading-5 font-semibold rounded-full ${w(S.priority)}`,children:S.priority||"N/A"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`px-3 py-1 text-xs leading-5 font-semibold rounded-full ${_(S.status)}`,children:S.status||"N/A"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:d.jsx("button",{onClick:()=>e(`/tasks/${S.id}`),className:"text-indigo-600 hover:text-indigo-800 hover:underline",children:"Ver Detalles"})})]},S.id)})})]})})]})}function qE({isOpen:t,onClose:e,user:n,onSave:r,availableRoles:s}){const[i,o]=k.useState(null),[a,l]=k.useState([]),[c,u]=k.useState(!0),[h,f]=k.useState(null);k.useEffect(()=>{(async()=>{try{const{data:y,error:m}=await W.from("stores").select("name");if(m)throw new Error("Failed to fetch stores");l(y||[]),u(!1)}catch(y){console.error("Error fetching stores:",y),u(!1)}})()},[]),k.useEffect(()=>{o(n?{...n}:null)},[n]);const p=v=>{const{name:y,value:m}=v.target;o(w=>w?{...w,[y]:m}:null)},x=()=>{i&&r(i)},g=async()=>{if(i&&window.confirm("¿Estás seguro de que deseas eliminar este usuario? Esta acción no se puede deshacer."))try{const{error:v}=await W.from("users").delete().eq("auth_id",i.auth_id);if(v)throw new Error("Error al eliminar el usuario de la base de datos");const m=await(await fetch("http://localhost:3001/delete-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:i.auth_id})})).json();if(!m.success)throw new Error(m.error||"Error al eliminar el usuario de Auth");f("Usuario eliminado completamente."),setTimeout(()=>{f(null),e()},1500)}catch(v){alert("Error al eliminar el usuario."),console.error("Error al eliminar el usuario:",v)}};return t?c?d.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-[60] flex justify-center items-center",children:d.jsx("div",{className:"relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:d.jsx("p",{className:"text-center",children:"Cargando..."})})}):i?d.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-[60] flex justify-center items-center",children:d.jsxs("div",{className:"relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:[h&&d.jsx("div",{className:"mb-4 p-2 bg-green-100 text-green-800 rounded text-center text-sm",children:h}),d.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 text-center mb-4",children:"Editar Usuario"}),d.jsxs("div",{className:"space-y-3 px-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name-modal",className:"block text-sm font-medium text-gray-700",children:"Nombre"}),d.jsx("input",{type:"text",name:"name",id:"name-modal",value:i.name,onChange:p,className:"mt-1 p-2 w-full border border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email-modal",className:"block text-sm font-medium text-gray-700",children:"Email"}),d.jsx("input",{type:"email",name:"email",id:"email-modal",value:i.email,onChange:p,className:"mt-1 p-2 w-full border border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"store-modal",className:"block text-sm font-medium text-gray-700",children:"Tienda"}),d.jsx("select",{name:"store",id:"store-modal",value:i.store,onChange:p,className:"mt-1 p-2 w-full border border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",children:a.map(v=>d.jsx("option",{value:v.name,children:v.name},v.name))})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"role-modal",className:"block text-sm font-medium text-gray-700",children:"Rol"}),d.jsx("select",{name:"role",id:"role-modal",value:i.role,onChange:p,className:"mt-1 p-2 w-full border border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",children:s.map(v=>d.jsx("option",{value:v,children:v.charAt(0).toUpperCase()+v.slice(1)},v))})]})]}),d.jsxs("div",{className:"flex justify-between pt-4 mt-4 border-t",children:[d.jsxs("button",{onClick:e,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 text-sm flex items-center",children:[d.jsx(y1,{size:16,className:"mr-1"}),"Cancelar"]}),d.jsxs("button",{onClick:x,className:"px-3 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm flex items-center",children:[d.jsx(T1,{size:16,className:"mr-1"}),"Guardar"]}),d.jsx("button",{onClick:g,className:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm flex items-center",children:"Eliminar"})]})]})}):null:null}const KE=({isOpen:t,onClose:e,onUserAdded:n})=>{const[r,s]=k.useState({name:"",email:"",password:"",store:"",role:""}),[i,o]=k.useState([]),[a,l]=k.useState(null),[c,u]=k.useState(!1);k.useEffect(()=>{if(!t)return;s({name:"",email:"",password:"",store:"",role:""}),(async()=>{const{data:x,error:g}=await W.from("stores").select("name");g||o(x||[])})()},[t]);const h=p=>{const{name:x,value:g}=p.target;s(v=>({...v,[x]:g}))},f=async p=>{var x;p.preventDefault(),l(null),u(!0);try{const{data:g,error:v}=await W.auth.signUp({email:r.email,password:r.password});if(v)throw v;const y=(x=g.user)==null?void 0:x.id;if(!y)throw new Error("No se pudo obtener el ID del usuario");const{error:m}=await W.from("users").insert([{auth_id:y,name:r.name,email:r.email,store:r.store,role:r.role}]);if(m)throw m;n(),e()}catch(g){const v=g instanceof Error?g.message:"Error al crear el usuario";l(v)}finally{u(!1)}};return t?d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md relative",children:[d.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,children:"×"}),d.jsx("h2",{className:"text-xl font-bold mb-4",children:"Agregar Usuario"}),d.jsxs("form",{onSubmit:f,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),d.jsx("input",{name:"name",value:r.name,onChange:h,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),d.jsx("input",{name:"email",type:"email",value:r.email,onChange:h,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),d.jsx("input",{name:"password",type:"password",value:r.password,onChange:h,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tienda"}),d.jsxs("select",{name:"store",value:r.store,onChange:h,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",children:[d.jsx("option",{value:"",children:"Seleccionar tienda..."}),i.map(p=>d.jsx("option",{value:p.name,children:p.name},p.name))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rol"}),d.jsxs("select",{name:"role",value:r.role,onChange:h,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",children:[d.jsx("option",{value:"",children:"Seleccionar rol..."}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"supervisor",children:"Supervisor"}),d.jsx("option",{value:"employee",children:"Empleado"})]})]}),a&&d.jsx("p",{className:"text-red-500 text-sm text-center",children:a}),d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 rounded",children:"Cancelar"}),d.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-indigo-600 text-white rounded",children:c?"Guardando...":"Guardar"})]})]})]})}):null};function hy(){const[t,e]=k.useState([]),[n,r]=k.useState(!1),[s,i]=k.useState(!1),[o,a]=k.useState(null),[l,c]=k.useState(!0),[u,h]=k.useState(null),f=["admin","supervisor","employee"],{currentUser:p}=bt();k.useEffect(()=>{if((p==null?void 0:p.role)!=="admin"){h("Acceso denegado. Solo administradores pueden ver esta página."),c(!1),e([]);return}(async()=>{c(!0),h(null);try{const{data:w,error:_}=await W.from("users").select("*");if(_)throw new Error(_.message);e(w||[])}catch(w){const _=w instanceof Error?w.message:"Error desconocido";h(`Error cargando usuarios: ${_}.`),console.error("Error fetching users:",w)}finally{c(!1)}})()},[p]);const x=m=>{a(m),r(!0)},g=()=>{r(!1),a(null)},v=async m=>{if(m){h(null);try{const{error:w}=await W.from("users").update(m).eq("id",m.id);if(w)throw new Error(w.message);e(_=>_.map(b=>b.id===m.id?m:b)),g()}catch(w){const _=w instanceof Error?w.message:"Error desconocido";h(`Error guardando usuario: ${_}`),console.error("Error saving user:",w)}}},y=async()=>{c(!0),h(null);try{const{data:m,error:w}=await W.from("users").select("*");if(w)throw new Error(w.message);e(m||[])}catch(m){const w=m instanceof Error?m.message:"Error desconocido";h(`Error cargando usuarios: ${w}.`),console.error("Error fetching users:",m)}finally{c(!1)}};return l?d.jsx("div",{className:"p-8 text-center",children:"Cargando..."}):u?d.jsx("div",{className:"p-8 text-center text-red-600",children:u}):d.jsxs("div",{children:[d.jsx("div",{className:"mb-4",children:d.jsx("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded",onClick:()=>i(!0),children:"Agregar Usuario"})}),d.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Store"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length>0?t.map(m=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.name}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.email}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.store}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${m.role==="admin"?"bg-red-100 text-red-800":m.role==="supervisor"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:m.role})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:d.jsx("button",{onClick:()=>x(m),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"})})]},m.id)):d.jsx("tr",{children:d.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:"No hay usuarios para mostrar."})})})]})}),d.jsx(qE,{isOpen:n,onClose:g,user:o,onSave:v,availableRoles:f}),d.jsx(KE,{isOpen:s,onClose:()=>i(!1),onUserAdded:y})]})}function fy(){const[t,e]=k.useState([]),[n,r]=k.useState(!0),[s,i]=k.useState(null),[o,a]=k.useState(!1),[l,c]=k.useState({});k.useEffect(()=>{u()},[]);const u=async()=>{r(!0),i(null);try{const{data:g,error:v}=await W.from("stores").select("*");if(v)throw new Error(v.message);e(g||[])}catch(g){i("Error loading stores. Please try again."),console.error("Error:",g)}finally{r(!1)}},h=async g=>{g.preventDefault(),i(null);try{if(l.id){const{error:v}=await W.from("stores").update(l).eq("id",l.id);if(v)throw new Error(v.message)}else{const{error:v}=await W.from("stores").insert([l]);if(v)throw new Error(v.message)}await u(),a(!1),c({})}catch(v){i("Error saving store. Please try again."),console.error("Error:",v)}},f=async g=>{if(window.confirm("¿Estás seguro de que quieres eliminar esta tienda?"))try{const{error:v}=await W.from("stores").delete().eq("id",g);if(v)throw new Error(v.message);await u()}catch(v){i("Error deleting store. Please try again."),console.error("Error:",v)}},p=g=>{c(g),a(!0)},x=g=>{const{name:v,value:y}=g.target;c(m=>({...m,[v]:y}))};return n?d.jsx("div",{className:"text-center py-4",children:"Loading stores..."}):d.jsxs("div",{children:[d.jsx("div",{className:"mb-6",children:d.jsxs("button",{onClick:()=>{c({}),a(!0)},className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:[d.jsx(P1,{className:"w-5 h-5 mr-2"}),"Agregar Nueva Tienda"]})}),s&&d.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded-md",children:s}),o&&d.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:d.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[d.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:l.id?"Editar Tienda":"Agregar Nueva Tienda"}),d.jsxs("form",{onSubmit:h,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),d.jsx("input",{type:"text",name:"name",value:l.name||"",onChange:x,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Calle"}),d.jsx("input",{type:"text",name:"street_name",value:l.street_name||"",onChange:x,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Número"}),d.jsx("input",{type:"text",name:"street_number",value:l.street_number||"",onChange:x,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Info Adicional"}),d.jsx("input",{type:"text",name:"additional_info",value:l.additional_info||"",onChange:x,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ciudad"}),d.jsx("input",{type:"text",name:"city",value:l.city||"",onChange:x,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado/Región"}),d.jsx("input",{type:"text",name:"state",value:l.state||"",onChange:x,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Cancelar"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:l.id?"Guardar Cambios":"Crear Tienda"})]})]})]})}),d.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dirección"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ciudad"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(g=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:g.name}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[g.street_name," ",g.street_number,g.additional_info&&d.jsx("span",{className:"text-xs text-gray-400 block",children:g.additional_info})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.city}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.state}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d.jsxs("div",{className:"flex space-x-3",children:[d.jsx("button",{onClick:()=>p(g),className:"text-indigo-600 hover:text-indigo-900",children:d.jsx(E1,{className:"w-5 h-5"})}),d.jsx("button",{onClick:()=>f(g.id),className:"text-red-600 hover:text-red-900",children:d.jsx(cd,{className:"w-5 h-5"})})]})})]},g.id))})]})})]})}const YE=()=>{const[t,e]=k.useState([]),[n,r]=k.useState(!0),[s,i]=k.useState(null),[o,a]=k.useState(null),[l,c]=k.useState(null),[u,h]=k.useState({title:"",message:"",target_store_ids:[]}),[f,p]=k.useState(!1);k.useEffect(()=>{(async()=>{r(!0);const{data:b,error:j}=await W.from("announcements").select("*").order("created_at",{ascending:!1});j?i("Error al cargar comunicados"):e(b||[]),r(!1)})()},[]);const x=async(_,b)=>{const{error:j}=await W.from("announcements").update({is_active:!b}).eq("id",_);j||e(S=>S.map(E=>E.id===_?{...E,is_active:!b}:E))},g=async _=>{if(!window.confirm("¿Estás seguro de que deseas eliminar este comunicado?"))return;a(_);const{error:b}=await W.from("announcements").delete().eq("id",_);b||e(j=>j.filter(S=>S.id!==_)),a(null)},v=_=>{c(_),h({title:_.title,message:_.message,target_store_ids:_.target_store_ids?[..._.target_store_ids]:null})},y=_=>{const{name:b,value:j}=_.target;h(S=>({...S,[b]:j}))},m=_=>{h(b=>{if(!b.target_store_ids)return{...b,target_store_ids:[_]};if(b.target_store_ids.includes(_)){const j=b.target_store_ids.filter(S=>S!==_);return{...b,target_store_ids:j.length?j:null}}else return{...b,target_store_ids:[...b.target_store_ids,_]}})},w=async _=>{if(_.preventDefault(),!l)return;p(!0);const{error:b}=await W.from("announcements").update({title:u.title,message:u.message,target_store_ids:u.target_store_ids}).eq("id",l.id);p(!1),b||(e(j=>j.map(S=>S.id===l.id?{...S,...u}:S)),c(null))};return d.jsxs("div",{className:"p-8",children:[d.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Comunicados"}),n?d.jsx("div",{children:"Cargando..."}):s?d.jsx("div",{className:"text-red-600",children:s}):d.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Título"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mensaje"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tiendas"}),d.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activo"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(_=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:_.title}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 max-w-xs truncate",children:_.message}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(_.created_at).toLocaleString()}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:_.target_store_ids?_.target_store_ids.join(", "):"Todas"}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:[d.jsx("label",{className:"inline-flex items-center cursor-pointer mr-3",children:d.jsx("input",{type:"checkbox",checked:_.is_active,onChange:()=>x(_.id,_.is_active),className:"form-checkbox h-5 w-5 text-indigo-600"})}),d.jsx("button",{className:"text-indigo-600 hover:text-indigo-800 ml-2",title:"Editar",onClick:()=>v(_),children:d.jsx(N1,{size:18})}),d.jsx("button",{className:"text-red-600 hover:text-red-800 ml-2",title:"Eliminar",onClick:()=>g(_.id),disabled:o===_.id,children:d.jsx(cd,{size:18})})]})]},_.id))})]})}),l&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:d.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-2xl max-w-2xl w-full relative",children:[d.jsx("button",{onClick:()=>c(null),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl font-bold","aria-label":"Cerrar",children:"×"}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Editar Comunicado"}),d.jsxs("form",{onSubmit:w,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título *"}),d.jsx("input",{type:"text",name:"title",required:!0,className:"mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:u.title,onChange:y})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje *"}),d.jsx("textarea",{name:"message",rows:4,required:!0,className:"mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:u.message,onChange:y})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiendas destinatarias"}),d.jsxs("div",{className:"border rounded-md p-2 bg-gray-50 max-h-40 overflow-y-auto",children:[Array.isArray(u.target_store_ids)&&u.target_store_ids.length===0&&d.jsx("span",{className:"text-gray-400",children:"Ninguna tienda seleccionada"}),u.target_store_ids&&u.target_store_ids.map(_=>{var b;return d.jsxs("label",{className:"flex items-center mb-1",children:[d.jsx("input",{type:"checkbox",checked:(b=u.target_store_ids)==null?void 0:b.includes(_),onChange:()=>m(_),className:"mr-2"}),_]},_)})]})]}),d.jsxs("div",{className:"pt-5 flex justify-center space-x-3",children:[d.jsx("button",{type:"button",onClick:()=>c(null),className:"w-32 px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"}),d.jsx("button",{type:"submit",disabled:f,className:"w-32 px-6 py-3 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400",children:f?"Guardando...":"Guardar"})]})]})]})})]})};function QE(){const{currentUser:t}=bt(),[e,n]=k.useState("users");return(t==null?void 0:t.role)!=="admin"?d.jsx("div",{className:"p-8 text-center",children:"No tienes permiso para ver esta página."}):d.jsxs("div",{className:"p-8",children:[d.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Panel de Administración"}),d.jsx("div",{className:"mb-6",children:d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[d.jsxs("button",{onClick:()=>n("users"),className:`${e==="users"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[d.jsx(x0,{className:"w-5 h-5 mr-2"}),"Usuarios"]}),d.jsxs("button",{onClick:()=>n("stores"),className:`${e==="stores"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[d.jsx(O1,{className:"w-5 h-5 mr-2"}),"Tiendas"]}),d.jsxs("button",{onClick:()=>n("announcements"),className:`$${e==="announcements"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[d.jsx(y0,{className:"w-5 h-5 mr-2"}),"Comunicados"]})]})})}),e==="users"?d.jsx(hy,{}):e==="stores"?d.jsx(fy,{}):d.jsx(YE,{})]})}const cn=({children:t})=>{const{currentUser:e,isLoading:n}=bt(),r=wr();return n?d.jsx("div",{className:"flex justify-center items-center min-h-screen",children:"Cargando..."}):e?t:d.jsx(Gs,{to:"/login",state:{from:r},replace:!0})};function GE(){const{currentUser:t,isLoading:e}=bt(),[n,r]=Sn.useState(!1);if(Sn.useEffect(()=>{console.log("[App] isLoading:",e,"| currentUser:",t),r(!e&&!t)},[e,t]),Sn.useEffect(()=>{const i=async()=>{console.log("[App] Refrescando sesión de Supabase...");try{const{data:{session:a}}=await W.auth.getSession();console.log("[App] getSession() result:",a),a||r(!0)}catch(a){console.error("[App] Error al refrescar sesión:",a),r(!0)}},o=()=>{document.visibilityState==="visible"&&i()};return window.addEventListener("focus",i),document.addEventListener("visibilitychange",o),()=>{window.removeEventListener("focus",i),document.removeEventListener("visibilitychange",o)}},[]),e)return d.jsx("div",{className:"flex justify-center items-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})});const s=window.location.pathname==="/login"||window.location.pathname==="/register";return d.jsxs("div",{className:"min-h-screen bg-gray-100 flex",children:[t&&d.jsx(D1,{}),d.jsxs("div",{className:`flex-1 ${t?"ml-0":""}`,children:[n&&!s&&d.jsxs("div",{className:"fixed top-0 left-0 w-full z-50 bg-red-100 text-red-700 text-center py-3 font-semibold shadow flex flex-col items-center",children:[d.jsx("span",{children:"Sesión expirada. Por favor, vuelve a iniciar sesión."}),d.jsx("a",{href:"/login",className:"mt-2 inline-block px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition font-normal text-base shadow",children:"Ir al Login"})]}),d.jsxs($w,{children:[d.jsx(dt,{path:"/login",element:t?d.jsx(Gs,{to:"/",replace:!0}):d.jsx(S2,{})}),d.jsx(dt,{path:"/register",element:t?d.jsx(Gs,{to:"/",replace:!0}):d.jsx(j2,{})}),d.jsx(dt,{path:"/",element:d.jsx(cn,{children:d.jsx(k2,{})})}),d.jsx(dt,{path:"/tasks",element:d.jsx(cn,{children:d.jsx(IE,{})})}),d.jsx(dt,{path:"/tasks/new",element:d.jsx(cn,{children:d.jsx(WE,{})})}),d.jsx(dt,{path:"/tasks/:id",element:d.jsx(cn,{children:d.jsx(HE,{})})}),d.jsx(dt,{path:"/store",element:d.jsx(cn,{children:d.jsx(VE,{})})}),d.jsx(dt,{path:"/admin",element:d.jsx(cn,{children:d.jsx(QE,{})})}),d.jsx(dt,{path:"/admin/users",element:d.jsx(cn,{children:d.jsx(hy,{})})}),d.jsx(dt,{path:"/admin/stores",element:d.jsx(cn,{children:d.jsx(fy,{})})}),d.jsx(dt,{path:"*",element:d.jsx(Gs,{to:"/",replace:!0})})]})]})]})}Vl.createRoot(document.getElementById("root")).render(d.jsx(Sn.StrictMode,{children:d.jsx(Kw,{children:d.jsxs(p1,{children:[" ",d.jsx(GE,{})]})})}));export{by as g};
