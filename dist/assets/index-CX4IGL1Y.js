var yy=Object.defineProperty;var vy=(t,e,n)=>e in t?yy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var G=(t,e,n)=>vy(t,typeof e!="symbol"?e+"":e,n);function xy(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _y(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var bp={exports:{}},wa={},kp={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ni=Symbol.for("react.element"),by=Symbol.for("react.portal"),ky=Symbol.for("react.fragment"),Sy=Symbol.for("react.strict_mode"),jy=Symbol.for("react.profiler"),Ey=Symbol.for("react.provider"),Cy=Symbol.for("react.context"),Py=Symbol.for("react.forward_ref"),Ty=Symbol.for("react.suspense"),Ny=Symbol.for("react.memo"),Oy=Symbol.for("react.lazy"),jd=Symbol.iterator;function My(t){return t===null||typeof t!="object"?null:(t=jd&&t[jd]||t["@@iterator"],typeof t=="function"?t:null)}var Sp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jp=Object.assign,Ep={};function as(t,e,n){this.props=t,this.context=e,this.refs=Ep,this.updater=n||Sp}as.prototype.isReactComponent={};as.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};as.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cp(){}Cp.prototype=as.prototype;function su(t,e,n){this.props=t,this.context=e,this.refs=Ep,this.updater=n||Sp}var iu=su.prototype=new Cp;iu.constructor=su;jp(iu,as.prototype);iu.isPureReactComponent=!0;var Ed=Array.isArray,Pp=Object.prototype.hasOwnProperty,ou={current:null},Tp={key:!0,ref:!0,__self:!0,__source:!0};function Np(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Pp.call(e,r)&&!Tp.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ni,type:t,key:i,ref:o,props:s,_owner:ou.current}}function Ly(t,e){return{$$typeof:Ni,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function au(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ni}function Ay(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cd=/\/+/g;function Xa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ay(""+t.key):e.toString(36)}function wo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ni:case by:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Xa(o,0):r,Ed(s)?(n="",t!=null&&(n=t.replace(Cd,"$&/")+"/"),wo(s,e,n,"",function(c){return c})):s!=null&&(au(s)&&(s=Ly(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Cd,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ed(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Xa(i,a);o+=wo(i,e,n,l,s)}else if(l=My(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Xa(i,a++),o+=wo(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zi(t,e,n){if(t==null)return t;var r=[],s=0;return wo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Dy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ve={current:null},_o={transition:null},Ry={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:_o,ReactCurrentOwner:ou};function Op(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:zi,forEach:function(t,e,n){zi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zi(t,function(){e++}),e},toArray:function(t){return zi(t,function(e){return e})||[]},only:function(t){if(!au(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=as;K.Fragment=ky;K.Profiler=jy;K.PureComponent=su;K.StrictMode=Sy;K.Suspense=Ty;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ry;K.act=Op;K.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=jp({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ou.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Pp.call(e,l)&&!Tp.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ni,type:t.type,key:s,ref:i,props:r,_owner:o}};K.createContext=function(t){return t={$$typeof:Cy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ey,_context:t},t.Consumer=t};K.createElement=Np;K.createFactory=function(t){var e=Np.bind(null,t);return e.type=t,e};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:Py,render:t}};K.isValidElement=au;K.lazy=function(t){return{$$typeof:Oy,_payload:{_status:-1,_result:t},_init:Dy}};K.memo=function(t,e){return{$$typeof:Ny,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=_o.transition;_o.transition={};try{t()}finally{_o.transition=e}};K.unstable_act=Op;K.useCallback=function(t,e){return Ve.current.useCallback(t,e)};K.useContext=function(t){return Ve.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return Ve.current.useDeferredValue(t)};K.useEffect=function(t,e){return Ve.current.useEffect(t,e)};K.useId=function(){return Ve.current.useId()};K.useImperativeHandle=function(t,e,n){return Ve.current.useImperativeHandle(t,e,n)};K.useInsertionEffect=function(t,e){return Ve.current.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return Ve.current.useLayoutEffect(t,e)};K.useMemo=function(t,e){return Ve.current.useMemo(t,e)};K.useReducer=function(t,e,n){return Ve.current.useReducer(t,e,n)};K.useRef=function(t){return Ve.current.useRef(t)};K.useState=function(t){return Ve.current.useState(t)};K.useSyncExternalStore=function(t,e,n){return Ve.current.useSyncExternalStore(t,e,n)};K.useTransition=function(){return Ve.current.useTransition()};K.version="18.3.1";kp.exports=K;var b=kp.exports;const kn=wy(b),Iy=xy({__proto__:null,default:kn},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy=b,zy=Symbol.for("react.element"),$y=Symbol.for("react.fragment"),By=Object.prototype.hasOwnProperty,Uy=Fy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wy={key:!0,ref:!0,__self:!0,__source:!0};function Mp(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)By.call(e,r)&&!Wy.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:zy,type:t,key:i,ref:o,props:s,_owner:Uy.current}}wa.Fragment=$y;wa.jsx=Mp;wa.jsxs=Mp;bp.exports=wa;var d=bp.exports,Wl={},Lp={exports:{}},at={},Ap={exports:{}},Dp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,A){var I=N.length;N.push(A);e:for(;0<I;){var B=I-1>>>1,V=N[B];if(0<s(V,A))N[B]=A,N[I]=V,I=B;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var A=N[0],I=N.pop();if(I!==A){N[0]=I;e:for(var B=0,V=N.length,Ee=V>>>1;B<Ee;){var Ce=2*(B+1)-1,bt=N[Ce],Pe=Ce+1,kt=N[Pe];if(0>s(bt,I))Pe<V&&0>s(kt,bt)?(N[B]=kt,N[Pe]=I,B=Pe):(N[B]=bt,N[Ce]=I,B=Ce);else if(Pe<V&&0>s(kt,I))N[B]=kt,N[Pe]=I,B=Pe;else break e}}return A}function s(N,A){var I=N.sortIndex-A.sortIndex;return I!==0?I:N.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,p=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(N){for(var A=n(c);A!==null;){if(A.callback===null)r(c);else if(A.startTime<=N)r(c),A.sortIndex=A.expirationTime,e(l,A);else break;A=n(c)}}function _(N){if(y=!1,w(N),!v)if(n(l)!==null)v=!0,z(S);else{var A=n(c);A!==null&&R(_,A.startTime-N)}}function S(N,A){v=!1,y&&(y=!1,m(j),j=-1),p=!0;var I=f;try{for(w(A),h=n(l);h!==null&&(!(h.expirationTime>A)||N&&!P());){var B=h.callback;if(typeof B=="function"){h.callback=null,f=h.priorityLevel;var V=B(h.expirationTime<=A);A=t.unstable_now(),typeof V=="function"?h.callback=V:h===n(l)&&r(l),w(A)}else r(l);h=n(l)}if(h!==null)var Ee=!0;else{var Ce=n(c);Ce!==null&&R(_,Ce.startTime-A),Ee=!1}return Ee}finally{h=null,f=I,p=!1}}var E=!1,k=null,j=-1,L=5,T=-1;function P(){return!(t.unstable_now()-T<L)}function O(){if(k!==null){var N=t.unstable_now();T=N;var A=!0;try{A=k(!0,N)}finally{A?H():(E=!1,k=null)}}else E=!1}var H;if(typeof g=="function")H=function(){g(O)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,W=Q.port2;Q.port1.onmessage=O,H=function(){W.postMessage(null)}}else H=function(){x(O,0)};function z(N){k=N,E||(E=!0,H())}function R(N,A){j=x(function(){N(t.unstable_now())},A)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,z(S))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(N){switch(f){case 1:case 2:case 3:var A=3;break;default:A=f}var I=f;f=A;try{return N()}finally{f=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,A){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var I=f;f=N;try{return A()}finally{f=I}},t.unstable_scheduleCallback=function(N,A,I){var B=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?B+I:B):I=B,N){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=I+V,N={id:u++,callback:A,priorityLevel:N,startTime:I,expirationTime:V,sortIndex:-1},I>B?(N.sortIndex=I,e(c,N),n(l)===null&&N===n(c)&&(y?(m(j),j=-1):y=!0,R(_,I-B))):(N.sortIndex=V,e(l,N),v||p||(v=!0,z(S))),N},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(N){var A=f;return function(){var I=f;f=A;try{return N.apply(this,arguments)}finally{f=I}}}})(Dp);Ap.exports=Dp;var Hy=Ap.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy=b,ot=Hy;function C(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rp=new Set,si={};function yr(t,e){Gr(t,e),Gr(t+"Capture",e)}function Gr(t,e){for(si[t]=e,t=0;t<e.length;t++)Rp.add(e[t])}var Zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hl=Object.prototype.hasOwnProperty,qy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pd={},Td={};function Ky(t){return Hl.call(Td,t)?!0:Hl.call(Pd,t)?!1:qy.test(t)?Td[t]=!0:(Pd[t]=!0,!1)}function Yy(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Qy(t,e,n,r){if(e===null||typeof e>"u"||Yy(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qe(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Me[t]=new qe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Me[e]=new qe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Me[t]=new qe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Me[t]=new qe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Me[t]=new qe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Me[t]=new qe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Me[t]=new qe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Me[t]=new qe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Me[t]=new qe(t,5,!1,t.toLowerCase(),null,!1,!1)});var lu=/[\-:]([a-z])/g;function cu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lu,cu);Me[e]=new qe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lu,cu);Me[e]=new qe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lu,cu);Me[e]=new qe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Me[t]=new qe(t,1,!1,t.toLowerCase(),null,!1,!1)});Me.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Me[t]=new qe(t,1,!1,t.toLowerCase(),null,!0,!0)});function uu(t,e,n,r){var s=Me.hasOwnProperty(e)?Me[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Qy(e,n,s,r)&&(n=null),r||s===null?Ky(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var rn=Vy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$i=Symbol.for("react.element"),Pr=Symbol.for("react.portal"),Tr=Symbol.for("react.fragment"),du=Symbol.for("react.strict_mode"),Vl=Symbol.for("react.profiler"),Ip=Symbol.for("react.provider"),Fp=Symbol.for("react.context"),hu=Symbol.for("react.forward_ref"),ql=Symbol.for("react.suspense"),Kl=Symbol.for("react.suspense_list"),fu=Symbol.for("react.memo"),hn=Symbol.for("react.lazy"),zp=Symbol.for("react.offscreen"),Nd=Symbol.iterator;function ms(t){return t===null||typeof t!="object"?null:(t=Nd&&t[Nd]||t["@@iterator"],typeof t=="function"?t:null)}var he=Object.assign,Ja;function Ls(t){if(Ja===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ja=e&&e[1]||""}return`
`+Ja+t}var Za=!1;function el(t,e){if(!t||Za)return"";Za=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Za=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ls(t):""}function Gy(t){switch(t.tag){case 5:return Ls(t.type);case 16:return Ls("Lazy");case 13:return Ls("Suspense");case 19:return Ls("SuspenseList");case 0:case 2:case 15:return t=el(t.type,!1),t;case 11:return t=el(t.type.render,!1),t;case 1:return t=el(t.type,!0),t;default:return""}}function Yl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Tr:return"Fragment";case Pr:return"Portal";case Vl:return"Profiler";case du:return"StrictMode";case ql:return"Suspense";case Kl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fp:return(t.displayName||"Context")+".Consumer";case Ip:return(t._context.displayName||"Context")+".Provider";case hu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fu:return e=t.displayName||null,e!==null?e:Yl(t.type)||"Memo";case hn:e=t._payload,t=t._init;try{return Yl(t(e))}catch{}}return null}function Xy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yl(e);case 8:return e===du?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $p(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Jy(t){var e=$p(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bi(t){t._valueTracker||(t._valueTracker=Jy(t))}function Bp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=$p(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Io(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ql(t,e){var n=e.checked;return he({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Od(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Rn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Up(t,e){e=e.checked,e!=null&&uu(t,"checked",e,!1)}function Gl(t,e){Up(t,e);var n=Rn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xl(t,e.type,Rn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Md(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xl(t,e,n){(e!=="number"||Io(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var As=Array.isArray;function Br(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Rn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Jl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(C(91));return he({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ld(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(C(92));if(As(n)){if(1<n.length)throw Error(C(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Rn(n)}}function Wp(t,e){var n=Rn(e.value),r=Rn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ad(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Hp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Hp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ui,Vp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ui=Ui||document.createElement("div"),Ui.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ui.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ii(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zy=["Webkit","ms","Moz","O"];Object.keys(Bs).forEach(function(t){Zy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bs[e]=Bs[t]})});function qp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bs.hasOwnProperty(t)&&Bs[t]?(""+e).trim():e+"px"}function Kp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=qp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ev=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ec(t,e){if(e){if(ev[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(C(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(C(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(C(61))}if(e.style!=null&&typeof e.style!="object")throw Error(C(62))}}function tc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nc=null;function pu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rc=null,Ur=null,Wr=null;function Dd(t){if(t=Li(t)){if(typeof rc!="function")throw Error(C(280));var e=t.stateNode;e&&(e=ja(e),rc(t.stateNode,t.type,e))}}function Yp(t){Ur?Wr?Wr.push(t):Wr=[t]:Ur=t}function Qp(){if(Ur){var t=Ur,e=Wr;if(Wr=Ur=null,Dd(t),e)for(t=0;t<e.length;t++)Dd(e[t])}}function Gp(t,e){return t(e)}function Xp(){}var tl=!1;function Jp(t,e,n){if(tl)return t(e,n);tl=!0;try{return Gp(t,e,n)}finally{tl=!1,(Ur!==null||Wr!==null)&&(Xp(),Qp())}}function oi(t,e){var n=t.stateNode;if(n===null)return null;var r=ja(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(C(231,e,typeof n));return n}var sc=!1;if(Zt)try{var ys={};Object.defineProperty(ys,"passive",{get:function(){sc=!0}}),window.addEventListener("test",ys,ys),window.removeEventListener("test",ys,ys)}catch{sc=!1}function tv(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Us=!1,Fo=null,zo=!1,ic=null,nv={onError:function(t){Us=!0,Fo=t}};function rv(t,e,n,r,s,i,o,a,l){Us=!1,Fo=null,tv.apply(nv,arguments)}function sv(t,e,n,r,s,i,o,a,l){if(rv.apply(this,arguments),Us){if(Us){var c=Fo;Us=!1,Fo=null}else throw Error(C(198));zo||(zo=!0,ic=c)}}function vr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Zp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rd(t){if(vr(t)!==t)throw Error(C(188))}function iv(t){var e=t.alternate;if(!e){if(e=vr(t),e===null)throw Error(C(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Rd(s),t;if(i===r)return Rd(s),e;i=i.sibling}throw Error(C(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(C(189))}}if(n.alternate!==r)throw Error(C(190))}if(n.tag!==3)throw Error(C(188));return n.stateNode.current===n?t:e}function eg(t){return t=iv(t),t!==null?tg(t):null}function tg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tg(t);if(e!==null)return e;t=t.sibling}return null}var ng=ot.unstable_scheduleCallback,Id=ot.unstable_cancelCallback,ov=ot.unstable_shouldYield,av=ot.unstable_requestPaint,ge=ot.unstable_now,lv=ot.unstable_getCurrentPriorityLevel,gu=ot.unstable_ImmediatePriority,rg=ot.unstable_UserBlockingPriority,$o=ot.unstable_NormalPriority,cv=ot.unstable_LowPriority,sg=ot.unstable_IdlePriority,_a=null,Bt=null;function uv(t){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(_a,t,void 0,(t.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:fv,dv=Math.log,hv=Math.LN2;function fv(t){return t>>>=0,t===0?32:31-(dv(t)/hv|0)|0}var Wi=64,Hi=4194304;function Ds(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ds(a):(i&=o,i!==0&&(r=Ds(i)))}else o=n&~s,o!==0?r=Ds(o):i!==0&&(r=Ds(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ot(e),s=1<<n,r|=t[n],e&=~s;return r}function pv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gv(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ot(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=pv(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function oc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ig(){var t=Wi;return Wi<<=1,!(Wi&4194240)&&(Wi=64),t}function nl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Oi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ot(e),t[e]=n}function mv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ot(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function mu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ot(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ne=0;function og(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ag,yu,lg,cg,ug,ac=!1,Vi=[],Sn=null,jn=null,En=null,ai=new Map,li=new Map,gn=[],yv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fd(t,e){switch(t){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":ai.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":li.delete(e.pointerId)}}function vs(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Li(e),e!==null&&yu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vv(t,e,n,r,s){switch(e){case"focusin":return Sn=vs(Sn,t,e,n,r,s),!0;case"dragenter":return jn=vs(jn,t,e,n,r,s),!0;case"mouseover":return En=vs(En,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ai.set(i,vs(ai.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,li.set(i,vs(li.get(i)||null,t,e,n,r,s)),!0}return!1}function dg(t){var e=sr(t.target);if(e!==null){var n=vr(e);if(n!==null){if(e=n.tag,e===13){if(e=Zp(n),e!==null){t.blockedOn=e,ug(t.priority,function(){lg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);nc=r,n.target.dispatchEvent(r),nc=null}else return e=Li(n),e!==null&&yu(e),t.blockedOn=n,!1;e.shift()}return!0}function zd(t,e,n){bo(t)&&n.delete(e)}function xv(){ac=!1,Sn!==null&&bo(Sn)&&(Sn=null),jn!==null&&bo(jn)&&(jn=null),En!==null&&bo(En)&&(En=null),ai.forEach(zd),li.forEach(zd)}function xs(t,e){t.blockedOn===e&&(t.blockedOn=null,ac||(ac=!0,ot.unstable_scheduleCallback(ot.unstable_NormalPriority,xv)))}function ci(t){function e(s){return xs(s,t)}if(0<Vi.length){xs(Vi[0],t);for(var n=1;n<Vi.length;n++){var r=Vi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Sn!==null&&xs(Sn,t),jn!==null&&xs(jn,t),En!==null&&xs(En,t),ai.forEach(e),li.forEach(e),n=0;n<gn.length;n++)r=gn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gn.length&&(n=gn[0],n.blockedOn===null);)dg(n),n.blockedOn===null&&gn.shift()}var Hr=rn.ReactCurrentBatchConfig,Uo=!0;function wv(t,e,n,r){var s=ne,i=Hr.transition;Hr.transition=null;try{ne=1,vu(t,e,n,r)}finally{ne=s,Hr.transition=i}}function _v(t,e,n,r){var s=ne,i=Hr.transition;Hr.transition=null;try{ne=4,vu(t,e,n,r)}finally{ne=s,Hr.transition=i}}function vu(t,e,n,r){if(Uo){var s=lc(t,e,n,r);if(s===null)hl(t,e,r,Wo,n),Fd(t,r);else if(vv(s,t,e,n,r))r.stopPropagation();else if(Fd(t,r),e&4&&-1<yv.indexOf(t)){for(;s!==null;){var i=Li(s);if(i!==null&&ag(i),i=lc(t,e,n,r),i===null&&hl(t,e,r,Wo,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else hl(t,e,r,null,n)}}var Wo=null;function lc(t,e,n,r){if(Wo=null,t=pu(r),t=sr(t),t!==null)if(e=vr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Zp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wo=t,null}function hg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lv()){case gu:return 1;case rg:return 4;case $o:case cv:return 16;case sg:return 536870912;default:return 16}default:return 16}}var vn=null,xu=null,ko=null;function fg(){if(ko)return ko;var t,e=xu,n=e.length,r,s="value"in vn?vn.value:vn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ko=s.slice(t,1<r?1-r:void 0)}function So(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qi(){return!0}function $d(){return!1}function lt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qi:$d,this.isPropagationStopped=$d,this}return he(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qi)},persist:function(){},isPersistent:qi}),e}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wu=lt(ls),Mi=he({},ls,{view:0,detail:0}),bv=lt(Mi),rl,sl,ws,ba=he({},Mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_u,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ws&&(ws&&t.type==="mousemove"?(rl=t.screenX-ws.screenX,sl=t.screenY-ws.screenY):sl=rl=0,ws=t),rl)},movementY:function(t){return"movementY"in t?t.movementY:sl}}),Bd=lt(ba),kv=he({},ba,{dataTransfer:0}),Sv=lt(kv),jv=he({},Mi,{relatedTarget:0}),il=lt(jv),Ev=he({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),Cv=lt(Ev),Pv=he({},ls,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tv=lt(Pv),Nv=he({},ls,{data:0}),Ud=lt(Nv),Ov={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Av(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Lv[t])?!!e[t]:!1}function _u(){return Av}var Dv=he({},Mi,{key:function(t){if(t.key){var e=Ov[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=So(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Mv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_u,charCode:function(t){return t.type==="keypress"?So(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?So(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Rv=lt(Dv),Iv=he({},ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wd=lt(Iv),Fv=he({},Mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_u}),zv=lt(Fv),$v=he({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bv=lt($v),Uv=he({},ba,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Wv=lt(Uv),Hv=[9,13,27,32],bu=Zt&&"CompositionEvent"in window,Ws=null;Zt&&"documentMode"in document&&(Ws=document.documentMode);var Vv=Zt&&"TextEvent"in window&&!Ws,pg=Zt&&(!bu||Ws&&8<Ws&&11>=Ws),Hd=" ",Vd=!1;function gg(t,e){switch(t){case"keyup":return Hv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nr=!1;function qv(t,e){switch(t){case"compositionend":return mg(e);case"keypress":return e.which!==32?null:(Vd=!0,Hd);case"textInput":return t=e.data,t===Hd&&Vd?null:t;default:return null}}function Kv(t,e){if(Nr)return t==="compositionend"||!bu&&gg(t,e)?(t=fg(),ko=xu=vn=null,Nr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pg&&e.locale!=="ko"?null:e.data;default:return null}}var Yv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Yv[t.type]:e==="textarea"}function yg(t,e,n,r){Yp(r),e=Ho(e,"onChange"),0<e.length&&(n=new wu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Hs=null,ui=null;function Qv(t){Pg(t,0)}function ka(t){var e=Lr(t);if(Bp(e))return t}function Gv(t,e){if(t==="change")return e}var vg=!1;if(Zt){var ol;if(Zt){var al="oninput"in document;if(!al){var Kd=document.createElement("div");Kd.setAttribute("oninput","return;"),al=typeof Kd.oninput=="function"}ol=al}else ol=!1;vg=ol&&(!document.documentMode||9<document.documentMode)}function Yd(){Hs&&(Hs.detachEvent("onpropertychange",xg),ui=Hs=null)}function xg(t){if(t.propertyName==="value"&&ka(ui)){var e=[];yg(e,ui,t,pu(t)),Jp(Qv,e)}}function Xv(t,e,n){t==="focusin"?(Yd(),Hs=e,ui=n,Hs.attachEvent("onpropertychange",xg)):t==="focusout"&&Yd()}function Jv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ka(ui)}function Zv(t,e){if(t==="click")return ka(e)}function ex(t,e){if(t==="input"||t==="change")return ka(e)}function tx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Lt=typeof Object.is=="function"?Object.is:tx;function di(t,e){if(Lt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Hl.call(e,s)||!Lt(t[s],e[s]))return!1}return!0}function Qd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gd(t,e){var n=Qd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qd(n)}}function wg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _g(){for(var t=window,e=Io();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Io(t.document)}return e}function ku(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nx(t){var e=_g(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&wg(n.ownerDocument.documentElement,n)){if(r!==null&&ku(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Gd(n,i);var o=Gd(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rx=Zt&&"documentMode"in document&&11>=document.documentMode,Or=null,cc=null,Vs=null,uc=!1;function Xd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uc||Or==null||Or!==Io(r)||(r=Or,"selectionStart"in r&&ku(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vs&&di(Vs,r)||(Vs=r,r=Ho(cc,"onSelect"),0<r.length&&(e=new wu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Or)))}function Ki(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Mr={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionend:Ki("Transition","TransitionEnd")},ll={},bg={};Zt&&(bg=document.createElement("div").style,"AnimationEvent"in window||(delete Mr.animationend.animation,delete Mr.animationiteration.animation,delete Mr.animationstart.animation),"TransitionEvent"in window||delete Mr.transitionend.transition);function Sa(t){if(ll[t])return ll[t];if(!Mr[t])return t;var e=Mr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in bg)return ll[t]=e[n];return t}var kg=Sa("animationend"),Sg=Sa("animationiteration"),jg=Sa("animationstart"),Eg=Sa("transitionend"),Cg=new Map,Jd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bn(t,e){Cg.set(t,e),yr(e,[t])}for(var cl=0;cl<Jd.length;cl++){var ul=Jd[cl],sx=ul.toLowerCase(),ix=ul[0].toUpperCase()+ul.slice(1);Bn(sx,"on"+ix)}Bn(kg,"onAnimationEnd");Bn(Sg,"onAnimationIteration");Bn(jg,"onAnimationStart");Bn("dblclick","onDoubleClick");Bn("focusin","onFocus");Bn("focusout","onBlur");Bn(Eg,"onTransitionEnd");Gr("onMouseEnter",["mouseout","mouseover"]);Gr("onMouseLeave",["mouseout","mouseover"]);Gr("onPointerEnter",["pointerout","pointerover"]);Gr("onPointerLeave",["pointerout","pointerover"]);yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ox=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rs));function Zd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sv(r,e,void 0,t),t.currentTarget=null}function Pg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Zd(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Zd(s,a,c),i=l}}}if(zo)throw t=ic,zo=!1,ic=null,t}function oe(t,e){var n=e[gc];n===void 0&&(n=e[gc]=new Set);var r=t+"__bubble";n.has(r)||(Tg(e,t,2,!1),n.add(r))}function dl(t,e,n){var r=0;e&&(r|=4),Tg(n,t,r,e)}var Yi="_reactListening"+Math.random().toString(36).slice(2);function hi(t){if(!t[Yi]){t[Yi]=!0,Rp.forEach(function(n){n!=="selectionchange"&&(ox.has(n)||dl(n,!1,t),dl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yi]||(e[Yi]=!0,dl("selectionchange",!1,e))}}function Tg(t,e,n,r){switch(hg(e)){case 1:var s=wv;break;case 4:s=_v;break;default:s=vu}n=s.bind(null,e,n,t),s=void 0,!sc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function hl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=sr(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Jp(function(){var c=i,u=pu(n),h=[];e:{var f=Cg.get(t);if(f!==void 0){var p=wu,v=t;switch(t){case"keypress":if(So(n)===0)break e;case"keydown":case"keyup":p=Rv;break;case"focusin":v="focus",p=il;break;case"focusout":v="blur",p=il;break;case"beforeblur":case"afterblur":p=il;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Sv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=zv;break;case kg:case Sg:case jg:p=Cv;break;case Eg:p=Bv;break;case"scroll":p=bv;break;case"wheel":p=Wv;break;case"copy":case"cut":case"paste":p=Tv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Wd}var y=(e&4)!==0,x=!y&&t==="scroll",m=y?f!==null?f+"Capture":null:f;y=[];for(var g=c,w;g!==null;){w=g;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,m!==null&&(_=oi(g,m),_!=null&&y.push(fi(g,_,w)))),x)break;g=g.return}0<y.length&&(f=new p(f,v,null,n,u),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==nc&&(v=n.relatedTarget||n.fromElement)&&(sr(v)||v[en]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=c,v=v?sr(v):null,v!==null&&(x=vr(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=c),p!==v)){if(y=Bd,_="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=Wd,_="onPointerLeave",m="onPointerEnter",g="pointer"),x=p==null?f:Lr(p),w=v==null?f:Lr(v),f=new y(_,g+"leave",p,n,u),f.target=x,f.relatedTarget=w,_=null,sr(u)===c&&(y=new y(m,g+"enter",v,n,u),y.target=w,y.relatedTarget=x,_=y),x=_,p&&v)t:{for(y=p,m=v,g=0,w=y;w;w=_r(w))g++;for(w=0,_=m;_;_=_r(_))w++;for(;0<g-w;)y=_r(y),g--;for(;0<w-g;)m=_r(m),w--;for(;g--;){if(y===m||m!==null&&y===m.alternate)break t;y=_r(y),m=_r(m)}y=null}else y=null;p!==null&&eh(h,f,p,y,!1),v!==null&&x!==null&&eh(h,x,v,y,!0)}}e:{if(f=c?Lr(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=Gv;else if(qd(f))if(vg)S=ex;else{S=Jv;var E=Xv}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Zv);if(S&&(S=S(t,c))){yg(h,S,n,u);break e}E&&E(t,f,c),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Xl(f,"number",f.value)}switch(E=c?Lr(c):window,t){case"focusin":(qd(E)||E.contentEditable==="true")&&(Or=E,cc=c,Vs=null);break;case"focusout":Vs=cc=Or=null;break;case"mousedown":uc=!0;break;case"contextmenu":case"mouseup":case"dragend":uc=!1,Xd(h,n,u);break;case"selectionchange":if(rx)break;case"keydown":case"keyup":Xd(h,n,u)}var k;if(bu)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Nr?gg(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(pg&&n.locale!=="ko"&&(Nr||j!=="onCompositionStart"?j==="onCompositionEnd"&&Nr&&(k=fg()):(vn=u,xu="value"in vn?vn.value:vn.textContent,Nr=!0)),E=Ho(c,j),0<E.length&&(j=new Ud(j,t,null,n,u),h.push({event:j,listeners:E}),k?j.data=k:(k=mg(n),k!==null&&(j.data=k)))),(k=Vv?qv(t,n):Kv(t,n))&&(c=Ho(c,"onBeforeInput"),0<c.length&&(u=new Ud("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=k))}Pg(h,e)})}function fi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ho(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=oi(t,n),i!=null&&r.unshift(fi(t,i,s)),i=oi(t,e),i!=null&&r.push(fi(t,i,s))),t=t.return}return r}function _r(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function eh(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=oi(n,i),l!=null&&o.unshift(fi(n,l,a))):s||(l=oi(n,i),l!=null&&o.push(fi(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ax=/\r\n?/g,lx=/\u0000|\uFFFD/g;function th(t){return(typeof t=="string"?t:""+t).replace(ax,`
`).replace(lx,"")}function Qi(t,e,n){if(e=th(e),th(t)!==e&&n)throw Error(C(425))}function Vo(){}var dc=null,hc=null;function fc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pc=typeof setTimeout=="function"?setTimeout:void 0,cx=typeof clearTimeout=="function"?clearTimeout:void 0,nh=typeof Promise=="function"?Promise:void 0,ux=typeof queueMicrotask=="function"?queueMicrotask:typeof nh<"u"?function(t){return nh.resolve(null).then(t).catch(dx)}:pc;function dx(t){setTimeout(function(){throw t})}function fl(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ci(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ci(e)}function Cn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var cs=Math.random().toString(36).slice(2),$t="__reactFiber$"+cs,pi="__reactProps$"+cs,en="__reactContainer$"+cs,gc="__reactEvents$"+cs,hx="__reactListeners$"+cs,fx="__reactHandles$"+cs;function sr(t){var e=t[$t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[en]||n[$t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rh(t);t!==null;){if(n=t[$t])return n;t=rh(t)}return e}t=n,n=t.parentNode}return null}function Li(t){return t=t[$t]||t[en],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(C(33))}function ja(t){return t[pi]||null}var mc=[],Ar=-1;function Un(t){return{current:t}}function le(t){0>Ar||(t.current=mc[Ar],mc[Ar]=null,Ar--)}function ie(t,e){Ar++,mc[Ar]=t.current,t.current=e}var In={},Be=Un(In),Ze=Un(!1),dr=In;function Xr(t,e){var n=t.type.contextTypes;if(!n)return In;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function et(t){return t=t.childContextTypes,t!=null}function qo(){le(Ze),le(Be)}function sh(t,e,n){if(Be.current!==In)throw Error(C(168));ie(Be,e),ie(Ze,n)}function Ng(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(C(108,Xy(t)||"Unknown",s));return he({},n,r)}function Ko(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||In,dr=Be.current,ie(Be,t),ie(Ze,Ze.current),!0}function ih(t,e,n){var r=t.stateNode;if(!r)throw Error(C(169));n?(t=Ng(t,e,dr),r.__reactInternalMemoizedMergedChildContext=t,le(Ze),le(Be),ie(Be,t)):le(Ze),ie(Ze,n)}var Yt=null,Ea=!1,pl=!1;function Og(t){Yt===null?Yt=[t]:Yt.push(t)}function px(t){Ea=!0,Og(t)}function Wn(){if(!pl&&Yt!==null){pl=!0;var t=0,e=ne;try{var n=Yt;for(ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Yt=null,Ea=!1}catch(s){throw Yt!==null&&(Yt=Yt.slice(t+1)),ng(gu,Wn),s}finally{ne=e,pl=!1}}return null}var Dr=[],Rr=0,Yo=null,Qo=0,dt=[],ht=0,hr=null,Gt=1,Xt="";function Jn(t,e){Dr[Rr++]=Qo,Dr[Rr++]=Yo,Yo=t,Qo=e}function Mg(t,e,n){dt[ht++]=Gt,dt[ht++]=Xt,dt[ht++]=hr,hr=t;var r=Gt;t=Xt;var s=32-Ot(r)-1;r&=~(1<<s),n+=1;var i=32-Ot(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Gt=1<<32-Ot(e)+s|n<<s|r,Xt=i+t}else Gt=1<<i|n<<s|r,Xt=t}function Su(t){t.return!==null&&(Jn(t,1),Mg(t,1,0))}function ju(t){for(;t===Yo;)Yo=Dr[--Rr],Dr[Rr]=null,Qo=Dr[--Rr],Dr[Rr]=null;for(;t===hr;)hr=dt[--ht],dt[ht]=null,Xt=dt[--ht],dt[ht]=null,Gt=dt[--ht],dt[ht]=null}var it=null,st=null,ce=!1,Pt=null;function Lg(t,e){var n=ft(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function oh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,it=t,st=Cn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,it=t,st=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=hr!==null?{id:Gt,overflow:Xt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ft(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,it=t,st=null,!0):!1;default:return!1}}function yc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vc(t){if(ce){var e=st;if(e){var n=e;if(!oh(t,e)){if(yc(t))throw Error(C(418));e=Cn(n.nextSibling);var r=it;e&&oh(t,e)?Lg(r,n):(t.flags=t.flags&-4097|2,ce=!1,it=t)}}else{if(yc(t))throw Error(C(418));t.flags=t.flags&-4097|2,ce=!1,it=t}}}function ah(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;it=t}function Gi(t){if(t!==it)return!1;if(!ce)return ah(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fc(t.type,t.memoizedProps)),e&&(e=st)){if(yc(t))throw Ag(),Error(C(418));for(;e;)Lg(t,e),e=Cn(e.nextSibling)}if(ah(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){st=Cn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}st=null}}else st=it?Cn(t.stateNode.nextSibling):null;return!0}function Ag(){for(var t=st;t;)t=Cn(t.nextSibling)}function Jr(){st=it=null,ce=!1}function Eu(t){Pt===null?Pt=[t]:Pt.push(t)}var gx=rn.ReactCurrentBatchConfig;function _s(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(C(309));var r=n.stateNode}if(!r)throw Error(C(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(C(284));if(!n._owner)throw Error(C(290,t))}return t}function Xi(t,e){throw t=Object.prototype.toString.call(e),Error(C(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lh(t){var e=t._init;return e(t._payload)}function Dg(t){function e(m,g){if(t){var w=m.deletions;w===null?(m.deletions=[g],m.flags|=16):w.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function s(m,g){return m=On(m,g),m.index=0,m.sibling=null,m}function i(m,g,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<g?(m.flags|=2,g):w):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,g,w,_){return g===null||g.tag!==6?(g=_l(w,m.mode,_),g.return=m,g):(g=s(g,w),g.return=m,g)}function l(m,g,w,_){var S=w.type;return S===Tr?u(m,g,w.props.children,_,w.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===hn&&lh(S)===g.type)?(_=s(g,w.props),_.ref=_s(m,g,w),_.return=m,_):(_=Oo(w.type,w.key,w.props,null,m.mode,_),_.ref=_s(m,g,w),_.return=m,_)}function c(m,g,w,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=bl(w,m.mode,_),g.return=m,g):(g=s(g,w.children||[]),g.return=m,g)}function u(m,g,w,_,S){return g===null||g.tag!==7?(g=cr(w,m.mode,_,S),g.return=m,g):(g=s(g,w),g.return=m,g)}function h(m,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=_l(""+g,m.mode,w),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case $i:return w=Oo(g.type,g.key,g.props,null,m.mode,w),w.ref=_s(m,null,g),w.return=m,w;case Pr:return g=bl(g,m.mode,w),g.return=m,g;case hn:var _=g._init;return h(m,_(g._payload),w)}if(As(g)||ms(g))return g=cr(g,m.mode,w,null),g.return=m,g;Xi(m,g)}return null}function f(m,g,w,_){var S=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(m,g,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case $i:return w.key===S?l(m,g,w,_):null;case Pr:return w.key===S?c(m,g,w,_):null;case hn:return S=w._init,f(m,g,S(w._payload),_)}if(As(w)||ms(w))return S!==null?null:u(m,g,w,_,null);Xi(m,w)}return null}function p(m,g,w,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(w)||null,a(g,m,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $i:return m=m.get(_.key===null?w:_.key)||null,l(g,m,_,S);case Pr:return m=m.get(_.key===null?w:_.key)||null,c(g,m,_,S);case hn:var E=_._init;return p(m,g,w,E(_._payload),S)}if(As(_)||ms(_))return m=m.get(w)||null,u(g,m,_,S,null);Xi(g,_)}return null}function v(m,g,w,_){for(var S=null,E=null,k=g,j=g=0,L=null;k!==null&&j<w.length;j++){k.index>j?(L=k,k=null):L=k.sibling;var T=f(m,k,w[j],_);if(T===null){k===null&&(k=L);break}t&&k&&T.alternate===null&&e(m,k),g=i(T,g,j),E===null?S=T:E.sibling=T,E=T,k=L}if(j===w.length)return n(m,k),ce&&Jn(m,j),S;if(k===null){for(;j<w.length;j++)k=h(m,w[j],_),k!==null&&(g=i(k,g,j),E===null?S=k:E.sibling=k,E=k);return ce&&Jn(m,j),S}for(k=r(m,k);j<w.length;j++)L=p(k,m,j,w[j],_),L!==null&&(t&&L.alternate!==null&&k.delete(L.key===null?j:L.key),g=i(L,g,j),E===null?S=L:E.sibling=L,E=L);return t&&k.forEach(function(P){return e(m,P)}),ce&&Jn(m,j),S}function y(m,g,w,_){var S=ms(w);if(typeof S!="function")throw Error(C(150));if(w=S.call(w),w==null)throw Error(C(151));for(var E=S=null,k=g,j=g=0,L=null,T=w.next();k!==null&&!T.done;j++,T=w.next()){k.index>j?(L=k,k=null):L=k.sibling;var P=f(m,k,T.value,_);if(P===null){k===null&&(k=L);break}t&&k&&P.alternate===null&&e(m,k),g=i(P,g,j),E===null?S=P:E.sibling=P,E=P,k=L}if(T.done)return n(m,k),ce&&Jn(m,j),S;if(k===null){for(;!T.done;j++,T=w.next())T=h(m,T.value,_),T!==null&&(g=i(T,g,j),E===null?S=T:E.sibling=T,E=T);return ce&&Jn(m,j),S}for(k=r(m,k);!T.done;j++,T=w.next())T=p(k,m,j,T.value,_),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?j:T.key),g=i(T,g,j),E===null?S=T:E.sibling=T,E=T);return t&&k.forEach(function(O){return e(m,O)}),ce&&Jn(m,j),S}function x(m,g,w,_){if(typeof w=="object"&&w!==null&&w.type===Tr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case $i:e:{for(var S=w.key,E=g;E!==null;){if(E.key===S){if(S=w.type,S===Tr){if(E.tag===7){n(m,E.sibling),g=s(E,w.props.children),g.return=m,m=g;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===hn&&lh(S)===E.type){n(m,E.sibling),g=s(E,w.props),g.ref=_s(m,E,w),g.return=m,m=g;break e}n(m,E);break}else e(m,E);E=E.sibling}w.type===Tr?(g=cr(w.props.children,m.mode,_,w.key),g.return=m,m=g):(_=Oo(w.type,w.key,w.props,null,m.mode,_),_.ref=_s(m,g,w),_.return=m,m=_)}return o(m);case Pr:e:{for(E=w.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(m,g.sibling),g=s(g,w.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=bl(w,m.mode,_),g.return=m,m=g}return o(m);case hn:return E=w._init,x(m,g,E(w._payload),_)}if(As(w))return v(m,g,w,_);if(ms(w))return y(m,g,w,_);Xi(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(m,g.sibling),g=s(g,w),g.return=m,m=g):(n(m,g),g=_l(w,m.mode,_),g.return=m,m=g),o(m)):n(m,g)}return x}var Zr=Dg(!0),Rg=Dg(!1),Go=Un(null),Xo=null,Ir=null,Cu=null;function Pu(){Cu=Ir=Xo=null}function Tu(t){var e=Go.current;le(Go),t._currentValue=e}function xc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Vr(t,e){Xo=t,Cu=Ir=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Je=!0),t.firstContext=null)}function yt(t){var e=t._currentValue;if(Cu!==t)if(t={context:t,memoizedValue:e,next:null},Ir===null){if(Xo===null)throw Error(C(308));Ir=t,Xo.dependencies={lanes:0,firstContext:t}}else Ir=Ir.next=t;return e}var ir=null;function Nu(t){ir===null?ir=[t]:ir.push(t)}function Ig(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Nu(e)):(n.next=s.next,s.next=n),e.interleaved=n,tn(t,r)}function tn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fn=!1;function Ou(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Pn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,X&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,tn(t,n)}return s=r.interleaved,s===null?(e.next=e,Nu(r)):(e.next=s.next,s.next=e),r.interleaved=e,tn(t,n)}function jo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mu(t,n)}}function ch(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Jo(t,e,n,r){var s=t.updateQueue;fn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,y=a;switch(f=e,p=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(p,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(p,h,f):v,f==null)break e;h=he({},h,f);break e;case 2:fn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);pr|=o,t.lanes=o,t.memoizedState=h}}function uh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(C(191,s));s.call(r)}}}var Ai={},Ut=Un(Ai),gi=Un(Ai),mi=Un(Ai);function or(t){if(t===Ai)throw Error(C(174));return t}function Mu(t,e){switch(ie(mi,e),ie(gi,t),ie(Ut,Ai),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zl(e,t)}le(Ut),ie(Ut,e)}function es(){le(Ut),le(gi),le(mi)}function zg(t){or(mi.current);var e=or(Ut.current),n=Zl(e,t.type);e!==n&&(ie(gi,t),ie(Ut,n))}function Lu(t){gi.current===t&&(le(Ut),le(gi))}var ue=Un(0);function Zo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gl=[];function Au(){for(var t=0;t<gl.length;t++)gl[t]._workInProgressVersionPrimary=null;gl.length=0}var Eo=rn.ReactCurrentDispatcher,ml=rn.ReactCurrentBatchConfig,fr=0,de=null,we=null,Se=null,ea=!1,qs=!1,yi=0,mx=0;function Ae(){throw Error(C(321))}function Du(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Lt(t[n],e[n]))return!1;return!0}function Ru(t,e,n,r,s,i){if(fr=i,de=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Eo.current=t===null||t.memoizedState===null?wx:_x,t=n(r,s),qs){i=0;do{if(qs=!1,yi=0,25<=i)throw Error(C(301));i+=1,Se=we=null,e.updateQueue=null,Eo.current=bx,t=n(r,s)}while(qs)}if(Eo.current=ta,e=we!==null&&we.next!==null,fr=0,Se=we=de=null,ea=!1,e)throw Error(C(300));return t}function Iu(){var t=yi!==0;return yi=0,t}function Ft(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?de.memoizedState=Se=t:Se=Se.next=t,Se}function vt(){if(we===null){var t=de.alternate;t=t!==null?t.memoizedState:null}else t=we.next;var e=Se===null?de.memoizedState:Se.next;if(e!==null)Se=e,we=t;else{if(t===null)throw Error(C(310));we=t,t={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},Se===null?de.memoizedState=Se=t:Se=Se.next=t}return Se}function vi(t,e){return typeof e=="function"?e(t):e}function yl(t){var e=vt(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=we,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((fr&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,de.lanes|=u,pr|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Lt(r,e.memoizedState)||(Je=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,de.lanes|=i,pr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vl(t){var e=vt(),n=e.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Lt(i,e.memoizedState)||(Je=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function $g(){}function Bg(t,e){var n=de,r=vt(),s=e(),i=!Lt(r.memoizedState,s);if(i&&(r.memoizedState=s,Je=!0),r=r.queue,Fu(Hg.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Se!==null&&Se.memoizedState.tag&1){if(n.flags|=2048,xi(9,Wg.bind(null,n,r,s,e),void 0,null),je===null)throw Error(C(349));fr&30||Ug(n,e,s)}return s}function Ug(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Wg(t,e,n,r){e.value=n,e.getSnapshot=r,Vg(e)&&qg(t)}function Hg(t,e,n){return n(function(){Vg(e)&&qg(t)})}function Vg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Lt(t,n)}catch{return!0}}function qg(t){var e=tn(t,1);e!==null&&Mt(e,t,1,-1)}function dh(t){var e=Ft();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:t},e.queue=t,t=t.dispatch=xx.bind(null,de,t),[e.memoizedState,t]}function xi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Kg(){return vt().memoizedState}function Co(t,e,n,r){var s=Ft();de.flags|=t,s.memoizedState=xi(1|e,n,void 0,r===void 0?null:r)}function Ca(t,e,n,r){var s=vt();r=r===void 0?null:r;var i=void 0;if(we!==null){var o=we.memoizedState;if(i=o.destroy,r!==null&&Du(r,o.deps)){s.memoizedState=xi(e,n,i,r);return}}de.flags|=t,s.memoizedState=xi(1|e,n,i,r)}function hh(t,e){return Co(8390656,8,t,e)}function Fu(t,e){return Ca(2048,8,t,e)}function Yg(t,e){return Ca(4,2,t,e)}function Qg(t,e){return Ca(4,4,t,e)}function Gg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xg(t,e,n){return n=n!=null?n.concat([t]):null,Ca(4,4,Gg.bind(null,e,t),n)}function zu(){}function Jg(t,e){var n=vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Du(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Zg(t,e){var n=vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Du(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function em(t,e,n){return fr&21?(Lt(n,e)||(n=ig(),de.lanes|=n,pr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Je=!0),t.memoizedState=n)}function yx(t,e){var n=ne;ne=n!==0&&4>n?n:4,t(!0);var r=ml.transition;ml.transition={};try{t(!1),e()}finally{ne=n,ml.transition=r}}function tm(){return vt().memoizedState}function vx(t,e,n){var r=Nn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},nm(t))rm(e,n);else if(n=Ig(t,e,n,r),n!==null){var s=He();Mt(n,t,r,s),sm(n,e,r)}}function xx(t,e,n){var r=Nn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(nm(t))rm(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Lt(a,o)){var l=e.interleaved;l===null?(s.next=s,Nu(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Ig(t,e,s,r),n!==null&&(s=He(),Mt(n,t,r,s),sm(n,e,r))}}function nm(t){var e=t.alternate;return t===de||e!==null&&e===de}function rm(t,e){qs=ea=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mu(t,n)}}var ta={readContext:yt,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useInsertionEffect:Ae,useLayoutEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useMutableSource:Ae,useSyncExternalStore:Ae,useId:Ae,unstable_isNewReconciler:!1},wx={readContext:yt,useCallback:function(t,e){return Ft().memoizedState=[t,e===void 0?null:e],t},useContext:yt,useEffect:hh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Co(4194308,4,Gg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Co(4194308,4,t,e)},useInsertionEffect:function(t,e){return Co(4,2,t,e)},useMemo:function(t,e){var n=Ft();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ft();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vx.bind(null,de,t),[r.memoizedState,t]},useRef:function(t){var e=Ft();return t={current:t},e.memoizedState=t},useState:dh,useDebugValue:zu,useDeferredValue:function(t){return Ft().memoizedState=t},useTransition:function(){var t=dh(!1),e=t[0];return t=yx.bind(null,t[1]),Ft().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=de,s=Ft();if(ce){if(n===void 0)throw Error(C(407));n=n()}else{if(n=e(),je===null)throw Error(C(349));fr&30||Ug(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,hh(Hg.bind(null,r,i,t),[t]),r.flags|=2048,xi(9,Wg.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ft(),e=je.identifierPrefix;if(ce){var n=Xt,r=Gt;n=(r&~(1<<32-Ot(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=yi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_x={readContext:yt,useCallback:Jg,useContext:yt,useEffect:Fu,useImperativeHandle:Xg,useInsertionEffect:Yg,useLayoutEffect:Qg,useMemo:Zg,useReducer:yl,useRef:Kg,useState:function(){return yl(vi)},useDebugValue:zu,useDeferredValue:function(t){var e=vt();return em(e,we.memoizedState,t)},useTransition:function(){var t=yl(vi)[0],e=vt().memoizedState;return[t,e]},useMutableSource:$g,useSyncExternalStore:Bg,useId:tm,unstable_isNewReconciler:!1},bx={readContext:yt,useCallback:Jg,useContext:yt,useEffect:Fu,useImperativeHandle:Xg,useInsertionEffect:Yg,useLayoutEffect:Qg,useMemo:Zg,useReducer:vl,useRef:Kg,useState:function(){return vl(vi)},useDebugValue:zu,useDeferredValue:function(t){var e=vt();return we===null?e.memoizedState=t:em(e,we.memoizedState,t)},useTransition:function(){var t=vl(vi)[0],e=vt().memoizedState;return[t,e]},useMutableSource:$g,useSyncExternalStore:Bg,useId:tm,unstable_isNewReconciler:!1};function jt(t,e){if(t&&t.defaultProps){e=he({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:he({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pa={isMounted:function(t){return(t=t._reactInternals)?vr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=He(),s=Nn(t),i=Jt(r,s);i.payload=e,n!=null&&(i.callback=n),e=Pn(t,i,s),e!==null&&(Mt(e,t,s,r),jo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=He(),s=Nn(t),i=Jt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Pn(t,i,s),e!==null&&(Mt(e,t,s,r),jo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=He(),r=Nn(t),s=Jt(n,r);s.tag=2,e!=null&&(s.callback=e),e=Pn(t,s,r),e!==null&&(Mt(e,t,r,n),jo(e,t,r))}};function fh(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!di(n,r)||!di(s,i):!0}function im(t,e,n){var r=!1,s=In,i=e.contextType;return typeof i=="object"&&i!==null?i=yt(i):(s=et(e)?dr:Be.current,r=e.contextTypes,i=(r=r!=null)?Xr(t,s):In),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ph(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pa.enqueueReplaceState(e,e.state,null)}function _c(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ou(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=yt(i):(i=et(e)?dr:Be.current,s.context=Xr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(wc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Pa.enqueueReplaceState(s,s.state,null),Jo(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ts(t,e){try{var n="",r=e;do n+=Gy(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function xl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var kx=typeof WeakMap=="function"?WeakMap:Map;function om(t,e,n){n=Jt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ra||(ra=!0,Mc=r),bc(t,e)},n}function am(t,e,n){n=Jt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bc(t,e),typeof r!="function"&&(Tn===null?Tn=new Set([this]):Tn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new kx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Ix.bind(null,t,e,n),e.then(t,t))}function mh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yh(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Jt(-1,1),e.tag=2,Pn(n,e,1))),n.lanes|=1),t)}var Sx=rn.ReactCurrentOwner,Je=!1;function We(t,e,n,r){e.child=t===null?Rg(e,null,n,r):Zr(e,t.child,n,r)}function vh(t,e,n,r,s){n=n.render;var i=e.ref;return Vr(e,s),r=Ru(t,e,n,r,i,s),n=Iu(),t!==null&&!Je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nn(t,e,s)):(ce&&n&&Su(e),e.flags|=1,We(t,e,r,s),e.child)}function xh(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ku(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,lm(t,e,i,r,s)):(t=Oo(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:di,n(o,r)&&t.ref===e.ref)return nn(t,e,s)}return e.flags|=1,t=On(i,r),t.ref=e.ref,t.return=e,e.child=t}function lm(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(di(i,r)&&t.ref===e.ref)if(Je=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Je=!0);else return e.lanes=t.lanes,nn(t,e,s)}return kc(t,e,n,r,s)}function cm(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(zr,rt),rt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ie(zr,rt),rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ie(zr,rt),rt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ie(zr,rt),rt|=r;return We(t,e,s,n),e.child}function um(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kc(t,e,n,r,s){var i=et(n)?dr:Be.current;return i=Xr(e,i),Vr(e,s),n=Ru(t,e,n,r,i,s),r=Iu(),t!==null&&!Je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nn(t,e,s)):(ce&&r&&Su(e),e.flags|=1,We(t,e,n,s),e.child)}function wh(t,e,n,r,s){if(et(n)){var i=!0;Ko(e)}else i=!1;if(Vr(e,s),e.stateNode===null)Po(t,e),im(e,n,r),_c(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=yt(c):(c=et(n)?dr:Be.current,c=Xr(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ph(e,o,r,c),fn=!1;var f=e.memoizedState;o.state=f,Jo(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Ze.current||fn?(typeof u=="function"&&(wc(e,n,u,r),l=e.memoizedState),(a=fn||fh(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Fg(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:jt(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=yt(l):(l=et(n)?dr:Be.current,l=Xr(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&ph(e,o,r,l),fn=!1,f=e.memoizedState,o.state=f,Jo(e,r,o,s);var v=e.memoizedState;a!==h||f!==v||Ze.current||fn?(typeof p=="function"&&(wc(e,n,p,r),v=e.memoizedState),(c=fn||fh(e,n,c,r,f,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Sc(t,e,n,r,i,s)}function Sc(t,e,n,r,s,i){um(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ih(e,n,!1),nn(t,e,i);r=e.stateNode,Sx.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zr(e,t.child,null,i),e.child=Zr(e,null,a,i)):We(t,e,a,i),e.memoizedState=r.state,s&&ih(e,n,!0),e.child}function dm(t){var e=t.stateNode;e.pendingContext?sh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sh(t,e.context,!1),Mu(t,e.containerInfo)}function _h(t,e,n,r,s){return Jr(),Eu(s),e.flags|=256,We(t,e,n,r),e.child}var jc={dehydrated:null,treeContext:null,retryLane:0};function Ec(t){return{baseLanes:t,cachePool:null,transitions:null}}function hm(t,e,n){var r=e.pendingProps,s=ue.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ie(ue,s&1),t===null)return vc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Oa(o,r,0,null),t=cr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ec(n),e.memoizedState=jc,t):$u(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return jx(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=On(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=On(a,i):(i=cr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ec(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=jc,r}return i=t.child,t=i.sibling,r=On(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $u(t,e){return e=Oa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ji(t,e,n,r){return r!==null&&Eu(r),Zr(e,t.child,null,n),t=$u(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jx(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=xl(Error(C(422))),Ji(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Oa({mode:"visible",children:r.children},s,0,null),i=cr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Zr(e,t.child,null,o),e.child.memoizedState=Ec(o),e.memoizedState=jc,i);if(!(e.mode&1))return Ji(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(C(419)),r=xl(i,r,void 0),Ji(t,e,o,r)}if(a=(o&t.childLanes)!==0,Je||a){if(r=je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,tn(t,s),Mt(r,t,s,-1))}return qu(),r=xl(Error(C(421))),Ji(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Fx.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,st=Cn(s.nextSibling),it=e,ce=!0,Pt=null,t!==null&&(dt[ht++]=Gt,dt[ht++]=Xt,dt[ht++]=hr,Gt=t.id,Xt=t.overflow,hr=e),e=$u(e,r.children),e.flags|=4096,e)}function bh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xc(t.return,e,n)}function wl(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function fm(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(We(t,e,r.children,n),r=ue.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bh(t,n,e);else if(t.tag===19)bh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ie(ue,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Zo(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),wl(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Zo(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}wl(e,!0,n,null,i);break;case"together":wl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Po(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(C(153));if(e.child!==null){for(t=e.child,n=On(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=On(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ex(t,e,n){switch(e.tag){case 3:dm(e),Jr();break;case 5:zg(e);break;case 1:et(e.type)&&Ko(e);break;case 4:Mu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ie(Go,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ie(ue,ue.current&1),e.flags|=128,null):n&e.child.childLanes?hm(t,e,n):(ie(ue,ue.current&1),t=nn(t,e,n),t!==null?t.sibling:null);ie(ue,ue.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return fm(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ie(ue,ue.current),r)break;return null;case 22:case 23:return e.lanes=0,cm(t,e,n)}return nn(t,e,n)}var pm,Cc,gm,mm;pm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cc=function(){};gm=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,or(Ut.current);var i=null;switch(n){case"input":s=Ql(t,s),r=Ql(t,r),i=[];break;case"select":s=he({},s,{value:void 0}),r=he({},r,{value:void 0}),i=[];break;case"textarea":s=Jl(t,s),r=Jl(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vo)}ec(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(si.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(si.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&oe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};mm=function(t,e,n,r){n!==r&&(e.flags|=4)};function bs(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function De(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Cx(t,e,n){var r=e.pendingProps;switch(ju(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(e),null;case 1:return et(e.type)&&qo(),De(e),null;case 3:return r=e.stateNode,es(),le(Ze),le(Be),Au(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pt!==null&&(Dc(Pt),Pt=null))),Cc(t,e),De(e),null;case 5:Lu(e);var s=or(mi.current);if(n=e.type,t!==null&&e.stateNode!=null)gm(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(C(166));return De(e),null}if(t=or(Ut.current),Gi(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$t]=e,r[pi]=i,t=(e.mode&1)!==0,n){case"dialog":oe("cancel",r),oe("close",r);break;case"iframe":case"object":case"embed":oe("load",r);break;case"video":case"audio":for(s=0;s<Rs.length;s++)oe(Rs[s],r);break;case"source":oe("error",r);break;case"img":case"image":case"link":oe("error",r),oe("load",r);break;case"details":oe("toggle",r);break;case"input":Od(r,i),oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},oe("invalid",r);break;case"textarea":Ld(r,i),oe("invalid",r)}ec(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Qi(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Qi(r.textContent,a,t),s=["children",""+a]):si.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&oe("scroll",r)}switch(n){case"input":Bi(r),Md(r,i,!0);break;case"textarea":Bi(r),Ad(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Vo)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Hp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$t]=e,t[pi]=r,pm(t,e,!1,!1),e.stateNode=t;e:{switch(o=tc(n,r),n){case"dialog":oe("cancel",t),oe("close",t),s=r;break;case"iframe":case"object":case"embed":oe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Rs.length;s++)oe(Rs[s],t);s=r;break;case"source":oe("error",t),s=r;break;case"img":case"image":case"link":oe("error",t),oe("load",t),s=r;break;case"details":oe("toggle",t),s=r;break;case"input":Od(t,r),s=Ql(t,r),oe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=he({},r,{value:void 0}),oe("invalid",t);break;case"textarea":Ld(t,r),s=Jl(t,r),oe("invalid",t);break;default:s=r}ec(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Kp(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Vp(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ii(t,l):typeof l=="number"&&ii(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(si.hasOwnProperty(i)?l!=null&&i==="onScroll"&&oe("scroll",t):l!=null&&uu(t,i,l,o))}switch(n){case"input":Bi(t),Md(t,r,!1);break;case"textarea":Bi(t),Ad(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Rn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Br(t,!!r.multiple,i,!1):r.defaultValue!=null&&Br(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Vo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return De(e),null;case 6:if(t&&e.stateNode!=null)mm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(C(166));if(n=or(mi.current),or(Ut.current),Gi(e)){if(r=e.stateNode,n=e.memoizedProps,r[$t]=e,(i=r.nodeValue!==n)&&(t=it,t!==null))switch(t.tag){case 3:Qi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qi(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$t]=e,e.stateNode=r}return De(e),null;case 13:if(le(ue),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&st!==null&&e.mode&1&&!(e.flags&128))Ag(),Jr(),e.flags|=98560,i=!1;else if(i=Gi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(C(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(C(317));i[$t]=e}else Jr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),i=!1}else Pt!==null&&(Dc(Pt),Pt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ue.current&1?be===0&&(be=3):qu())),e.updateQueue!==null&&(e.flags|=4),De(e),null);case 4:return es(),Cc(t,e),t===null&&hi(e.stateNode.containerInfo),De(e),null;case 10:return Tu(e.type._context),De(e),null;case 17:return et(e.type)&&qo(),De(e),null;case 19:if(le(ue),i=e.memoizedState,i===null)return De(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)bs(i,!1);else{if(be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Zo(t),o!==null){for(e.flags|=128,bs(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ie(ue,ue.current&1|2),e.child}t=t.sibling}i.tail!==null&&ge()>ns&&(e.flags|=128,r=!0,bs(i,!1),e.lanes=4194304)}else{if(!r)if(t=Zo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ce)return De(e),null}else 2*ge()-i.renderingStartTime>ns&&n!==1073741824&&(e.flags|=128,r=!0,bs(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ge(),e.sibling=null,n=ue.current,ie(ue,r?n&1|2:n&1),e):(De(e),null);case 22:case 23:return Vu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rt&1073741824&&(De(e),e.subtreeFlags&6&&(e.flags|=8192)):De(e),null;case 24:return null;case 25:return null}throw Error(C(156,e.tag))}function Px(t,e){switch(ju(e),e.tag){case 1:return et(e.type)&&qo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return es(),le(Ze),le(Be),Au(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lu(e),null;case 13:if(le(ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(C(340));Jr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return le(ue),null;case 4:return es(),null;case 10:return Tu(e.type._context),null;case 22:case 23:return Vu(),null;case 24:return null;default:return null}}var Zi=!1,Ie=!1,Tx=typeof WeakSet=="function"?WeakSet:Set,D=null;function Fr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pe(t,e,r)}else n.current=null}function Pc(t,e,n){try{n()}catch(r){pe(t,e,r)}}var kh=!1;function Nx(t,e){if(dc=Uo,t=_g(),ku(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++u===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(hc={focusedElem:t,selectionRange:n},Uo=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,x=v.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:jt(e.type,y),x);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(_){pe(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return v=kh,kh=!1,v}function Ks(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Pc(e,n,i)}s=s.next}while(s!==r)}}function Ta(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Tc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ym(t){var e=t.alternate;e!==null&&(t.alternate=null,ym(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$t],delete e[pi],delete e[gc],delete e[hx],delete e[fx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vm(t){return t.tag===5||t.tag===3||t.tag===4}function Sh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vo));else if(r!==4&&(t=t.child,t!==null))for(Nc(t,e,n),t=t.sibling;t!==null;)Nc(t,e,n),t=t.sibling}function Oc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Oc(t,e,n),t=t.sibling;t!==null;)Oc(t,e,n),t=t.sibling}var Ne=null,Et=!1;function on(t,e,n){for(n=n.child;n!==null;)xm(t,e,n),n=n.sibling}function xm(t,e,n){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(_a,n)}catch{}switch(n.tag){case 5:Ie||Fr(n,e);case 6:var r=Ne,s=Et;Ne=null,on(t,e,n),Ne=r,Et=s,Ne!==null&&(Et?(t=Ne,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ne.removeChild(n.stateNode));break;case 18:Ne!==null&&(Et?(t=Ne,n=n.stateNode,t.nodeType===8?fl(t.parentNode,n):t.nodeType===1&&fl(t,n),ci(t)):fl(Ne,n.stateNode));break;case 4:r=Ne,s=Et,Ne=n.stateNode.containerInfo,Et=!0,on(t,e,n),Ne=r,Et=s;break;case 0:case 11:case 14:case 15:if(!Ie&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Pc(n,e,o),s=s.next}while(s!==r)}on(t,e,n);break;case 1:if(!Ie&&(Fr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pe(n,e,a)}on(t,e,n);break;case 21:on(t,e,n);break;case 22:n.mode&1?(Ie=(r=Ie)||n.memoizedState!==null,on(t,e,n),Ie=r):on(t,e,n);break;default:on(t,e,n)}}function jh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Tx),e.forEach(function(r){var s=zx.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function St(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ne=a.stateNode,Et=!1;break e;case 3:Ne=a.stateNode.containerInfo,Et=!0;break e;case 4:Ne=a.stateNode.containerInfo,Et=!0;break e}a=a.return}if(Ne===null)throw Error(C(160));xm(i,o,s),Ne=null,Et=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){pe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wm(e,t),e=e.sibling}function wm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(St(e,t),At(t),r&4){try{Ks(3,t,t.return),Ta(3,t)}catch(y){pe(t,t.return,y)}try{Ks(5,t,t.return)}catch(y){pe(t,t.return,y)}}break;case 1:St(e,t),At(t),r&512&&n!==null&&Fr(n,n.return);break;case 5:if(St(e,t),At(t),r&512&&n!==null&&Fr(n,n.return),t.flags&32){var s=t.stateNode;try{ii(s,"")}catch(y){pe(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Up(s,i),tc(a,o);var c=tc(a,i);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?Kp(s,h):u==="dangerouslySetInnerHTML"?Vp(s,h):u==="children"?ii(s,h):uu(s,u,h,c)}switch(a){case"input":Gl(s,i);break;case"textarea":Wp(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Br(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Br(s,!!i.multiple,i.defaultValue,!0):Br(s,!!i.multiple,i.multiple?[]:"",!1))}s[pi]=i}catch(y){pe(t,t.return,y)}}break;case 6:if(St(e,t),At(t),r&4){if(t.stateNode===null)throw Error(C(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){pe(t,t.return,y)}}break;case 3:if(St(e,t),At(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ci(e.containerInfo)}catch(y){pe(t,t.return,y)}break;case 4:St(e,t),At(t);break;case 13:St(e,t),At(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Wu=ge())),r&4&&jh(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ie=(c=Ie)||u,St(e,t),Ie=c):St(e,t),At(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(D=t,u=t.child;u!==null;){for(h=D=u;D!==null;){switch(f=D,p=f.child,f.tag){case 0:case 11:case 14:case 15:Ks(4,f,f.return);break;case 1:Fr(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){pe(r,n,y)}}break;case 5:Fr(f,f.return);break;case 22:if(f.memoizedState!==null){Ch(h);continue}}p!==null?(p.return=f,D=p):Ch(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=qp("display",o))}catch(y){pe(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){pe(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:St(e,t),At(t),r&4&&jh(t);break;case 21:break;default:St(e,t),At(t)}}function At(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(vm(n)){var r=n;break e}n=n.return}throw Error(C(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ii(s,""),r.flags&=-33);var i=Sh(t);Oc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Sh(t);Nc(t,a,o);break;default:throw Error(C(161))}}catch(l){pe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ox(t,e,n){D=t,_m(t)}function _m(t,e,n){for(var r=(t.mode&1)!==0;D!==null;){var s=D,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Zi;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ie;a=Zi;var c=Ie;if(Zi=o,(Ie=l)&&!c)for(D=s;D!==null;)o=D,l=o.child,o.tag===22&&o.memoizedState!==null?Ph(s):l!==null?(l.return=o,D=l):Ph(s);for(;i!==null;)D=i,_m(i),i=i.sibling;D=s,Zi=a,Ie=c}Eh(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,D=i):Eh(t)}}function Eh(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ie||Ta(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ie)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:jt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&uh(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}uh(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&ci(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}Ie||e.flags&512&&Tc(e)}catch(f){pe(e,e.return,f)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function Ch(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function Ph(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ta(4,e)}catch(l){pe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){pe(e,s,l)}}var i=e.return;try{Tc(e)}catch(l){pe(e,i,l)}break;case 5:var o=e.return;try{Tc(e)}catch(l){pe(e,o,l)}}}catch(l){pe(e,e.return,l)}if(e===t){D=null;break}var a=e.sibling;if(a!==null){a.return=e.return,D=a;break}D=e.return}}var Mx=Math.ceil,na=rn.ReactCurrentDispatcher,Bu=rn.ReactCurrentOwner,gt=rn.ReactCurrentBatchConfig,X=0,je=null,xe=null,Oe=0,rt=0,zr=Un(0),be=0,wi=null,pr=0,Na=0,Uu=0,Ys=null,Qe=null,Wu=0,ns=1/0,qt=null,ra=!1,Mc=null,Tn=null,eo=!1,xn=null,sa=0,Qs=0,Lc=null,To=-1,No=0;function He(){return X&6?ge():To!==-1?To:To=ge()}function Nn(t){return t.mode&1?X&2&&Oe!==0?Oe&-Oe:gx.transition!==null?(No===0&&(No=ig()),No):(t=ne,t!==0||(t=window.event,t=t===void 0?16:hg(t.type)),t):1}function Mt(t,e,n,r){if(50<Qs)throw Qs=0,Lc=null,Error(C(185));Oi(t,n,r),(!(X&2)||t!==je)&&(t===je&&(!(X&2)&&(Na|=n),be===4&&mn(t,Oe)),tt(t,r),n===1&&X===0&&!(e.mode&1)&&(ns=ge()+500,Ea&&Wn()))}function tt(t,e){var n=t.callbackNode;gv(t,e);var r=Bo(t,t===je?Oe:0);if(r===0)n!==null&&Id(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Id(n),e===1)t.tag===0?px(Th.bind(null,t)):Og(Th.bind(null,t)),ux(function(){!(X&6)&&Wn()}),n=null;else{switch(og(r)){case 1:n=gu;break;case 4:n=rg;break;case 16:n=$o;break;case 536870912:n=sg;break;default:n=$o}n=Tm(n,bm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bm(t,e){if(To=-1,No=0,X&6)throw Error(C(327));var n=t.callbackNode;if(qr()&&t.callbackNode!==n)return null;var r=Bo(t,t===je?Oe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ia(t,r);else{e=r;var s=X;X|=2;var i=Sm();(je!==t||Oe!==e)&&(qt=null,ns=ge()+500,lr(t,e));do try{Dx();break}catch(a){km(t,a)}while(!0);Pu(),na.current=i,X=s,xe!==null?e=0:(je=null,Oe=0,e=be)}if(e!==0){if(e===2&&(s=oc(t),s!==0&&(r=s,e=Ac(t,s))),e===1)throw n=wi,lr(t,0),mn(t,r),tt(t,ge()),n;if(e===6)mn(t,r);else{if(s=t.current.alternate,!(r&30)&&!Lx(s)&&(e=ia(t,r),e===2&&(i=oc(t),i!==0&&(r=i,e=Ac(t,i))),e===1))throw n=wi,lr(t,0),mn(t,r),tt(t,ge()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(C(345));case 2:Zn(t,Qe,qt);break;case 3:if(mn(t,r),(r&130023424)===r&&(e=Wu+500-ge(),10<e)){if(Bo(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){He(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=pc(Zn.bind(null,t,Qe,qt),e);break}Zn(t,Qe,qt);break;case 4:if(mn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ot(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Mx(r/1960))-r,10<r){t.timeoutHandle=pc(Zn.bind(null,t,Qe,qt),r);break}Zn(t,Qe,qt);break;case 5:Zn(t,Qe,qt);break;default:throw Error(C(329))}}}return tt(t,ge()),t.callbackNode===n?bm.bind(null,t):null}function Ac(t,e){var n=Ys;return t.current.memoizedState.isDehydrated&&(lr(t,e).flags|=256),t=ia(t,e),t!==2&&(e=Qe,Qe=n,e!==null&&Dc(e)),t}function Dc(t){Qe===null?Qe=t:Qe.push.apply(Qe,t)}function Lx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Lt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mn(t,e){for(e&=~Uu,e&=~Na,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ot(e),r=1<<n;t[n]=-1,e&=~r}}function Th(t){if(X&6)throw Error(C(327));qr();var e=Bo(t,0);if(!(e&1))return tt(t,ge()),null;var n=ia(t,e);if(t.tag!==0&&n===2){var r=oc(t);r!==0&&(e=r,n=Ac(t,r))}if(n===1)throw n=wi,lr(t,0),mn(t,e),tt(t,ge()),n;if(n===6)throw Error(C(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zn(t,Qe,qt),tt(t,ge()),null}function Hu(t,e){var n=X;X|=1;try{return t(e)}finally{X=n,X===0&&(ns=ge()+500,Ea&&Wn())}}function gr(t){xn!==null&&xn.tag===0&&!(X&6)&&qr();var e=X;X|=1;var n=gt.transition,r=ne;try{if(gt.transition=null,ne=1,t)return t()}finally{ne=r,gt.transition=n,X=e,!(X&6)&&Wn()}}function Vu(){rt=zr.current,le(zr)}function lr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cx(n)),xe!==null)for(n=xe.return;n!==null;){var r=n;switch(ju(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qo();break;case 3:es(),le(Ze),le(Be),Au();break;case 5:Lu(r);break;case 4:es();break;case 13:le(ue);break;case 19:le(ue);break;case 10:Tu(r.type._context);break;case 22:case 23:Vu()}n=n.return}if(je=t,xe=t=On(t.current,null),Oe=rt=e,be=0,wi=null,Uu=Na=pr=0,Qe=Ys=null,ir!==null){for(e=0;e<ir.length;e++)if(n=ir[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ir=null}return t}function km(t,e){do{var n=xe;try{if(Pu(),Eo.current=ta,ea){for(var r=de.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ea=!1}if(fr=0,Se=we=de=null,qs=!1,yi=0,Bu.current=null,n===null||n.return===null){be=1,wi=e,xe=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Oe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=mh(o);if(p!==null){p.flags&=-257,yh(p,o,a,i,e),p.mode&1&&gh(i,c,e),e=p,l=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){gh(i,c,e),qu();break e}l=Error(C(426))}}else if(ce&&a.mode&1){var x=mh(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),yh(x,o,a,i,e),Eu(ts(l,a));break e}}i=l=ts(l,a),be!==4&&(be=2),Ys===null?Ys=[i]:Ys.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=om(i,l,e);ch(i,m);break e;case 1:a=l;var g=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Tn===null||!Tn.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=am(i,a,e);ch(i,_);break e}}i=i.return}while(i!==null)}Em(n)}catch(S){e=S,xe===n&&n!==null&&(xe=n=n.return);continue}break}while(!0)}function Sm(){var t=na.current;return na.current=ta,t===null?ta:t}function qu(){(be===0||be===3||be===2)&&(be=4),je===null||!(pr&268435455)&&!(Na&268435455)||mn(je,Oe)}function ia(t,e){var n=X;X|=2;var r=Sm();(je!==t||Oe!==e)&&(qt=null,lr(t,e));do try{Ax();break}catch(s){km(t,s)}while(!0);if(Pu(),X=n,na.current=r,xe!==null)throw Error(C(261));return je=null,Oe=0,be}function Ax(){for(;xe!==null;)jm(xe)}function Dx(){for(;xe!==null&&!ov();)jm(xe)}function jm(t){var e=Pm(t.alternate,t,rt);t.memoizedProps=t.pendingProps,e===null?Em(t):xe=e,Bu.current=null}function Em(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Px(n,e),n!==null){n.flags&=32767,xe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{be=6,xe=null;return}}else if(n=Cx(n,e,rt),n!==null){xe=n;return}if(e=e.sibling,e!==null){xe=e;return}xe=e=t}while(e!==null);be===0&&(be=5)}function Zn(t,e,n){var r=ne,s=gt.transition;try{gt.transition=null,ne=1,Rx(t,e,n,r)}finally{gt.transition=s,ne=r}return null}function Rx(t,e,n,r){do qr();while(xn!==null);if(X&6)throw Error(C(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(C(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(mv(t,i),t===je&&(xe=je=null,Oe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||eo||(eo=!0,Tm($o,function(){return qr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=gt.transition,gt.transition=null;var o=ne;ne=1;var a=X;X|=4,Bu.current=null,Nx(t,n),wm(n,t),nx(hc),Uo=!!dc,hc=dc=null,t.current=n,Ox(n),av(),X=a,ne=o,gt.transition=i}else t.current=n;if(eo&&(eo=!1,xn=t,sa=s),i=t.pendingLanes,i===0&&(Tn=null),uv(n.stateNode),tt(t,ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ra)throw ra=!1,t=Mc,Mc=null,t;return sa&1&&t.tag!==0&&qr(),i=t.pendingLanes,i&1?t===Lc?Qs++:(Qs=0,Lc=t):Qs=0,Wn(),null}function qr(){if(xn!==null){var t=og(sa),e=gt.transition,n=ne;try{if(gt.transition=null,ne=16>t?16:t,xn===null)var r=!1;else{if(t=xn,xn=null,sa=0,X&6)throw Error(C(331));var s=X;for(X|=4,D=t.current;D!==null;){var i=D,o=i.child;if(D.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(D=c;D!==null;){var u=D;switch(u.tag){case 0:case 11:case 15:Ks(8,u,i)}var h=u.child;if(h!==null)h.return=u,D=h;else for(;D!==null;){u=D;var f=u.sibling,p=u.return;if(ym(u),u===c){D=null;break}if(f!==null){f.return=p,D=f;break}D=p}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}D=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,D=o;else e:for(;D!==null;){if(i=D,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ks(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,D=m;break e}D=i.return}}var g=t.current;for(D=g;D!==null;){o=D;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,D=w;else e:for(o=g;D!==null;){if(a=D,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ta(9,a)}}catch(S){pe(a,a.return,S)}if(a===o){D=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,D=_;break e}D=a.return}}if(X=s,Wn(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(_a,t)}catch{}r=!0}return r}finally{ne=n,gt.transition=e}}return!1}function Nh(t,e,n){e=ts(n,e),e=om(t,e,1),t=Pn(t,e,1),e=He(),t!==null&&(Oi(t,1,e),tt(t,e))}function pe(t,e,n){if(t.tag===3)Nh(t,t,n);else for(;e!==null;){if(e.tag===3){Nh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tn===null||!Tn.has(r))){t=ts(n,t),t=am(e,t,1),e=Pn(e,t,1),t=He(),e!==null&&(Oi(e,1,t),tt(e,t));break}}e=e.return}}function Ix(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=He(),t.pingedLanes|=t.suspendedLanes&n,je===t&&(Oe&n)===n&&(be===4||be===3&&(Oe&130023424)===Oe&&500>ge()-Wu?lr(t,0):Uu|=n),tt(t,e)}function Cm(t,e){e===0&&(t.mode&1?(e=Hi,Hi<<=1,!(Hi&130023424)&&(Hi=4194304)):e=1);var n=He();t=tn(t,e),t!==null&&(Oi(t,e,n),tt(t,n))}function Fx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Cm(t,n)}function zx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(C(314))}r!==null&&r.delete(e),Cm(t,n)}var Pm;Pm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ze.current)Je=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Je=!1,Ex(t,e,n);Je=!!(t.flags&131072)}else Je=!1,ce&&e.flags&1048576&&Mg(e,Qo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Po(t,e),t=e.pendingProps;var s=Xr(e,Be.current);Vr(e,n),s=Ru(null,e,r,t,s,n);var i=Iu();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,et(r)?(i=!0,Ko(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ou(e),s.updater=Pa,e.stateNode=s,s._reactInternals=e,_c(e,r,t,n),e=Sc(null,e,r,!0,i,n)):(e.tag=0,ce&&i&&Su(e),We(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Po(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Bx(r),t=jt(r,t),s){case 0:e=kc(null,e,r,t,n);break e;case 1:e=wh(null,e,r,t,n);break e;case 11:e=vh(null,e,r,t,n);break e;case 14:e=xh(null,e,r,jt(r.type,t),n);break e}throw Error(C(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jt(r,s),kc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jt(r,s),wh(t,e,r,s,n);case 3:e:{if(dm(e),t===null)throw Error(C(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Fg(t,e),Jo(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ts(Error(C(423)),e),e=_h(t,e,r,n,s);break e}else if(r!==s){s=ts(Error(C(424)),e),e=_h(t,e,r,n,s);break e}else for(st=Cn(e.stateNode.containerInfo.firstChild),it=e,ce=!0,Pt=null,n=Rg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jr(),r===s){e=nn(t,e,n);break e}We(t,e,r,n)}e=e.child}return e;case 5:return zg(e),t===null&&vc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,fc(r,s)?o=null:i!==null&&fc(r,i)&&(e.flags|=32),um(t,e),We(t,e,o,n),e.child;case 6:return t===null&&vc(e),null;case 13:return hm(t,e,n);case 4:return Mu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zr(e,null,r,n):We(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jt(r,s),vh(t,e,r,s,n);case 7:return We(t,e,e.pendingProps,n),e.child;case 8:return We(t,e,e.pendingProps.children,n),e.child;case 12:return We(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ie(Go,r._currentValue),r._currentValue=o,i!==null)if(Lt(i.value,o)){if(i.children===s.children&&!Ze.current){e=nn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Jt(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),xc(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(C(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),xc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}We(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Vr(e,n),s=yt(s),r=r(s),e.flags|=1,We(t,e,r,n),e.child;case 14:return r=e.type,s=jt(r,e.pendingProps),s=jt(r.type,s),xh(t,e,r,s,n);case 15:return lm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jt(r,s),Po(t,e),e.tag=1,et(r)?(t=!0,Ko(e)):t=!1,Vr(e,n),im(e,r,s),_c(e,r,s,n),Sc(null,e,r,!0,t,n);case 19:return fm(t,e,n);case 22:return cm(t,e,n)}throw Error(C(156,e.tag))};function Tm(t,e){return ng(t,e)}function $x(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(t,e,n,r){return new $x(t,e,n,r)}function Ku(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Bx(t){if(typeof t=="function")return Ku(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hu)return 11;if(t===fu)return 14}return 2}function On(t,e){var n=t.alternate;return n===null?(n=ft(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oo(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ku(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Tr:return cr(n.children,s,i,e);case du:o=8,s|=8;break;case Vl:return t=ft(12,n,e,s|2),t.elementType=Vl,t.lanes=i,t;case ql:return t=ft(13,n,e,s),t.elementType=ql,t.lanes=i,t;case Kl:return t=ft(19,n,e,s),t.elementType=Kl,t.lanes=i,t;case zp:return Oa(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ip:o=10;break e;case Fp:o=9;break e;case hu:o=11;break e;case fu:o=14;break e;case hn:o=16,r=null;break e}throw Error(C(130,t==null?t:typeof t,""))}return e=ft(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function cr(t,e,n,r){return t=ft(7,t,r,e),t.lanes=n,t}function Oa(t,e,n,r){return t=ft(22,t,r,e),t.elementType=zp,t.lanes=n,t.stateNode={isHidden:!1},t}function _l(t,e,n){return t=ft(6,t,null,e),t.lanes=n,t}function bl(t,e,n){return e=ft(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ux(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nl(0),this.expirationTimes=nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yu(t,e,n,r,s,i,o,a,l){return t=new Ux(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ft(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ou(i),t}function Wx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Nm(t){if(!t)return In;t=t._reactInternals;e:{if(vr(t)!==t||t.tag!==1)throw Error(C(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(C(171))}if(t.tag===1){var n=t.type;if(et(n))return Ng(t,n,e)}return e}function Om(t,e,n,r,s,i,o,a,l){return t=Yu(n,r,!0,t,s,i,o,a,l),t.context=Nm(null),n=t.current,r=He(),s=Nn(n),i=Jt(r,s),i.callback=e??null,Pn(n,i,s),t.current.lanes=s,Oi(t,s,r),tt(t,r),t}function Ma(t,e,n,r){var s=e.current,i=He(),o=Nn(s);return n=Nm(n),e.context===null?e.context=n:e.pendingContext=n,e=Jt(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Pn(s,e,o),t!==null&&(Mt(t,s,o,i),jo(t,s,o)),o}function oa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Oh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qu(t,e){Oh(t,e),(t=t.alternate)&&Oh(t,e)}function Hx(){return null}var Mm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gu(t){this._internalRoot=t}La.prototype.render=Gu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(C(409));Ma(t,e,null,null)};La.prototype.unmount=Gu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gr(function(){Ma(null,t,null,null)}),e[en]=null}};function La(t){this._internalRoot=t}La.prototype.unstable_scheduleHydration=function(t){if(t){var e=cg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gn.length&&e!==0&&e<gn[n].priority;n++);gn.splice(n,0,t),n===0&&dg(t)}};function Xu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Aa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mh(){}function Vx(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=oa(o);i.call(c)}}var o=Om(e,r,t,0,null,!1,!1,"",Mh);return t._reactRootContainer=o,t[en]=o.current,hi(t.nodeType===8?t.parentNode:t),gr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=oa(l);a.call(c)}}var l=Yu(t,0,!1,null,null,!1,!1,"",Mh);return t._reactRootContainer=l,t[en]=l.current,hi(t.nodeType===8?t.parentNode:t),gr(function(){Ma(e,l,n,r)}),l}function Da(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=oa(o);a.call(l)}}Ma(e,o,t,s)}else o=Vx(n,e,t,s,r);return oa(o)}ag=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ds(e.pendingLanes);n!==0&&(mu(e,n|1),tt(e,ge()),!(X&6)&&(ns=ge()+500,Wn()))}break;case 13:gr(function(){var r=tn(t,1);if(r!==null){var s=He();Mt(r,t,1,s)}}),Qu(t,1)}};yu=function(t){if(t.tag===13){var e=tn(t,134217728);if(e!==null){var n=He();Mt(e,t,134217728,n)}Qu(t,134217728)}};lg=function(t){if(t.tag===13){var e=Nn(t),n=tn(t,e);if(n!==null){var r=He();Mt(n,t,e,r)}Qu(t,e)}};cg=function(){return ne};ug=function(t,e){var n=ne;try{return ne=t,e()}finally{ne=n}};rc=function(t,e,n){switch(e){case"input":if(Gl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ja(r);if(!s)throw Error(C(90));Bp(r),Gl(r,s)}}}break;case"textarea":Wp(t,n);break;case"select":e=n.value,e!=null&&Br(t,!!n.multiple,e,!1)}};Gp=Hu;Xp=gr;var qx={usingClientEntryPoint:!1,Events:[Li,Lr,ja,Yp,Qp,Hu]},ks={findFiberByHostInstance:sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kx={bundleType:ks.bundleType,version:ks.version,rendererPackageName:ks.rendererPackageName,rendererConfig:ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=eg(t),t===null?null:t.stateNode},findFiberByHostInstance:ks.findFiberByHostInstance||Hx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var to=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!to.isDisabled&&to.supportsFiber)try{_a=to.inject(Kx),Bt=to}catch{}}at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qx;at.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xu(e))throw Error(C(200));return Wx(t,e,null,n)};at.createRoot=function(t,e){if(!Xu(t))throw Error(C(299));var n=!1,r="",s=Mm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Yu(t,1,!1,null,null,n,!1,r,s),t[en]=e.current,hi(t.nodeType===8?t.parentNode:t),new Gu(e)};at.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(C(188)):(t=Object.keys(t).join(","),Error(C(268,t)));return t=eg(e),t=t===null?null:t.stateNode,t};at.flushSync=function(t){return gr(t)};at.hydrate=function(t,e,n){if(!Aa(e))throw Error(C(200));return Da(null,t,e,!0,n)};at.hydrateRoot=function(t,e,n){if(!Xu(t))throw Error(C(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Mm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Om(e,null,t,1,n??null,s,!1,i,o),t[en]=e.current,hi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new La(e)};at.render=function(t,e,n){if(!Aa(e))throw Error(C(200));return Da(null,t,e,!1,n)};at.unmountComponentAtNode=function(t){if(!Aa(t))throw Error(C(40));return t._reactRootContainer?(gr(function(){Da(null,null,t,!1,function(){t._reactRootContainer=null,t[en]=null})}),!0):!1};at.unstable_batchedUpdates=Hu;at.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Aa(n))throw Error(C(200));if(t==null||t._reactInternals===void 0)throw Error(C(38));return Da(t,e,n,!1,r)};at.version="18.3.1-next-f1338f8080-20240426";function Lm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lm)}catch(t){console.error(t)}}Lm(),Lp.exports=at;var Yx=Lp.exports,Lh=Yx;Wl.createRoot=Lh.createRoot,Wl.hydrateRoot=Lh.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _i(){return _i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_i.apply(this,arguments)}var wn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(wn||(wn={}));const Ah="popstate";function Qx(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Rc("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:aa(s)}return Xx(e,n,null,t)}function ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Am(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Gx(){return Math.random().toString(36).substr(2,8)}function Dh(t,e){return{usr:t.state,key:t.key,idx:e}}function Rc(t,e,n,r){return n===void 0&&(n=null),_i({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?us(e):e,{state:n,key:e&&e.key||r||Gx()})}function aa(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function us(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Xx(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=wn.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(_i({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=wn.Pop;let x=u(),m=x==null?null:x-c;c=x,l&&l({action:a,location:y.location,delta:m})}function f(x,m){a=wn.Push;let g=Rc(y.location,x,m);c=u()+1;let w=Dh(g,c),_=y.createHref(g);try{o.pushState(w,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(_)}i&&l&&l({action:a,location:y.location,delta:1})}function p(x,m){a=wn.Replace;let g=Rc(y.location,x,m);c=u();let w=Dh(g,c),_=y.createHref(g);o.replaceState(w,"",_),i&&l&&l({action:a,location:y.location,delta:0})}function v(x){let m=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof x=="string"?x:aa(x);return g=g.replace(/ $/,"%20"),ye(m,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,m)}let y={get action(){return a},get location(){return t(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Ah,h),l=x,()=>{s.removeEventListener(Ah,h),l=null}},createHref(x){return e(s,x)},createURL:v,encodeLocation(x){let m=v(x);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:p,go(x){return o.go(x)}};return y}var Rh;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Rh||(Rh={}));function Jx(t,e,n){return n===void 0&&(n="/"),Zx(t,e,n,!1)}function Zx(t,e,n,r){let s=typeof e=="string"?us(e):e,i=Ju(s.pathname||"/",n);if(i==null)return null;let o=Dm(t);ew(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=dw(i);a=cw(o[l],c,r)}return a}function Dm(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ye(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Mn([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(ye(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Dm(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:aw(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Rm(i.path))s(i,o,l)}),e}function Rm(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Rm(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function ew(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:lw(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const tw=/^:[\w-]+$/,nw=3,rw=2,sw=1,iw=10,ow=-2,Ih=t=>t==="*";function aw(t,e){let n=t.split("/"),r=n.length;return n.some(Ih)&&(r+=ow),e&&(r+=rw),n.filter(s=>!Ih(s)).reduce((s,i)=>s+(tw.test(i)?nw:i===""?sw:iw),r)}function lw(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function cw(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=Fh({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=Fh({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Mn([i,h.pathname]),pathnameBase:gw(Mn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Mn([i,h.pathnameBase]))}return o}function Fh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=uw(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let y=a[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const v=a[h];return p&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function uw(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Am(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function dw(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Am(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ju(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function hw(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?us(t):t;return{pathname:n?n.startsWith("/")?n:fw(n,e):e,search:mw(r),hash:yw(s)}}function fw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function kl(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pw(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Zu(t,e){let n=pw(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ed(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=us(t):(s=_i({},t),ye(!s.pathname||!s.pathname.includes("?"),kl("?","pathname","search",s)),ye(!s.pathname||!s.pathname.includes("#"),kl("#","pathname","hash",s)),ye(!s.search||!s.search.includes("#"),kl("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=hw(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Mn=t=>t.join("/").replace(/\/\/+/g,"/"),gw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,yw=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function vw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Im=["post","put","patch","delete"];new Set(Im);const xw=["get",...Im];new Set(xw);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bi(){return bi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bi.apply(this,arguments)}const td=b.createContext(null),ww=b.createContext(null),Hn=b.createContext(null),Ra=b.createContext(null),sn=b.createContext({outlet:null,matches:[],isDataRoute:!1}),Fm=b.createContext(null);function _w(t,e){let{relative:n}=e===void 0?{}:e;ds()||ye(!1);let{basename:r,navigator:s}=b.useContext(Hn),{hash:i,pathname:o,search:a}=$m(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Mn([r,o])),s.createHref({pathname:l,search:a,hash:i})}function ds(){return b.useContext(Ra)!=null}function xr(){return ds()||ye(!1),b.useContext(Ra).location}function zm(t){b.useContext(Hn).static||b.useLayoutEffect(t)}function Vn(){let{isDataRoute:t}=b.useContext(sn);return t?Dw():bw()}function bw(){ds()||ye(!1);let t=b.useContext(td),{basename:e,future:n,navigator:r}=b.useContext(Hn),{matches:s}=b.useContext(sn),{pathname:i}=xr(),o=JSON.stringify(Zu(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return zm(()=>{a.current=!0}),b.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=ed(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Mn([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,i,t])}function kw(){let{matches:t}=b.useContext(sn),e=t[t.length-1];return e?e.params:{}}function $m(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(Hn),{matches:s}=b.useContext(sn),{pathname:i}=xr(),o=JSON.stringify(Zu(s,r.v7_relativeSplatPath));return b.useMemo(()=>ed(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Sw(t,e){return jw(t,e)}function jw(t,e,n,r){ds()||ye(!1);let{navigator:s,static:i}=b.useContext(Hn),{matches:o}=b.useContext(sn),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=xr(),h;if(e){var f;let m=typeof e=="string"?us(e):e;c==="/"||(f=m.pathname)!=null&&f.startsWith(c)||ye(!1),h=m}else h=u;let p=h.pathname||"/",v=p;if(c!=="/"){let m=c.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(m.length).join("/")}let y=!i&&n&&n.matches&&n.matches.length>0?n.matches:Jx(t,{pathname:v}),x=Nw(y&&y.map(m=>Object.assign({},m,{params:Object.assign({},l,m.params),pathname:Mn([c,s.encodeLocation?s.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?c:Mn([c,s.encodeLocation?s.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),o,n,r);return e&&x?b.createElement(Ra.Provider,{value:{location:bi({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:wn.Pop}},x):x}function Ew(){let t=Aw(),e=vw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const Cw=b.createElement(Ew,null);class Pw extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(sn.Provider,{value:this.props.routeContext},b.createElement(Fm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tw(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(td);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(sn.Provider,{value:e},r)}function Nw(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||ye(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:p}=n,v=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let p,v=!1,y=null,x=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||Cw,l&&(c<0&&f===0?(v=!0,x=null):c===f&&(v=!0,x=h.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),g=()=>{let w;return p?w=y:v?w=x:h.route.Component?w=b.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=u,b.createElement(Tw,{match:h,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?b.createElement(Pw,{location:n.location,revalidation:n.revalidation,component:y,error:p,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var Bm=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Bm||{}),la=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(la||{});function Ow(t){let e=b.useContext(td);return e||ye(!1),e}function Mw(t){let e=b.useContext(ww);return e||ye(!1),e}function Lw(t){let e=b.useContext(sn);return e||ye(!1),e}function Um(t){let e=Lw(),n=e.matches[e.matches.length-1];return n.route.id||ye(!1),n.route.id}function Aw(){var t;let e=b.useContext(Fm),n=Mw(la.UseRouteError),r=Um(la.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Dw(){let{router:t}=Ow(Bm.UseNavigateStable),e=Um(la.UseNavigateStable),n=b.useRef(!1);return zm(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,bi({fromRouteId:e},i)))},[t,e])}function Rw(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Gs(t){let{to:e,replace:n,state:r,relative:s}=t;ds()||ye(!1);let{future:i,static:o}=b.useContext(Hn),{matches:a}=b.useContext(sn),{pathname:l}=xr(),c=Vn(),u=ed(e,Zu(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(u);return b.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function ut(t){ye(!1)}function Iw(t){let{basename:e="/",children:n=null,location:r,navigationType:s=wn.Pop,navigator:i,static:o=!1,future:a}=t;ds()&&ye(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:i,static:o,future:bi({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=us(r));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:v="default"}=r,y=b.useMemo(()=>{let x=Ju(u,l);return x==null?null:{location:{pathname:x,search:h,hash:f,state:p,key:v},navigationType:s}},[l,u,h,f,p,v,s]);return y==null?null:b.createElement(Hn.Provider,{value:c},b.createElement(Ra.Provider,{children:n,value:y}))}function Fw(t){let{children:e,location:n}=t;return Sw(Ic(e),n)}new Promise(()=>{});function Ic(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,Ic(r.props.children,i));return}r.type!==ut&&ye(!1),!r.props.index||!r.props.children||ye(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ic(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fc(){return Fc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fc.apply(this,arguments)}function zw(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function $w(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Bw(t,e){return t.button===0&&(!e||e==="_self")&&!$w(t)}const Uw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ww="6";try{window.__reactRouterVersion=Ww}catch{}const Hw="startTransition",zh=Iy[Hw];function Vw(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=Qx({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=b.useCallback(h=>{c&&zh?zh(()=>l(h)):l(h)},[l,c]);return b.useLayoutEffect(()=>o.listen(u),[o,u]),b.useEffect(()=>Rw(r),[r]),b.createElement(Iw,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const qw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ss=b.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,f=zw(e,Uw),{basename:p}=b.useContext(Hn),v,y=!1;if(typeof c=="string"&&Kw.test(c)&&(v=c,qw))try{let w=new URL(window.location.href),_=c.startsWith("//")?new URL(w.protocol+c):new URL(c),S=Ju(_.pathname,p);_.origin===w.origin&&S!=null?c=S+_.search+_.hash:y=!0}catch{}let x=_w(c,{relative:s}),m=Yw(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function g(w){r&&r(w),w.defaultPrevented||m(w)}return b.createElement("a",Fc({},f,{href:v||x,onClick:y||i?r:g,ref:n,target:l}))});var $h;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})($h||($h={}));var Bh;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Bh||(Bh={}));function Yw(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Vn(),c=xr(),u=$m(t,{relative:o});return b.useCallback(h=>{if(Bw(h,n)){h.preventDefault();let f=r!==void 0?r:aa(c)===aa(u);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}const Qw="modulepreload",Gw=function(t){return"/"+t},Uh={},rs=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=Gw(l),l in Uh)return;Uh[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":Qw,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Xw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>rs(async()=>{const{default:r}=await Promise.resolve().then(()=>hs);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class nd extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Jw extends nd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Zw extends nd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class e_ extends nd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var zc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(zc||(zc={}));var t_=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class n_{constructor(e,{headers:n={},customFetch:r,region:s=zc.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Xw(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return t_(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:c}).catch(v=>{throw new Jw(v)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new Zw(u);if(!u.ok)throw new e_(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield u.json():f==="application/octet-stream"?p=yield u.blob():f==="text/event-stream"?p=u:f==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}}var Ge={},rd={},Ia={},Di={},Fa={},za={},r_=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ss=r_();const s_=ss.fetch,Wm=ss.fetch.bind(ss),Hm=ss.Headers,i_=ss.Request,o_=ss.Response,hs=Object.freeze(Object.defineProperty({__proto__:null,Headers:Hm,Request:i_,Response:o_,default:Wm,fetch:s_},Symbol.toStringTag,{value:"Module"})),a_=_y(hs);var $a={};Object.defineProperty($a,"__esModule",{value:!0});let l_=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};$a.default=l_;var Vm=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(za,"__esModule",{value:!0});const c_=Vm(a_),u_=Vm($a);let d_=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=c_.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let c=null,u=null,h=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=m:u=JSON.parse(m))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&x&&x.length>1&&(h=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await i.text();try{c=JSON.parse(y),Array.isArray(c)&&i.status===404&&(u=[],c=null,f=200,p="OK")}catch{i.status===404&&y===""?(f=204,p="No Content"):c={message:y}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new u_.default(c)}return{error:c,data:u,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};za.default=d_;var h_=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fa,"__esModule",{value:!0});const f_=h_(za);let p_=class extends f_.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Fa.default=p_;var g_=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Di,"__esModule",{value:!0});const m_=g_(Fa);let y_=class extends m_.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Di.default=y_;var v_=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ia,"__esModule",{value:!0});const js=v_(Di);let x_=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new js.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new js.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new js.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new js.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new js.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ia.default=x_;var Ba={},Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.version=void 0;Ua.version="0.0.0-automated";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.DEFAULT_HEADERS=void 0;const w_=Ua;Ba.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${w_.version}`};var qm=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rd,"__esModule",{value:!0});const __=qm(Ia),b_=qm(Di),k_=Ba;let S_=class Km{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},k_.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new __.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Km(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{a.searchParams.append(u,h)})):(o="POST",l=n);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new b_.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};rd.default=S_;var fs=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.PostgrestError=Ge.PostgrestBuilder=Ge.PostgrestTransformBuilder=Ge.PostgrestFilterBuilder=Ge.PostgrestQueryBuilder=Ge.PostgrestClient=void 0;const Ym=fs(rd);Ge.PostgrestClient=Ym.default;const Qm=fs(Ia);Ge.PostgrestQueryBuilder=Qm.default;const Gm=fs(Di);Ge.PostgrestFilterBuilder=Gm.default;const Xm=fs(Fa);Ge.PostgrestTransformBuilder=Xm.default;const Jm=fs(za);Ge.PostgrestBuilder=Jm.default;const Zm=fs($a);Ge.PostgrestError=Zm.default;var j_=Ge.default={PostgrestClient:Ym.default,PostgrestQueryBuilder:Qm.default,PostgrestFilterBuilder:Gm.default,PostgrestTransformBuilder:Xm.default,PostgrestBuilder:Jm.default,PostgrestError:Zm.default};const{PostgrestClient:E_,PostgrestQueryBuilder:KE,PostgrestFilterBuilder:YE,PostgrestTransformBuilder:QE,PostgrestBuilder:GE,PostgrestError:XE}=j_,C_="2.11.2",P_={"X-Client-Info":`realtime-js/${C_}`},T_="1.0.0",e0=1e4,N_=1e3;var Kr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Kr||(Kr={}));var nt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(nt||(nt={}));var Ct;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ct||(Ct={}));var $c;(function(t){t.websocket="websocket"})($c||($c={}));var rr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(rr||(rr={}));class O_{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class t0{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var se;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(se||(se={}));const Wh=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=M_(o,t,e,s),i),{})},M_=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?n0(i,o):Bc(o)},n0=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return R_(e,n)}switch(t){case se.bool:return L_(e);case se.float4:case se.float8:case se.int2:case se.int4:case se.int8:case se.numeric:case se.oid:return A_(e);case se.json:case se.jsonb:return D_(e);case se.timestamp:return I_(e);case se.abstime:case se.date:case se.daterange:case se.int4range:case se.int8range:case se.money:case se.reltime:case se.text:case se.time:case se.timestamptz:case se.timetz:case se.tsrange:case se.tstzrange:return Bc(e);default:return Bc(e)}},Bc=t=>t,L_=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},A_=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},D_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},R_=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>n0(e,a))}return t},I_=t=>typeof t=="string"?t.replace(" ","T"):t,r0=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Sl{constructor(e,n,r={},s=e0){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Hh;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Hh||(Hh={}));class Xs{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xs.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Xs.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Xs.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const f=u.map(x=>x.presence_ref),p=h.map(x=>x.presence_ref),v=u.filter(x=>p.indexOf(x.presence_ref)<0),y=h.filter(x=>f.indexOf(x.presence_ref)<0);v.length>0&&(a[c]=v),y.length>0&&(l[c]=y)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Vh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Vh||(Vh={}));var qh;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(qh||(qh={}));var Kt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Kt||(Kt={}));class sd{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Sl(this,Ct.join,this.params,this.timeout),this.rejoinTimer=new t0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ct.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Xs(this),this.broadcastEndpointURL=r0(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Kt.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Kt.CLOSED));const l={},c={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(Kt.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,v=[];for(let y=0;y<p;y++){const x=f[y],{filter:{event:m,schema:g,table:w,filter:_}}=x,S=u&&u[y];if(S&&S.event===m&&S.schema===g&&S.table===w&&S.filter===_)v.push(Object.assign(Object.assign({},x),{id:S.id}));else{this.unsubscribe(),e==null||e(Kt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Kt.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(Kt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Kt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=nt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ct.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new Sl(this,Ct.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Sl(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Ct;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var v,y,x;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((x=(y=p.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var v,y,x,m,g,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,S=(v=p.filter)===null||v===void 0?void 0:v.event;return _&&((y=n.ids)===null||y===void 0?void 0:y.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(g=(m=p==null?void 0:p.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return _==="*"||_===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:y,table:x,commit_timestamp:m,type:g,errors:w}=v;f=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:m,eventType:g,new:{},old:{},errors:w}),this._getPayloadRecords(v))}p.callback(f,r)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&sd.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ct.close,{},e)}_onError(e){this._on(Ct.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Wh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Wh(e.columns,e.old_record)),n}}const F_=()=>{},z_=typeof WebSocket<"u",$_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class B_{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=P_,this.params={},this.timeout=e0,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=F_,this.conn=null,this.sendBuffer=[],this.serializer=new O_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>rs(async()=>{const{default:l}=await Promise.resolve().then(()=>hs);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${$c.websocket}`,this.httpEndpoint=r0(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new t0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(z_){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new U_(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),rs(async()=>{const{default:e}=await import("./browser-E-1L28Ni.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:T_}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Kr.connecting:return rr.Connecting;case Kr.open:return rr.Open;case Kr.closing:return rr.Closing;default:return rr.Closed}}isConnected(){return this.connectionState()===rr.Open}channel(e,n={config:{}}){const r=new sd(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(Ct.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(N_,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ct.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([$_],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class U_{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Kr.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class id extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ke(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class W_ extends id{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Uc extends id{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var H_=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const s0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>rs(async()=>{const{default:r}=await Promise.resolve().then(()=>hs);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},V_=()=>H_(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield rs(()=>Promise.resolve().then(()=>hs),void 0)).Response:Response}),Wc=t=>{if(Array.isArray(t))return t.map(n=>Wc(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Wc(r)}),e};var wr=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const jl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),q_=(t,e,n)=>wr(void 0,void 0,void 0,function*(){const r=yield V_();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new W_(jl(s),t.status||500))}).catch(s=>{e(new Uc(jl(s),s))}):e(new Uc(jl(t),t))}),K_=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Ri(t,e,n,r,s,i){return wr(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,K_(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>q_(l,a,r))})})}function ca(t,e,n,r){return wr(this,void 0,void 0,function*(){return Ri(t,"GET",e,n,r)})}function pn(t,e,n,r,s){return wr(this,void 0,void 0,function*(){return Ri(t,"POST",e,r,s,n)})}function Y_(t,e,n,r,s){return wr(this,void 0,void 0,function*(){return Ri(t,"PUT",e,r,s,n)})}function Q_(t,e,n,r){return wr(this,void 0,void 0,function*(){return Ri(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function i0(t,e,n,r,s){return wr(this,void 0,void 0,function*(){return Ri(t,"DELETE",e,r,s,n)})}var Ke=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const G_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Kh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class X_{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=s0(s)}uploadOrUpdate(e,n,r,s){return Ke(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Kh),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(ke(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Ke(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:Kh.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(ke(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Ke(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield pn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new id("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}})}update(e,n,r){return Ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Ke(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Ke(this,void 0,void 0,function*(){try{return{data:{path:(yield pn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Ke(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield pn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Ke(this,void 0,void 0,function*(){try{const s=yield pn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}download(e,n){return Ke(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield ca(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ke(a))return{data:null,error:a};throw a}})}info(e){return Ke(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ca(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Wc(r),error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}})}exists(e){return Ke(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Q_(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ke(r)&&r instanceof Uc){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Ke(this,void 0,void 0,function*(){try{return{data:yield i0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}list(e,n,r){return Ke(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},G_),n),{prefix:e||""});return{data:yield pn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const J_="2.7.1",Z_={"X-Client-Info":`storage-js/${J_}`};var br=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class eb{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},Z_),n),this.fetch=s0(r)}listBuckets(){return br(this,void 0,void 0,function*(){try{return{data:yield ca(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ke(e))return{data:null,error:e};throw e}})}getBucket(e){return br(this,void 0,void 0,function*(){try{return{data:yield ca(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return br(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return br(this,void 0,void 0,function*(){try{return{data:yield Y_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}})}emptyBucket(e){return br(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}deleteBucket(e){return br(this,void 0,void 0,function*(){try{return{data:yield i0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}}class tb extends eb{constructor(e,n={},r){super(e,n,r)}from(e){return new X_(this.url,this.headers,e,this.fetch)}}const nb="2.49.4";let Is="";typeof Deno<"u"?Is="deno":typeof document<"u"?Is="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Is="react-native":Is="node";const rb={"X-Client-Info":`supabase-js-${Is}/${nb}`},sb={headers:rb},ib={schema:"public"},ob={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ab={};var lb=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const cb=t=>{let e;return t?e=t:typeof fetch>"u"?e=Wm:e=fetch,(...n)=>e(...n)},ub=()=>typeof Headers>"u"?Hm:Headers,db=(t,e,n)=>{const r=cb(n),s=ub();return(i,o)=>lb(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var hb=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function fb(t){return t.replace(/\/$/,"")}function pb(t,e){const{db:n,auth:r,realtime:s,global:i}=t,{db:o,auth:a,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),i),accessToken:()=>hb(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const o0="2.69.1",Cr=30*1e3,Hc=3,El=Hc*Cr,gb="http://localhost:9999",mb="supabase.auth.token",yb={"X-Client-Info":`gotrue-js/${o0}`},Vc="X-Supabase-Api-Version",a0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xb=6e5;class od extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function U(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class wb extends od{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function _b(t){return U(t)&&t.name==="AuthApiError"}class l0 extends od{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class qn extends od{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class un extends qn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function bb(t){return U(t)&&t.name==="AuthSessionMissingError"}class Cl extends qn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class no extends qn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ro extends qn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kb(t){return U(t)&&t.name==="AuthImplicitGrantRedirectError"}class Yh extends qn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qc extends qn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Pl(t){return U(t)&&t.name==="AuthRetryableFetchError"}class Qh extends qn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Js extends qn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Gh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xh=` 	
\r=`.split(""),Sb=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Xh.length;e+=1)t[Xh[e].charCodeAt(0)]=-2;for(let e=0;e<Gh.length;e+=1)t[Gh[e].charCodeAt(0)]=e;return t})();function c0(t,e,n){const r=Sb[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Jh(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Cb(o,r,n)};for(let o=0;o<t.length;o+=1)c0(t.charCodeAt(o),s,i);return e.join("")}function jb(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Eb(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}jb(r,e)}}function Cb(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Pb(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)c0(t.charCodeAt(s),n,r);return new Uint8Array(e)}function Tb(t){const e=[];return Eb(t,n=>e.push(n)),new Uint8Array(e)}function Nb(t){return Math.round(Date.now()/1e3)+t}function Ob(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Rt=()=>typeof window<"u"&&typeof document<"u",Kn={tested:!1,writable:!1},Zs=()=>{if(!Rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kn.tested)return Kn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Kn.tested=!0,Kn.writable=!0}catch{Kn.tested=!0,Kn.writable=!1}return Kn.writable};function Mb(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const u0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>rs(async()=>{const{default:r}=await Promise.resolve().then(()=>hs);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Lb=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",d0=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},so=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},io=async(t,e)=>{await t.removeItem(e)};class Wa{constructor(){this.promise=new Wa.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Wa.promiseConstructor=Promise;function Tl(t){const e=t.split(".");if(e.length!==3)throw new Js("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!vb.test(e[r]))throw new Js("JWT not in base64url format");return{header:JSON.parse(Jh(e[0])),payload:JSON.parse(Jh(e[1])),signature:Pb(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ab(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Db(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Rb(t){return("0"+t.toString(16)).substr(-2)}function Ib(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Rb).join("")}async function Fb(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function zb(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Fb(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kr(t,e,n=!1){const r=Ib();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await d0(t,`${e}-code-verifier`,s);const i=await zb(r);return[i,r===i?"plain":"s256"]}const $b=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Bb(t){const e=t.headers.get(Vc);if(!e||!e.match($b))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ub(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Wb(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Hb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const er=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Vb=[502,503,504];async function Zh(t){var e;if(!Lb(t))throw new qc(er(t),0);if(Vb.includes(t.status))throw new qc(er(t),t.status);let n;try{n=await t.json()}catch(i){throw new l0(er(i),i)}let r;const s=Bb(t);if(s&&s.getTime()>=a0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Qh(er(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new un}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Qh(er(n),t.status,n.weak_password.reasons);throw new wb(er(n),t.status||500,r)}const qb=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Y(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Vc]||(i[Vc]=a0["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Kb(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Kb(t,e,n,r,s,i){const o=qb(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new qc(er(l),0)}if(a.ok||await Zh(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Zh(l)}}function dn(t){var e;let n=null;Xb(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Nb(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function ef(t){const e=dn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function yn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Yb(t){return{data:t,error:null}}function Qb(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Hb(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Gb(t){return t}function Xb(t){return t.access_token&&t.refresh_token&&t.expires_in}var Jb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Zb{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=u0(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Y(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Y(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:yn})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Jb(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Y(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Qb,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(U(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Y(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:yn})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Y(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Gb});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);c[`${x}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(U(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await Y(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:yn})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Y(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:yn})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Y(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:yn})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Y(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(U(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Y(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}}const e1={getItem:t=>Zs()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Zs()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Zs()&&globalThis.localStorage.removeItem(t)}};function tf(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function t1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Sr={debug:!!(globalThis&&Zs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class h0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class n1 extends h0{}async function r1(t,e,n){Sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Sr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Sr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new n1(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Sr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}t1();const s1={url:gb,storageKey:mb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function nf(t,e,n){return await n()}class ki{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ki.nextInstanceID,ki.nextInstanceID+=1,this.instanceID>0&&Rt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},s1),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Zb({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=u0(s.fetch),this.lock=s.lock||nf,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Rt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=r1:this.lock=nf,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Zs()?this.storage=e1:(this.memoryStorage={},this.storage=tf(this.memoryStorage)):(this.memoryStorage={},this.storage=tf(this.memoryStorage)),Rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${o0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Mb(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Rt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),kb(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return U(n)?{error:n}:{error:new l0("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:dn}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await kr(this.storage,this.storageKey)),i=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:v},xform:dn})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await Y(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:dn})}else throw new no("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ef})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await Y(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ef})}else throw new no("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Cl}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await so(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Y(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:dn});if(await io(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Cl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(U(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await Y(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:dn}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Cl}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await kr(this.storage,this.storageKey));const{error:h}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await Y(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new no("You must provide either an email or phone number.")}catch(a){if(U(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Y(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:dn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(U(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await kr(this.storage,this.storageKey)),await Y(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Yb})}catch(i){if(U(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new un;const{error:s}=await Y(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(U(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Y(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await Y(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new no("You must provide either an email or phone number and a type")}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await so(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<El:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:yn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new un}:await Y(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:yn})})}catch(n){if(U(n))return bb(n)&&(await this._removeSession(),await io(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new un;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await kr(this.storage,this.storageKey));const{data:c,error:u}=await Y(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:yn});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new un;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Tl(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(U(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new un;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Rt())throw new ro("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ro(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Yh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ro("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Yh("No code detected.");const{data:g,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new ro("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const p=f-u;p*1e3<=Cr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=f-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,u);const{data:y,error:x}=await this._getUser(i);if(x)throw x;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(r){if(U(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await so(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(_b(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await io(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Ob(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await kr(this.storage,this.storageKey,!0));try{return await Y(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(U(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Y(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Rt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(U(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Y(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Db(async s=>(s>0&&await Ab(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Y(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:dn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Pl(i)&&Date.now()+o-r<Cr})}catch(r){if(this._debug(n,"error",r),U(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Rt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await so(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<El;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${El}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),Pl(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new un;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Wa;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new un;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),U(i)){const o={session:null,error:i};return Pl(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await d0(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await io(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Cr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Cr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Cr}ms, refresh threshold is ${Hc} ticks`),s<=Hc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof h0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await kr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Y(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await Y(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await Y(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(U(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Y(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(U(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Tl(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+xb>Date.now()))return r;const{data:s,error:i}=await Y(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Js("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new Js("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Tl(r);if(Ub(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const c=Wb(s.alg),u=await this.fetchJwk(s.kid,n),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,Tb(`${a}.${l}`)))throw new Js("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}}ki.nextInstanceID=0;const i1=ki;class o1 extends i1{constructor(e){super(e)}}var a1=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class l1{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=fb(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:ib,realtime:ab,auth:Object.assign(Object.assign({},ob),{storageKey:l}),global:sb},u=pb(r??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=db(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new E_(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new n_(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new tb(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return a1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o1({url:this.authUrl,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new B_(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const c1=(t,e,n)=>new l1(t,e,n),u1="your_supabase_url_here",d1="your_supabase_anon_key_here",q=c1(u1,d1),f0=b.createContext(void 0),h1=({children:t})=>{const[e,n]=b.useState(null),[r,s]=b.useState(!0),i=Vn(),o=async()=>{try{await q.auth.signOut()}finally{localStorage.clear(),n(null),i("/login")}};b.useEffect(()=>{q.auth.getSession().then(async({data:f,error:p})=>{const v=f.session;p||!(v!=null&&v.user)?await o():await a(v.user),s(!1)});const{data:{subscription:h}}=q.auth.onAuthStateChange(async(f,p)=>{if(console.log("Auth state changed:",{event:f,session:p}),f==="TOKEN_REFRESH_FAILED"){await o();return}try{p!=null&&p.user?await a(p.user):n(null)}finally{s(!1)}});return()=>{h.unsubscribe()}},[]);const a=async h=>{try{const{data:f,error:p}=await q.from("users").select("name, store, role").eq("auth_id",h.id).single();if(p)throw p;n({id:h.id,email:h.email||"",name:f.name,store:f.store,role:f.role})}catch(f){console.error("Error loading user profile:",f);try{await o()}catch(p){console.error("Error logging out after failed profile load:",p)}}},l=async(h,f)=>{try{s(!0);const{data:p,error:v}=await q.auth.signInWithPassword({email:h,password:f});if(v)throw v;return p.user?(await a(p.user),i("/"),!0):!1}catch(p){throw console.error("Error logging in:",p),p}finally{s(!1)}},c=async(h,f,p)=>{var v;try{s(!0);const{data:y,error:x}=await q.auth.signUp({email:f,password:p});if(x)throw x;const m=(v=y.user)==null?void 0:v.id;if(!m)throw new Error("No se pudo obtener el ID del usuario");const{error:g}=await q.from("users").insert([{auth_id:m,name:h,email:f,store:"",role:"employee"}]);if(g)throw g;return!0}catch(y){throw console.error("Error registering user:",y),y}finally{s(!1)}},u=async()=>{try{await q.auth.signOut(),n(null),i("/login")}catch(h){throw console.error("Error logging out:",h),h}};return d.jsx(f0.Provider,{value:{currentUser:e,login:l,register:c,logout:u,isLoading:r},children:t})},_t=()=>{const t=b.useContext(f0);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var f1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ve=(t,e)=>{const n=b.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>b.createElement("svg",{ref:u,...f1,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${p1(t)}`,a].join(" "),...c},[...e.map(([h,f])=>b.createElement(h,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=ve("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=ve("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=ve("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=ve("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=ve("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=ve("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=ve("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=ve("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=ve("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=ve("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=ve("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=ve("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=ve("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=ve("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=ve("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=ve("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),N1=({show:t,handleClose:e})=>{const[n,r]=b.useState(""),[s,i]=b.useState(""),[o,a]=b.useState(""),l=c=>{if(c.preventDefault(),a(""),n!==s){a("Las contraseñas no coinciden.");return}e()};return t?d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6 relative",children:[d.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,"aria-label":"Cerrar",children:"×"}),d.jsx("h2",{className:"text-xl font-bold mb-4 text-black",children:"Cambiar contraseña"}),d.jsxs("form",{onSubmit:l,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"Contraseña nueva"}),d.jsx("input",{type:"password",className:"w-full border border-gray-300 rounded px-3 py-2 text-black focus:outline-none focus:ring-2 focus:ring-indigo-500",value:n,onChange:c=>r(c.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar contraseña"}),d.jsx("input",{type:"password",className:"w-full border border-gray-300 rounded px-3 py-2 text-black focus:outline-none focus:ring-2 focus:ring-indigo-500",value:s,onChange:c=>i(c.target.value),required:!0})]}),o&&d.jsx("div",{className:"text-red-600 text-sm",children:o}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-200 text-black rounded shadow-none border-none hover:bg-gray-300 focus:outline-none",onClick:e,children:"Cancelar"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Cambiar contraseña"})]})]})]})}):null};function O1(){const t=xr(),{currentUser:e,logout:n}=_t(),[r,s]=kn.useState(!1);if(!e)return null;const i=e.role;return d.jsxs("div",{className:"sticky top-0 left-0 h-screen w-64 bg-indigo-800 text-white flex flex-col z-30",children:[d.jsx("div",{className:"flex justify-between items-center p-4 border-b border-indigo-700",children:d.jsx("span",{className:"text-xl font-semibold",children:"Menú"})}),d.jsxs("nav",{className:"mt-4 flex flex-col h-[calc(100%-65px)]",children:[d.jsxs("div",{className:"flex-grow",children:[d.jsxs(Ss,{to:"/",className:`flex items-center px-6 py-3 ${t.pathname==="/"?"bg-indigo-900":"hover:bg-indigo-700"}`,children:[d.jsx(x1,{className:"h-5 w-5 mr-3"}),"Inicio"]}),d.jsxs(Ss,{to:"/tasks",className:`flex items-center px-6 py-3 ${t.pathname==="/tasks"||t.pathname.startsWith("/tasks/")&&!t.pathname.includes("new")?"bg-indigo-900":"hover:bg-indigo-700"}`,children:[d.jsx(y1,{className:"h-5 w-5 mr-3"}),"Mis tareas"]}),(i==="supervisor"||i==="admin")&&d.jsxs(Ss,{to:"/store",className:`flex items-center px-6 py-3 ${t.pathname==="/store"?"bg-indigo-900":"hover:bg-indigo-700"}`,children:[d.jsx(p0,{className:"h-5 w-5 mr-3"}),"Vista de supervisor"]}),(i==="supervisor"||i==="admin")&&d.jsxs(Ss,{to:"/tasks/new",className:`flex items-center px-6 py-3 ${t.pathname==="/tasks/new"?"bg-indigo-900":"hover:bg-indigo-700"}`,children:[d.jsx(S1,{className:"h-5 w-5 mr-3"}),"Creación"]}),i==="admin"&&d.jsxs(Ss,{to:"/admin",className:`flex items-center px-6 py-3 ${t.pathname==="/admin"?"bg-indigo-900":"hover:bg-indigo-700"}`,children:[d.jsx(m0,{className:"h-5 w-5 mr-3"}),"Administración"]})]}),d.jsxs("div",{className:"mt-auto p-2",children:[d.jsxs("button",{onClick:()=>s(!0),className:"w-full flex items-center px-4 py-3 mb-2 bg-indigo-700 hover:bg-indigo-600 rounded-md",children:[d.jsx("span",{className:"h-5 w-5 mr-3",children:"🔒"}),"Cambiar Contraseña"]}),d.jsxs("button",{onClick:async()=>{try{await n()}catch{alert("Error al cerrar sesión")}},className:"w-full flex items-center px-4 py-3 hover:bg-indigo-700 rounded-md",children:[d.jsx(b1,{className:"h-5 w-5 mr-3"}),"Cerrar Sesión"]})]})]}),r&&d.jsx(N1,{show:r,handleClose:()=>s(!1)})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ii(t){return t+.5|0}const _n=(t,e,n)=>Math.max(Math.min(t,n),e);function Fs(t){return _n(Ii(t*2.55),0,255)}function Ln(t){return _n(Ii(t*255),0,255)}function Qt(t){return _n(Ii(t/2.55)/100,0,1)}function sf(t){return _n(Ii(t*100),0,100)}const ct={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Qc=[..."0123456789ABCDEF"],M1=t=>Qc[t&15],L1=t=>Qc[(t&240)>>4]+Qc[t&15],oo=t=>(t&240)>>4===(t&15),A1=t=>oo(t.r)&&oo(t.g)&&oo(t.b)&&oo(t.a);function D1(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ct[t[1]]*17,g:255&ct[t[2]]*17,b:255&ct[t[3]]*17,a:e===5?ct[t[4]]*17:255}:(e===7||e===9)&&(n={r:ct[t[1]]<<4|ct[t[2]],g:ct[t[3]]<<4|ct[t[4]],b:ct[t[5]]<<4|ct[t[6]],a:e===9?ct[t[7]]<<4|ct[t[8]]:255})),n}const R1=(t,e)=>t<255?e(t):"";function I1(t){var e=A1(t)?M1:L1;return t?"#"+e(t.r)+e(t.g)+e(t.b)+R1(t.a,e):void 0}const F1=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function y0(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function z1(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function $1(t,e,n){const r=y0(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function B1(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function ad(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=B1(n,r,s,u,i),l=l*60+.5),[l|0,c||0,a]}function ld(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Ln)}function cd(t,e,n){return ld(y0,t,e,n)}function U1(t,e,n){return ld($1,t,e,n)}function W1(t,e,n){return ld(z1,t,e,n)}function v0(t){return(t%360+360)%360}function H1(t){const e=F1.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Fs(+e[5]):Ln(+e[5]));const s=v0(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=U1(s,i,o):e[1]==="hsv"?r=W1(s,i,o):r=cd(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function V1(t,e){var n=ad(t);n[0]=v0(n[0]+e),n=cd(n),t.r=n[0],t.g=n[1],t.b=n[2]}function q1(t){if(!t)return;const e=ad(t),n=e[0],r=sf(e[1]),s=sf(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Qt(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const of={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},af={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function K1(){const t={},e=Object.keys(af),n=Object.keys(of);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,of[i]);i=parseInt(af[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let ao;function Y1(t){ao||(ao=K1(),ao.transparent=[0,0,0,0]);const e=ao[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Q1=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function G1(t){const e=Q1.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Fs(o):_n(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Fs(r):_n(r,0,255)),s=255&(e[4]?Fs(s):_n(s,0,255)),i=255&(e[6]?Fs(i):_n(i,0,255)),{r,g:s,b:i,a:n}}}function X1(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Qt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Nl=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,jr=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function J1(t,e,n){const r=jr(Qt(t.r)),s=jr(Qt(t.g)),i=jr(Qt(t.b));return{r:Ln(Nl(r+n*(jr(Qt(e.r))-r))),g:Ln(Nl(s+n*(jr(Qt(e.g))-s))),b:Ln(Nl(i+n*(jr(Qt(e.b))-i))),a:t.a+n*(e.a-t.a)}}function lo(t,e,n){if(t){let r=ad(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=cd(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function x0(t,e){return t&&Object.assign(e||{},t)}function lf(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ln(t[3]))):(e=x0(t,{r:0,g:0,b:0,a:1}),e.a=Ln(e.a)),e}function Z1(t){return t.charAt(0)==="r"?G1(t):H1(t)}class Si{constructor(e){if(e instanceof Si)return e;const n=typeof e;let r;n==="object"?r=lf(e):n==="string"&&(r=D1(e)||Y1(e)||Z1(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=x0(this._rgb);return e&&(e.a=Qt(e.a)),e}set rgb(e){this._rgb=lf(e)}rgbString(){return this._valid?X1(this._rgb):void 0}hexString(){return this._valid?I1(this._rgb):void 0}hslString(){return this._valid?q1(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=J1(this._rgb,e._rgb,n)),this}clone(){return new Si(this.rgb)}alpha(e){return this._rgb.a=Ln(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ii(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return lo(this._rgb,2,e),this}darken(e){return lo(this._rgb,2,-e),this}saturate(e){return lo(this._rgb,1,e),this}desaturate(e){return lo(this._rgb,1,-e),this}rotate(e){return V1(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Wt(){}const ek=(()=>{let t=0;return()=>t++})();function re(t){return t==null}function _e(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function J(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function xt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Dt(t,e){return xt(t)?t:e}function te(t,e){return typeof t>"u"?e:t}const tk=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ae(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ee(t,e,n,r){let s,i,o;if(_e(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(J(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function ua(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function da(t){if(_e(t))return t.map(da);if(J(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=da(t[n[s]]);return e}return t}function w0(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function nk(t,e,n,r){if(!w0(t))return;const s=e[t],i=n[t];J(s)&&J(i)?ji(s,i,r):e[t]=da(i)}function ji(t,e,n){const r=_e(e)?e:[e],s=r.length;if(!J(t))return t;n=n||{};const i=n.merger||nk;let o;for(let a=0;a<s;++a){if(o=r[a],!J(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function ei(t,e){return ji(t,e,{merger:rk})}function rk(t,e,n){if(!w0(t))return;const r=e[t],s=n[t];J(r)&&J(s)?ei(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=da(s))}const cf={"":t=>t,x:t=>t.x,y:t=>t.y};function sk(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function ik(t){const e=sk(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function is(t,e){return(cf[e]||(cf[e]=ik(e)))(t)}function ud(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ei=t=>typeof t<"u",Fn=t=>typeof t=="function",uf=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function ok(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ze=Math.PI,An=2*ze,ha=Number.POSITIVE_INFINITY,ak=ze/180,Tt=ze/2,Yn=ze/4,df=ze*2/3,Gc=Math.log10,Dn=Math.sign;function Mo(t,e,n){return Math.abs(t-e)<n}function hf(t){const e=Math.round(t);t=Mo(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Gc(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function lk(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function ck(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function fa(t){return!ck(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function uk(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function dk(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function ar(t){return t*(ze/180)}function hk(t){return t*(180/ze)}function ff(t){if(!xt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function fk(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*ze&&(i+=An),{angle:i,distance:s}}function pk(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Qn(t){return(t%An+An)%An}function gk(t,e,n,r){const s=Qn(t),i=Qn(e),o=Qn(n),a=Qn(i-s),l=Qn(o-s),c=Qn(s-i),u=Qn(s-o);return s===i||s===o||r&&i===o||a>l&&c<u}function Nt(t,e,n){return Math.max(e,Math.min(n,t))}function mk(t){return Nt(t,-32768,32767)}function $r(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function dd(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Xc=(t,e,n,r)=>dd(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),yk=(t,e,n)=>dd(t,n,r=>t[r][e]>=n);function vk(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const _0=["push","pop","shift","splice","unshift"];function xk(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),_0.forEach(n=>{const r="_onData"+ud(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function pf(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(_0.forEach(i=>{delete t[i]}),delete t._chartjs)}function b0(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const k0=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function S0(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,k0.call(window,()=>{r=!1,t.apply(e,n)}))}}function wk(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const hd=t=>t==="start"?"left":t==="end"?"right":"center",Re=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,_k=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e,co=t=>t===0||t===1,gf=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*An/n)),mf=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*An/n)+1,ti={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Tt)+1,easeOutSine:t=>Math.sin(t*Tt),easeInOutSine:t=>-.5*(Math.cos(ze*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>co(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>co(t)?t:gf(t,.075,.3),easeOutElastic:t=>co(t)?t:mf(t,.075,.3),easeInOutElastic(t){return co(t)?t:t<.5?.5*gf(t*2,.1125,.45):.5+.5*mf(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ti.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ti.easeInBounce(t*2)*.5:ti.easeOutBounce(t*2-1)*.5+.5};function j0(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function yf(t){return j0(t)?t:new Si(t)}function Ol(t){return j0(t)?t:new Si(t).saturate(.5).darken(.1).hexString()}const bk=["x","y","borderWidth","radius","tension"],kk=["color","borderColor","backgroundColor"];function Sk(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:kk},numbers:{type:"number",properties:bk}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function jk(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const vf=new Map;function Ek(t,e){e=e||{};const n=t+JSON.stringify(e);let r=vf.get(n);return r||(r=new Intl.NumberFormat(t,e),vf.set(n,r)),r}function E0(t,e,n){return Ek(e,n).format(t)}const C0={values(t){return _e(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=Ck(t,n)}const o=Gc(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),E0(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(Gc(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?C0.numeric.call(this,t,e,n):""}};function Ck(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var P0={formatters:C0};function Pk(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:P0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const mr=Object.create(null),Jc=Object.create(null);function ni(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function Ml(t,e,n){return typeof e=="string"?ji(ni(t,e),n):ji(ni(t,""),e)}class Tk{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Ol(s.backgroundColor),this.hoverBorderColor=(r,s)=>Ol(s.borderColor),this.hoverColor=(r,s)=>Ol(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Ml(this,e,n)}get(e){return ni(this,e)}describe(e,n){return Ml(Jc,e,n)}override(e,n){return Ml(mr,e,n)}route(e,n,r,s){const i=ni(this,e),o=ni(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return J(l)?Object.assign({},c,l):te(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var me=new Tk({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Sk,jk,Pk]);function Nk(t){return!t||re(t.size)||re(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function xf(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Gn(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function wf(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function _f(t,e,n,r){T0(t,e,n,r,null)}function T0(t,e,n,r,s){let i,o,a,l,c,u,h,f;const p=e.pointStyle,v=e.rotation,y=e.radius;let x=(v||0)*ak;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(x),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),p){default:s?t.ellipse(n,r,s/2,y,0,0,An):t.arc(n,r,y,0,An),t.closePath();break;case"triangle":u=s?s/2:y,t.moveTo(n+Math.sin(x)*u,r-Math.cos(x)*y),x+=df,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*y),x+=df,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*y),t.closePath();break;case"rectRounded":c=y*.516,l=y-c,o=Math.cos(x+Yn)*l,h=Math.cos(x+Yn)*(s?s/2-c:l),a=Math.sin(x+Yn)*l,f=Math.sin(x+Yn)*(s?s/2-c:l),t.arc(n-h,r-a,c,x-ze,x-Tt),t.arc(n+f,r-o,c,x-Tt,x),t.arc(n+h,r+a,c,x,x+Tt),t.arc(n-f,r+o,c,x+Tt,x+ze),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*y,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}x+=Yn;case"rectRot":h=Math.cos(x)*(s?s/2:y),o=Math.cos(x)*y,a=Math.sin(x)*y,f=Math.sin(x)*(s?s/2:y),t.moveTo(n-h,r-a),t.lineTo(n+f,r-o),t.lineTo(n+h,r+a),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":x+=Yn;case"cross":h=Math.cos(x)*(s?s/2:y),o=Math.cos(x)*y,a=Math.sin(x)*y,f=Math.sin(x)*(s?s/2:y),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":h=Math.cos(x)*(s?s/2:y),o=Math.cos(x)*y,a=Math.sin(x)*y,f=Math.sin(x)*(s?s/2:y),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),x+=Yn,h=Math.cos(x)*(s?s/2:y),o=Math.cos(x)*y,a=Math.sin(x)*y,f=Math.sin(x)*(s?s/2:y),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=s?s/2:Math.cos(x)*y,a=Math.sin(x)*y,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(x)*(s?s/2:y),r+Math.sin(x)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function N0(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function fd(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function pd(t){t.restore()}function Ok(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),re(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Mk(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Lk(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ci(t,e,n,r,s,i={}){const o=_e(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,Ok(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&Lk(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),re(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),Mk(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function pa(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*ze,ze,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,ze,Tt,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Tt,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-Tt,!0),t.lineTo(n+o.topLeft,r)}const Ak=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Dk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Rk(t,e){const n=(""+t).match(Ak);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Ik=t=>+t||0;function O0(t,e){const n={},r=J(e),s=r?Object.keys(e):e,i=J(t)?r?o=>te(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=Ik(i(o));return n}function M0(t){return O0(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Yr(t){return O0(t,["topLeft","topRight","bottomLeft","bottomRight"])}function wt(t){const e=M0(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Fe(t,e){t=t||{},e=e||me.font;let n=te(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=te(t.style,e.style);r&&!(""+r).match(Dk)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:te(t.family,e.family),lineHeight:Rk(te(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:te(t.weight,e.weight),string:""};return s.string=Nk(s),s}function uo(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function Fk(t,e,n){const{min:r,max:s}=t,i=tk(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function ps(t,e){return Object.assign(Object.create(t),e)}function gd(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=R0("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>gd([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return A0(a,l,()=>qk(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return kf(a).includes(l)},ownKeys(a){return kf(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function os(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:L0(t,r),setContext:i=>os(t,i,n,r),override:i=>os(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return A0(i,o,()=>$k(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function L0(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Fn(n)?n:()=>n,isIndexable:Fn(r)?r:()=>r}}const zk=(t,e)=>t?t+ud(e):e,md=(t,e)=>J(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function A0(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function $k(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return Fn(a)&&o.isScriptable(e)&&(a=Bk(e,a,t,n)),_e(a)&&a.length&&(a=Uk(e,a,t,o.isIndexable)),md(e,a)&&(a=os(a,s,i&&i[e],o)),a}function Bk(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),md(t,l)&&(l=yd(s._scopes,s,t,l)),l}function Uk(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(J(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=yd(c,s,t,u);e.push(os(h,i,o&&o[t],a))}}return e}function D0(t,e,n){return Fn(t)?t(e,n):t}const Wk=(t,e)=>t===!0?e:typeof t=="string"?is(e,t):void 0;function Hk(t,e,n,r,s){for(const i of e){const o=Wk(n,i);if(o){t.add(o);const a=D0(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function yd(t,e,n,r){const s=e._rootScopes,i=D0(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=bf(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=bf(a,o,i,l,r),l===null)?!1:gd(Array.from(a),[""],s,i,()=>Vk(e,n,r))}function bf(t,e,n,r,s){for(;n;)n=Hk(t,e,n,r,s);return n}function Vk(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return _e(s)&&J(n)?n:s||{}}function qk(t,e,n,r){let s;for(const i of e)if(s=R0(zk(i,t),n),typeof s<"u")return md(t,s)?yd(n,r,t,s):s}function R0(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function kf(t){let e=t._keys;return e||(e=t._keys=Kk(t._scopes)),e}function Kk(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}function vd(){return typeof window<"u"&&typeof document<"u"}function xd(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ga(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Ha=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Yk(t,e){return Ha(t).getPropertyValue(e)}const Qk=["top","right","bottom","left"];function ur(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=Qk[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Gk=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Xk(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(Gk(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function tr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=Ha(n),i=s.boxSizing==="border-box",o=ur(s,"padding"),a=ur(s,"border","width"),{x:l,y:c,box:u}=Xk(t,n),h=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:p,height:v}=e;return i&&(p-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-h)/p*n.width/r),y:Math.round((c-f)/v*n.height/r)}}function Jk(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&xd(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Ha(i),l=ur(a,"border","width"),c=ur(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=ga(a.maxWidth,i,"clientWidth"),s=ga(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||ha,maxHeight:s||ha}}const ho=t=>Math.round(t*10)/10;function Zk(t,e,n,r){const s=Ha(t),i=ur(s,"margin"),o=ga(s.maxWidth,t,"clientWidth")||ha,a=ga(s.maxHeight,t,"clientHeight")||ha,l=Jk(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const f=ur(s,"border","width"),p=ur(s,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=ho(Math.min(c,o,l.maxWidth)),u=ho(Math.min(u,a,l.maxHeight)),c&&!u&&(u=ho(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=ho(Math.floor(u*r))),{width:c,height:u}}function Sf(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const eS=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};vd()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function jf(t,e){const n=Yk(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}const tS=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},nS=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Qr(t,e,n){return t?tS(e,n):nS()}function I0(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function F0(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function fo(t,e,n){return t.options.clip?t[n]:e[n]}function rS(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:fo(n,e,"left"),right:fo(n,e,"right"),top:fo(r,e,"top"),bottom:fo(r,e,"bottom")}:e}function sS(t,e){const n=e._clip;if(n.disabled)return!1;const r=rS(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class iS{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=k0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ht=new iS;const Ef="transparent",oS={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=yf(t||Ef),s=r.valid&&yf(e||Ef);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class aS{constructor(e,n,r,s){const i=n[r];s=uo([e.to,s,i,e.from]);const o=uo([e.from,i,s]);this._active=!0,this._fn=e.fn||oS[e.type||typeof o],this._easing=ti[e.easing]||ti.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=uo([e.to,n,s,e.from]),this._from=uo([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class z0{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!J(e))return;const n=Object.keys(me.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!J(i))return;const o={};for(const a of n)o[a]=i[a];(_e(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=cS(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&lS(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let h=i[c];const f=r.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[c]=u;continue}i[c]=h=new aS(f,e,c,u),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Ht.add(this._chart,r),!0}}function lS(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function cS(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Cf(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function uS(t,e,n){if(n===!1)return!1;const r=Cf(t,n),s=Cf(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function dS(t){let e,n,r,s;return J(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function $0(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function Pf(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],xt(c)&&(i||e===0||Dn(e)===Dn(c))&&(e+=c)}return!u&&!r.all?0:e}function hS(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[i]:t[u]};return a}function Ll(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function fS(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function pS(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function gS(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Tf(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function Nf(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,u=fS(i,o,r),h=e.length;let f;for(let p=0;p<h;++p){const v=e[p],{[l]:y,[c]:x}=v,m=v._stacks||(v._stacks={});f=m[c]=gS(s,u,y),f[a]=x,f._top=Tf(f,o,!0,r.type),f._bottom=Tf(f,o,!1,r.type);const g=f._visualValues||(f._visualValues={});g[a]=x}}function Al(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function mS(t,e){return ps(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function yS(t,e,n){return ps(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Es(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const Dl=t=>t==="reset"||t==="none",Of=(t,e)=>e?t:Object.assign({},t),vS=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:$0(n,!0),values:null};class ri{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ll(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Es(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(h,f,p,v)=>h==="x"?f:h==="r"?v:p,i=n.xAxisID=te(r.xAxisID,Al(e,"x")),o=n.yAxisID=te(r.yAxisID,Al(e,"y")),a=n.rAxisID=te(r.rAxisID,Al(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),u=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&pf(this._data,this),e._stacked&&Es(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(J(n)){const s=this._cachedMeta;this._data=hS(n,s)}else if(r!==n){if(r){pf(r,this);const s=this._cachedMeta;Es(s),s._parsed=[]}n&&Object.isExtensible(n)&&xk(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Ll(n.vScale,n),n.stack!==r.stack&&(s=!0,Es(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(Nf(this,n._parsed),n._stacked=Ll(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,h,f;if(this._parsing===!1)r._parsed=s,r._sorted=!0,f=s;else{_e(s[e])?f=this.parseArrayData(r,s,e,n):J(s[e])?f=this.parseObjectData(r,s,e,n):f=this.parsePrimitiveData(r,s,e,n);const p=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=h=f[u],l&&(p()&&(l=!1),c=h);r._sorted=l}o&&Nf(this,f)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,h=new Array(s);let f,p,v;for(f=0,p=s;f<p;++f)v=f+r,h[f]={[a]:u||i.parse(c[v],v),[l]:o.parse(n[v],v)};return h}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+r,h=n[u],a[l]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,f,p;for(u=0,h=s;u<h;++u)f=u+r,p=n[f],c[u]={x:i.parse(is(p,a),f),y:o.parse(is(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:$0(s,!0),values:n._stacks[e.axis]._visualValues};return Pf(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=Pf(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=vS(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=pS(a);let f,p;function v(){p=s[f];const y=p[a.axis];return!xt(p[e.axis])||u>y||h<y}for(f=0;f<o&&!(!v()&&(this.updateRangeFromParsed(c,e,p,l),i));++f);if(i){for(f=o-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],xt(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=dS(te(this.options.clip,uS(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=yS(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=mS(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Ei(r);if(a)return Of(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(me.elements[e]),v=()=>this.getContext(r,s,n),y=c.resolveNamedOptions(f,p,v,h);return y.$shared&&(y.$shared=l,i[o]=Object.freeze(Of(y,l))),y}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(e,r,n))}const c=new z0(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Dl(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){Dl(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!Dl(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Es(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}G(ri,"defaults",{}),G(ri,"datasetElementType",null),G(ri,"dataElementType",null);function xS(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=b0(r.sort((s,i)=>s-i))}return t._cache.$bar}function wS(t){const e=t.iScale,n=xS(e,t.type);let r=e._length,s,i,o,a;const l=()=>{o===32767||o===-32768||(Ei(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(s=0,i=n.length;s<i;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,i=e.ticks.length;s<i;++s)o=e.getPixelForTick(s),l();return r}function _S(t,e,n,r){const s=n.barThickness;let i,o;return re(s)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=s*r,o=1),{chunk:i/r,ratio:o,start:e.pixels[t]-i/2}}function bS(t,e,n,r){const s=e.pixels,i=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const c=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function kS(t,e,n,r){const s=n.parse(t[0],r),i=n.parse(t[1],r),o=Math.min(s,i),a=Math.max(s,i);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:i,min:o,max:a}}function B0(t,e,n,r){return _e(t)?kS(t,e,n,r):e[n.axis]=n.parse(t,r),e}function Mf(t,e,n,r){const s=t.iScale,i=t.vScale,o=s.getLabels(),a=s===i,l=[];let c,u,h,f;for(c=n,u=n+r;c<u;++c)f=e[c],h={},h[s.axis]=a||s.parse(o[c],c),l.push(B0(f,h,i,c));return l}function Rl(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function SS(t,e,n){return t!==0?Dn(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function jS(t){let e,n,r,s,i;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:e,top:s,bottom:i}}function ES(t,e,n,r){let s=e.borderSkipped;const i={};if(!s){t.borderSkipped=i;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=jS(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=u:(i[Lf(u,o,a,l)]=!0,s=c)),i[Lf(s,o,a,l)]=!0,t.borderSkipped=i}function Lf(t,e,n,r){return r?(t=CS(t,e,n),t=Af(t,n,e)):t=Af(t,e,n),t}function CS(t,e,n){return t===e?n:t===n?e:t}function Af(t,e,n){return t==="start"?e:t==="end"?n:t}function PS(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Lo extends ri{parsePrimitiveData(e,n,r,s){return Mf(e,n,r,s)}parseArrayData(e,n,r,s){return Mf(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=i.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let f,p,v,y;for(f=r,p=r+s;f<p;++f)y=n[f],v={},v[i.axis]=i.parse(is(y,c),f),h.push(B0(is(y,u),v,o,f));return h}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(e),o=i._custom,a=Rl(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const i=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,s);for(let p=n;p<n+r;p++){const v=this.getParsed(p),y=i||re(v[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),x=this._calculateBarIndexPixels(p,u),m=(v._stacks||{})[a.axis],g={horizontal:c,base:y.base,enableBorderRadius:!m||Rl(v._custom)||o===m._top||o===m._bottom,x:c?y.head:x.center,y:c?x.center:y.head,height:c?x.size:Math.abs(y.size),width:c?Math.abs(y.size):x.size};f&&(g.options=h||this.resolveDataElementOptions(p,e[p].active?"active":s));const w=g.options||e[p].options;ES(g,w,m,o),PS(g,w,u.ratio),this.updateElement(e[p],p,g,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const h=u._parsed.find(p=>p[r.axis]===l),f=h&&h[u.vScale.axis];if(re(f)||isNaN(f))return!0};for(const u of s)if(!(n!==void 0&&c(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const s=this._getStacks(e,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,o;for(i=0,o=n.data.length;i<o;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const a=e.barThickness;return{min:a||wS(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),c=l._custom,u=Rl(c);let h=l[n.axis],f=0,p=r?this.applyStack(n,l,r):h,v,y;p!==h&&(f=p-h,p=h),u&&(h=c.barStart,p=c.barEnd-c.barStart,h!==0&&Dn(h)!==Dn(c.barEnd)&&(f=0),f+=h);const x=!re(i)&&!u?i:f;let m=n.getPixelForValue(x);if(this.chart.getDataVisibility(e)?v=n.getPixelForValue(f+p):v=m,y=v-m,Math.abs(y)<o){y=SS(y,n,a)*o,h===a&&(m-=y/2);const g=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),_=Math.min(g,w),S=Math.max(g,w);m=Math.max(Math.min(m,S),_),v=m+y,r&&!u&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(v)-n.getValueForPixel(m))}if(m===n.getPixelForValue(a)){const g=Dn(y)*n.getLineWidthForValue(a)/2;m+=g,y-=g}return{size:y,base:m,head:v,center:v+y/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,i=s.skipNull,o=te(s.maxBarThickness,1/0);let a,l;if(n.grouped){const c=i?this._getStackCount(e):n.stackCount,u=s.barThickness==="flex"?bS(e,n,s,c):_S(e,n,s,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}G(Lo,"id","bar"),G(Lo,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),G(Lo,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Xn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class wd{constructor(e){G(this,"options");this.options=e||{}}static override(e){Object.assign(wd.prototype,e)}init(){}formats(){return Xn()}parse(){return Xn()}format(){return Xn()}add(){return Xn()}diff(){return Xn()}startOf(){return Xn()}endOf(){return Xn()}}var TS={_date:wd};function NS(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?yk:Xc;if(r){if(s._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=c(i,e,n-h),p=c(i,e,n+h);return{lo:f.lo,hi:p.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:h}=s._cachedMeta,{_parsed:f}=t,p=f.slice(0,u.lo+1).reverse().findIndex(y=>!re(y[h.axis]));u.lo-=Math.max(0,p);const v=f.slice(u.hi).findIndex(y=>!re(y[h.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:i.length-1}}function Fi(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:h,hi:f}=NS(i[a],e,o,s);for(let p=h;p<=f;++p){const v=u[p];v.skip||r(v,c,p)}}}function OS(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Il(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||Fi(t,n,e,function(a,l,c){!s&&!N0(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function MS(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=fk(o,{x:e.x,y:e.y});gk(h,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return Fi(t,n,e,i),s}function LS(t,e,n,r,s,i){let o=[];const a=OS(n);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const p=u.inRange(e.x,e.y,s);if(r&&!p)return;const v=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(v))&&!p)return;const x=a(e,v);x<l?(o=[{element:u,datasetIndex:h,index:f}],l=x):x===l&&o.push({element:u,datasetIndex:h,index:f})}return Fi(t,n,e,c),o}function Fl(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?MS(t,e,n,s):LS(t,e,n,r,s,i)}function Df(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Fi(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var AS={evaluateInteractionItems:Fi,modes:{index(t,e,n,r){const s=tr(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Il(t,s,i,r,o):Fl(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=tr(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Il(t,s,i,r,o):Fl(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const s=tr(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Il(t,s,i,r,o)},nearest(t,e,n,r){const s=tr(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Fl(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=tr(e,t);return Df(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=tr(e,t);return Df(t,s,"y",n.intersect,r)}}};const U0=["left","top","right","bottom"];function Cs(t,e){return t.filter(n=>n.pos===e)}function Rf(t,e){return t.filter(n=>U0.indexOf(n.pos)===-1&&n.box.axis===e)}function Ps(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function DS(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function RS(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!U0.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function IS(t,e){const n=RS(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=u?u*s:l&&e.availableHeight)}return n}function FS(t){const e=DS(t),n=Ps(e.filter(c=>c.box.fullSize),!0),r=Ps(Cs(e,"left"),!0),s=Ps(Cs(e,"right")),i=Ps(Cs(e,"top"),!0),o=Ps(Cs(e,"bottom")),a=Rf(e,"x"),l=Rf(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Cs(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function If(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function W0(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function zS(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!J(s)){n.size&&(t[s]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,t[s]+=n.size}i.getPadding&&W0(o,i.getPadding());const a=Math.max(0,e.outerWidth-If(o,t,"left","right")),l=Math.max(0,e.outerHeight-If(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function $S(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function BS(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function zs(t,e,n,r){const s=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,BS(a.horizontal,e));const{same:h,other:f}=zS(e,n,a,r);c|=h&&s.length,u=u||f,l.fullSize||s.push(a)}return c&&zs(s,e,n,r)||u}function po(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function Ff(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,f=c.size||l.height;Ei(c.start)&&(o=c.start),l.fullSize?po(l,s.left,o,n.outerWidth-s.right-s.left,f):po(l,e.left+c.placed,o,h,f),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,f=c.size||l.width;Ei(c.start)&&(i=c.start),l.fullSize?po(l,i,s.top,f,n.outerHeight-s.bottom-s.top):po(l,i,e.top+c.placed,f,h),c.start=i,c.placed+=h,i=l.right}}e.x=i,e.y=o}var pt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=wt(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=FS(t.boxes),l=a.vertical,c=a.horizontal;ee(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=l.reduce((y,x)=>x.box.options&&x.box.options.display===!1?y:y+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},s);W0(f,wt(r));const p=Object.assign({maxPadding:f,w:i,h:o,x:s.left,y:s.top},s),v=IS(l.concat(c),h);zs(a.fullSize,p,h,v),zs(l,p,h,v),zs(c,p,h,v)&&zs(l,p,h,v),$S(p),Ff(a.leftAndTop,p,h,v),p.x+=p.w,p.y+=p.h,Ff(a.rightAndBottom,p,h,v),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},ee(a.chartArea,y=>{const x=y.box;Object.assign(x,t.chartArea),x.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class H0{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class US extends H0{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ao="$chartjs",WS={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},zf=t=>t===null||t==="";function HS(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Ao]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",zf(s)){const i=jf(t,"width");i!==void 0&&(t.width=i)}if(zf(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=jf(t,"height");i!==void 0&&(t.height=i)}return t}const V0=eS?{passive:!0}:!1;function VS(t,e,n){t&&t.addEventListener(e,n,V0)}function qS(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,V0)}function KS(t,e){const n=WS[t.type]||t.type,{x:r,y:s}=tr(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function ma(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function YS(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||ma(a.addedNodes,r),o=o&&!ma(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function QS(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||ma(a.removedNodes,r),o=o&&!ma(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Pi=new Map;let $f=0;function q0(){const t=window.devicePixelRatio;t!==$f&&($f=t,Pi.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function GS(t,e){Pi.size||window.addEventListener("resize",q0),Pi.set(t,e)}function XS(t){Pi.delete(t),Pi.size||window.removeEventListener("resize",q0)}function JS(t,e,n){const r=t.canvas,s=r&&xd(r);if(!s)return;const i=S0((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(s),GS(t,i),o}function zl(t,e,n){n&&n.disconnect(),e==="resize"&&XS(t)}function ZS(t,e,n){const r=t.canvas,s=S0(i=>{t.ctx!==null&&n(KS(i,t))},t);return VS(r,e,s),s}class e2 extends H0{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(HS(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Ao])return!1;const r=n[Ao].initial;["height","width"].forEach(i=>{const o=r[i];re(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Ao],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:YS,detach:QS,resize:JS}[n]||ZS;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:zl,detach:zl,resize:zl}[n]||qS)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return Zk(e,n,r,s)}isAttached(e){const n=e&&xd(e);return!!(n&&n.isConnected)}}function t2(t){return!vd()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?US:e2}class zn{constructor(){G(this,"x");G(this,"y");G(this,"active",!1);G(this,"options");G(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return fa(this.x)&&fa(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}G(zn,"defaults",{}),G(zn,"defaultRoutes");function n2(t,e){const n=t.options.ticks,r=r2(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?i2(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return o2(e,c,i,o/s),c;const u=s2(i,e,s);if(o>0){let h,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(go(e,c,u,re(p)?0:a-p,a),h=0,f=o-1;h<f;h++)go(e,c,u,i[h],i[h+1]);return go(e,c,u,l,re(p)?e.length:l+p),c}return go(e,c,u),c}function r2(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function s2(t,e,n){const r=a2(t),s=e.length/n;if(!r)return Math.max(s,1);const i=lk(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function i2(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function o2(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function go(t,e,n,r,s){const i=te(r,0),o=Math.min(te(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function a2(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const l2=t=>t==="left"?"right":t==="right"?"left":t,Bf=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Uf=(t,e)=>Math.min(e||t,t);function Wf(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function c2(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function u2(t,e){ee(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function Ts(t){return t.drawTicks?t.tickLength:0}function Hf(t,e){if(!t.display)return 0;const n=Fe(t.font,e),r=wt(t.padding);return(_e(t.text)?t.text.length:1)*n.lineHeight+r.height}function d2(t,e){return ps(t,{scale:e,type:"scale"})}function h2(t,e,n){return ps(t,{tick:n,index:e,type:"tick"})}function f2(t,e,n){let r=hd(t);return(n&&e!=="right"||!n&&e==="right")&&(r=l2(r)),r}function p2(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,f,p,v;const y=o-s,x=a-i;if(t.isHorizontal()){if(p=Re(r,i,a),J(n)){const m=Object.keys(n)[0],g=n[m];v=u[m].getPixelForValue(g)+y-e}else n==="center"?v=(c.bottom+c.top)/2+y-e:v=Bf(t,n,e);f=a-i}else{if(J(n)){const m=Object.keys(n)[0],g=n[m];p=u[m].getPixelForValue(g)-x+e}else n==="center"?p=(c.left+c.right)/2-x+e:p=Bf(t,n,e);v=Re(r,o,s),h=n==="left"?-Tt:Tt}return{titleX:p,titleY:v,maxWidth:f,rotation:h}}class gs extends zn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Dt(e,Number.POSITIVE_INFINITY),n=Dt(n,Number.NEGATIVE_INFINITY),r=Dt(r,Number.POSITIVE_INFINITY),s=Dt(s,Number.NEGATIVE_INFINITY),{min:Dt(e,r),max:Dt(n,s),minDefined:xt(e),maxDefined:xt(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Dt(n,Dt(r,n)),max:Dt(r,Dt(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ae(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Fk(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Wf(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=n2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ae(this.options.afterUpdate,[this])}beforeSetDimensions(){ae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ae(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ae(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=ae(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){ae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Uf(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=Nt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),h+6>a&&(a=p/(r-(e.offset?.5:1)),l=this.maxHeight-Ts(e.grid)-n.padding-Hf(e.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),o=hk(Math.min(Math.asin(Nt((u.highest.height+6)/a,-1,1)),Math.asin(Nt(l/c,-1,1))-Math.asin(Nt(f/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ae(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ae(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Hf(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ts(i)+l):(e.height=this.maxHeight,e.width=Ts(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),p=r.padding*2,v=ar(this.labelRotation),y=Math.cos(v),x=Math.sin(v);if(a){const m=r.mirror?0:x*h.width+y*f.height;e.height=Math.min(this.maxHeight,e.height+m+p)}else{const m=r.mirror?0:y*h.width+x*f.height;e.width=Math.min(this.maxWidth,e.width+m+p)}this._calculatePadding(c,u,x,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=s*e.width,p=r*n.height):(f=r*e.height,p=s*n.width):i==="start"?p=n.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ae(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)re(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Wf(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/Uf(n,r));let c=0,u=0,h,f,p,v,y,x,m,g,w,_,S;for(h=0;h<n;h+=l){if(v=e[h].label,y=this._resolveTickFontOptions(h),s.font=x=y.string,m=i[x]=i[x]||{data:{},gc:[]},g=y.lineHeight,w=_=0,!re(v)&&!_e(v))w=xf(s,m.data,m.gc,w,v),_=g;else if(_e(v))for(f=0,p=v.length;f<p;++f)S=v[f],!re(S)&&!_e(S)&&(w=xf(s,m.data,m.gc,w,S),_+=g);o.push(w),a.push(_),c=Math.max(w,c),u=Math.max(_,u)}u2(i,n);const E=o.indexOf(c),k=a.indexOf(u),j=L=>({width:o[L]||0,height:a[L]||0});return{first:j(0),last:j(n-1),widest:j(E),highest:j(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return mk(this._alignToPixels?Gn(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=h2(this.getContext(),e,r))}return this.$context||(this.$context=d2(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ar(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=Ts(i),p=[],v=a.setContext(this.getContext()),y=v.display?v.width:0,x=y/2,m=function(z){return Gn(r,z,y)};let g,w,_,S,E,k,j,L,T,P,O,H;if(o==="top")g=m(this.bottom),k=this.bottom-f,L=g-x,P=m(e.top)+x,H=e.bottom;else if(o==="bottom")g=m(this.top),P=e.top,H=m(e.bottom)-x,k=g+x,L=this.top+f;else if(o==="left")g=m(this.right),E=this.right-f,j=g-x,T=m(e.left)+x,O=e.right;else if(o==="right")g=m(this.left),T=e.left,O=m(e.right)-x,E=g+x,j=this.left+f;else if(n==="x"){if(o==="center")g=m((e.top+e.bottom)/2+.5);else if(J(o)){const z=Object.keys(o)[0],R=o[z];g=m(this.chart.scales[z].getPixelForValue(R))}P=e.top,H=e.bottom,k=g+x,L=k+f}else if(n==="y"){if(o==="center")g=m((e.left+e.right)/2);else if(J(o)){const z=Object.keys(o)[0],R=o[z];g=m(this.chart.scales[z].getPixelForValue(R))}E=g-x,j=E-f,T=e.left,O=e.right}const Q=te(s.ticks.maxTicksLimit,h),W=Math.max(1,Math.ceil(h/Q));for(w=0;w<h;w+=W){const z=this.getContext(w),R=i.setContext(z),N=a.setContext(z),A=R.lineWidth,I=R.color,B=N.dash||[],V=N.dashOffset,Ee=R.tickWidth,Ce=R.tickColor,bt=R.tickBorderDash||[],Pe=R.tickBorderDashOffset;_=c2(this,w,l),_!==void 0&&(S=Gn(r,_,A),c?E=j=T=O=S:k=L=P=H=S,p.push({tx1:E,ty1:k,tx2:j,ty2:L,x1:T,y1:P,x2:O,y2:H,width:A,color:I,borderDash:B,borderDashOffset:V,tickWidth:Ee,tickColor:Ce,tickBorderDash:bt,tickBorderDashOffset:Pe}))}return this._ticksLength=h,this._borderValue=g,p}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=i,f=Ts(r.grid),p=f+u,v=h?-u:p,y=-ar(this.labelRotation),x=[];let m,g,w,_,S,E,k,j,L,T,P,O,H="middle";if(s==="top")E=this.bottom-v,k=this._getXAxisLabelAlignment();else if(s==="bottom")E=this.top+v,k=this._getXAxisLabelAlignment();else if(s==="left"){const W=this._getYAxisLabelAlignment(f);k=W.textAlign,S=W.x}else if(s==="right"){const W=this._getYAxisLabelAlignment(f);k=W.textAlign,S=W.x}else if(n==="x"){if(s==="center")E=(e.top+e.bottom)/2+p;else if(J(s)){const W=Object.keys(s)[0],z=s[W];E=this.chart.scales[W].getPixelForValue(z)+p}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")S=(e.left+e.right)/2-p;else if(J(s)){const W=Object.keys(s)[0],z=s[W];S=this.chart.scales[W].getPixelForValue(z)}k=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?H="top":l==="end"&&(H="bottom"));const Q=this._getLabelSizes();for(m=0,g=a.length;m<g;++m){w=a[m],_=w.label;const W=i.setContext(this.getContext(m));j=this.getPixelForTick(m)+i.labelOffset,L=this._resolveTickFontOptions(m),T=L.lineHeight,P=_e(_)?_.length:1;const z=P/2,R=W.color,N=W.textStrokeColor,A=W.textStrokeWidth;let I=k;o?(S=j,k==="inner"&&(m===g-1?I=this.options.reverse?"left":"right":m===0?I=this.options.reverse?"right":"left":I="center"),s==="top"?c==="near"||y!==0?O=-P*T+T/2:c==="center"?O=-Q.highest.height/2-z*T+T:O=-Q.highest.height+T/2:c==="near"||y!==0?O=T/2:c==="center"?O=Q.highest.height/2-z*T:O=Q.highest.height-P*T,h&&(O*=-1),y!==0&&!W.showLabelBackdrop&&(S+=T/2*Math.sin(y))):(E=j,O=(1-P)*T/2);let B;if(W.showLabelBackdrop){const V=wt(W.backdropPadding),Ee=Q.heights[m],Ce=Q.widths[m];let bt=O-V.top,Pe=0-V.left;switch(H){case"middle":bt-=Ee/2;break;case"bottom":bt-=Ee;break}switch(k){case"center":Pe-=Ce/2;break;case"right":Pe-=Ce;break;case"inner":m===g-1?Pe-=Ce:m>0&&(Pe-=Ce/2);break}B={left:Pe,top:bt,width:Ce+V.width,height:Ee+V.height,color:W.backdropColor}}x.push({label:_,font:L,textOffset:O,options:{rotation:y,color:R,strokeColor:N,strokeWidth:A,textAlign:I,textBaseline:H,translation:[S,E],backdrop:B}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ar(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=Gn(e,this.left,o)-o/2,u=Gn(e,this.right,a)+a/2,h=f=l):(h=Gn(e,this.top,o)-o/2,f=Gn(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&fd(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Ci(r,c,0,u,l,a)}s&&pd(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=Fe(r.font),o=wt(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||J(n)?(l+=o.bottom,_e(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=p2(this,l,n,a);Ci(e,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:f,textAlign:f2(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=te(e.grid&&e.grid.z,-1),s=te(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==gs.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Fe(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class mo{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;y2(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,g2(e,o,r),this.override&&me.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in me[s]&&(delete me[s][r],this.override&&delete mr[r])}}function g2(t,e,n){const r=ji(Object.create(null),[n?me.get(n):{},me.get(e),t.defaults]);me.set(e,r),t.defaultRoutes&&m2(e,t.defaultRoutes),t.descriptors&&me.describe(e,t.descriptors)}function m2(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");me.route(i,s,l,a)})}function y2(t){return"id"in t&&"defaults"in t}class v2{constructor(){this.controllers=new mo(ri,"datasets",!0),this.elements=new mo(zn,"elements"),this.plugins=new mo(Object,"plugins"),this.scales=new mo(gs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):ee(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=ud(e);ae(r["before"+s],[],r),n[e](r),ae(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var zt=new v2;class x2{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(ae(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){re(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=te(r.options&&r.options.plugins,{}),i=w2(r);return s===!1&&!n?[]:b2(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function w2(t){const e={},n=[],r=Object.keys(zt.plugins.items);for(let i=0;i<r.length;i++)n.push(zt.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function _2(t,e){return!e&&t===!1?null:t===!0?{}:t}function b2(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=_2(r[l],s);c!==null&&i.push({plugin:a,options:k2(t.config,{plugin:a,local:n[l]},c,o)})}return i}function k2(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Zc(t,e){const n=me.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function S2(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function j2(t,e){return t===e?"_index_":"_value_"}function Vf(t){if(t==="x"||t==="y"||t==="r")return t}function E2(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function eu(t,...e){if(Vf(t))return t;for(const n of e){const r=n.axis||E2(n.position)||t.length>1&&Vf(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function qf(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function C2(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return qf(t,"x",n[0])||qf(t,"y",n[0])}return{}}function P2(t,e){const n=mr[t.type]||{scales:{}},r=e.scales||{},s=Zc(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!J(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=eu(o,a,C2(o,t),me.scales[a.type]),c=j2(l,s),u=n.scales||{};i[o]=ei(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Zc(a,e),u=(mr[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=S2(h,l),p=o[f+"AxisID"]||f;i[p]=i[p]||Object.create(null),ei(i[p],[{axis:f},r[p],u[h]])})}),Object.keys(i).forEach(o=>{const a=i[o];ei(a,[me.scales[a.type],me.scale])}),i}function K0(t){const e=t.options||(t.options={});e.plugins=te(e.plugins,{}),e.scales=P2(t,e)}function Y0(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function T2(t){return t=t||{},t.data=Y0(t.data),K0(t),t}const Kf=new Map,Q0=new Set;function yo(t,e){let n=Kf.get(t);return n||(n=e(),Kf.set(t,n),Q0.add(n)),n}const Ns=(t,e,n)=>{const r=is(e,n);r!==void 0&&t.add(r)};class N2{constructor(e){this._config=T2(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Y0(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),K0(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return yo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return yo(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return yo(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return yo(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>Ns(l,e,h))),u.forEach(h=>Ns(l,s,h)),u.forEach(h=>Ns(l,mr[i]||{},h)),u.forEach(h=>Ns(l,me,h)),u.forEach(h=>Ns(l,Jc,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Q0.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,mr[n]||{},me.datasets[n]||{},{type:n},me,Jc]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Yf(this._resolverCache,e,s);let l=o;if(M2(o,n)){i.$shared=!1,r=Fn(r)?r():r;const c=this.createResolver(e,r,a);l=os(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=Yf(this._resolverCache,e,r);return J(n)?os(i,n,void 0,s):i}}function Yf(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:gd(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const O2=t=>J(t)&&Object.getOwnPropertyNames(t).some(e=>Fn(t[e]));function M2(t,e){const{isScriptable:n,isIndexable:r}=L0(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(Fn(a)||O2(a))||o&&_e(a))return!0}return!1}var L2="4.4.9";const A2=["top","bottom","left","right","chartArea"];function Qf(t,e){return t==="top"||t==="bottom"||A2.indexOf(t)===-1&&e==="x"}function Gf(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Xf(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ae(n&&n.onComplete,[t],e)}function D2(t){const e=t.chart,n=e.options.animation;ae(n&&n.onProgress,[t],e)}function G0(t){return vd()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Do={},Jf=t=>{const e=G0(t);return Object.values(Do).filter(n=>n.canvas===e).pop()};function R2(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function I2(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var cn;let Va=(cn=class{static register(...e){zt.add(...e),Zf()}static unregister(...e){zt.remove(...e),Zf()}constructor(e,n){const r=this.config=new N2(n),s=G0(e),i=Jf(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||t2(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=ek(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new x2,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=wk(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Do[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ht.listen(this,"complete",Xf),Ht.listen(this,"progress",D2),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return re(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return zt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Sf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return wf(this.canvas,this.ctx),this}stop(){return Ht.stop(this),this}resize(e,n){Ht.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Sf(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ae(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ee(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=eu(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ee(i,o=>{const a=o.options,l=a.id,c=eu(l,a),u=te(a.type,o.dtype);(a.position===void 0||Qf(a.position,c)!==Qf(o.dposition))&&(a.position=o.dposition),s[l]=!0;let h=null;if(l in r&&r[l].type===u)h=r[l];else{const f=zt.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(a,e)}),ee(s,(o,a)=>{o||delete r[a]}),ee(r,o=>{pt.configure(this,o,o.options),pt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Gf("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||Zc(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=zt.getController(a),{datasetElementType:c,dataElementType:u}=me.datasets[a];Object.assign(l,{dataElementType:zt.getElement(u),datasetElementType:c&&zt.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ee(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!s&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||ee(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Gf("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ee(this.scales,e=>{pt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!uf(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;R2(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!uf(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;pt.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ee(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Fn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ht.has(this)?this.attached&&!Ht.running(this)&&Ht.start(this):(this.draw(),Xf({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=sS(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&fd(n,s),e.controller.draw(),s&&pd(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return N0(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=AS.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=ps(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);Ei(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ht.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),wf(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Do[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};ee(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ee(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ee(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!ua(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=ok(e),c=I2(e,this._lastEvent,r,l);r&&(this._lastEvent=null,ae(i.onHover,[e,a,this],this),l&&ae(i.onClick,[e,a,this],this));const u=!ua(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},G(cn,"defaults",me),G(cn,"instances",Do),G(cn,"overrides",mr),G(cn,"registry",zt),G(cn,"version",L2),G(cn,"getChart",Jf),cn);function Zf(){return ee(Va.instances,t=>t._plugins.invalidate())}function X0(t,e){const{x:n,y:r,base:s,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,s),l=Math.max(n,s),c=r-h,u=r+h):(h=i/2,a=n-h,l=n+h,c=Math.min(r,s),u=Math.max(r,s)),{left:a,top:c,right:l,bottom:u}}function bn(t,e,n,r){return t?0:Nt(e,n,r)}function F2(t,e,n){const r=t.options.borderWidth,s=t.borderSkipped,i=M0(r);return{t:bn(s.top,i.top,0,n),r:bn(s.right,i.right,0,e),b:bn(s.bottom,i.bottom,0,n),l:bn(s.left,i.left,0,e)}}function z2(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,i=Yr(s),o=Math.min(e,n),a=t.borderSkipped,l=r||J(s);return{topLeft:bn(!l||a.top||a.left,i.topLeft,0,o),topRight:bn(!l||a.top||a.right,i.topRight,0,o),bottomLeft:bn(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:bn(!l||a.bottom||a.right,i.bottomRight,0,o)}}function $2(t){const e=X0(t),n=e.right-e.left,r=e.bottom-e.top,s=F2(t,n/2,r/2),i=z2(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:i},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function $l(t,e,n,r){const s=e===null,i=n===null,a=t&&!(s&&i)&&X0(t,r);return a&&(s||$r(e,a.left,a.right))&&(i||$r(n,a.top,a.bottom))}function B2(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function U2(t,e){t.rect(e.x,e.y,e.w,e.h)}function Bl(t,e,n={}){const r=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+i,h:t.h+o,radius:t.radius}}class Ro extends zn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:o}=$2(this),a=B2(o.radius)?pa:U2;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,Bl(o,n,i)),e.clip(),a(e,Bl(i,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,Bl(i,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,r){return $l(this,e,n,r)}inXRange(e,n){return $l(this,e,null,n)}inYRange(e,n){return $l(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}G(Ro,"id","bar"),G(Ro,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),G(Ro,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const ep=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},W2=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class tp extends zn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ae(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Fe(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=ep(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((v,y)=>{const x=r+n/2+i.measureText(v.text).width;(y===0||c[c.length-1]+x+2*a>o)&&(h+=u,c[c.length-(y>0?0:1)]=0,p+=u,f++),l[y]={left:0,top:p,row:f,width:x,height:s},c[c.length-1]+=x+a}),h}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,f=0,p=0,v=0,y=0;return this.legendItems.forEach((x,m)=>{const{itemWidth:g,itemHeight:w}=H2(r,n,i,x,s);m>0&&p+w+2*a>u&&(h+=f+a,c.push({width:f,height:p}),v+=f+a,y++,f=p=0),l[m]={left:v,top:p,col:y,width:g,height:w},f=Math.max(f,g),p+=w+a}),h+=f,c.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Qr(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=Re(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Re(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Re(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Re(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;fd(e,this),this._draw(),pd(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=me.color,l=Qr(e.rtl,this.left,this.width),c=Fe(o.font),{padding:u}=o,h=c.size,f=h/2;let p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:v,boxHeight:y,itemHeight:x}=ep(o,h),m=function(E,k,j){if(isNaN(v)||v<=0||isNaN(y)||y<0)return;s.save();const L=te(j.lineWidth,1);if(s.fillStyle=te(j.fillStyle,a),s.lineCap=te(j.lineCap,"butt"),s.lineDashOffset=te(j.lineDashOffset,0),s.lineJoin=te(j.lineJoin,"miter"),s.lineWidth=L,s.strokeStyle=te(j.strokeStyle,a),s.setLineDash(te(j.lineDash,[])),o.usePointStyle){const T={radius:y*Math.SQRT2/2,pointStyle:j.pointStyle,rotation:j.rotation,borderWidth:L},P=l.xPlus(E,v/2),O=k+f;T0(s,T,P,O,o.pointStyleWidth&&v)}else{const T=k+Math.max((h-y)/2,0),P=l.leftForLtr(E,v),O=Yr(j.borderRadius);s.beginPath(),Object.values(O).some(H=>H!==0)?pa(s,{x:P,y:T,w:v,h:y,radius:O}):s.rect(P,T,v,y),s.fill(),L!==0&&s.stroke()}s.restore()},g=function(E,k,j){Ci(s,j.text,E,k+x/2,c,{strikethrough:j.hidden,textAlign:l.textAlign(j.textAlign)})},w=this.isHorizontal(),_=this._computeTitleHeight();w?p={x:Re(i,this.left+u,this.right-r[0]),y:this.top+u+_,line:0}:p={x:this.left+u,y:Re(i,this.top+_+u,this.bottom-n[0].height),line:0},I0(this.ctx,e.textDirection);const S=x+u;this.legendItems.forEach((E,k)=>{s.strokeStyle=E.fontColor,s.fillStyle=E.fontColor;const j=s.measureText(E.text).width,L=l.textAlign(E.textAlign||(E.textAlign=o.textAlign)),T=v+f+j;let P=p.x,O=p.y;l.setWidth(this.width),w?k>0&&P+T+u>this.right&&(O=p.y+=S,p.line++,P=p.x=Re(i,this.left+u,this.right-r[p.line])):k>0&&O+S>this.bottom&&(P=p.x=P+n[p.line].width+u,p.line++,O=p.y=Re(i,this.top+_+u,this.bottom-n[p.line].height));const H=l.x(P);if(m(H,O,E),P=_k(L,P+v+f,w?P+T:this.right,e.rtl),g(l.x(P),O,E),w)p.x+=T+u;else if(typeof E.text!="string"){const Q=c.lineHeight;p.y+=J0(E,Q)+u}else p.y+=S}),F0(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Fe(n.font),s=wt(n.padding);if(!n.display)return;const i=Qr(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=Re(e.align,h,this.right-f);else{const v=this.columnSizes.reduce((y,x)=>Math.max(y,x.height),0);u=c+Re(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const p=Re(a,h,h+f);o.textAlign=i.textAlign(hd(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Ci(o,n.text,p,u,r)}_computeTitleHeight(){const e=this.options.title,n=Fe(e.font),r=wt(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if($r(e,this.left,this.right)&&$r(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],$r(e,s.left,s.left+s.width)&&$r(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!K2(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=W2(s,r);s&&!i&&ae(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&ae(n.onHover,[e,r,this],this)}else r&&ae(n.onClick,[e,r,this],this)}}function H2(t,e,n,r,s){const i=V2(r,t,e,n),o=q2(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function V2(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function q2(t,e,n){let r=t;return typeof e.text!="string"&&(r=J0(e,n)),r}function J0(t,e){const n=t.text?t.text.length:0;return e*n}function K2(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Y2={id:"legend",_element:tp,start(t,e,n){const r=t.legend=new tp({ctx:t.ctx,options:n,chart:t});pt.configure(t,r,n),pt.addBox(t,r)},stop(t){pt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;pt.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=wt(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Z0 extends zn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=_e(r.text)?r.text.length:1;this._padding=wt(r.padding);const i=s*Fe(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Re(a,r,i),h=n+e,c=i-r):(o.position==="left"?(u=r+e,h=Re(a,s,n),l=ze*-.5):(u=i-e,h=Re(a,n,s),l=ze*.5),c=s-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Fe(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);Ci(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:hd(n.align),textBaseline:"middle",translation:[o,a]})}}function Q2(t,e){const n=new Z0({ctx:t.ctx,options:e,chart:t});pt.configure(t,n,e),pt.addBox(t,n),t.titleBlock=n}var G2={id:"title",_element:Z0,start(t,e,n){Q2(t,n)},stop(t){const e=t.titleBlock;pt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;pt.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const $s={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=pk(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function It(t,e){return e&&(_e(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Vt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function X2(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function np(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Fe(e.bodyFont),c=Fe(e.titleFont),u=Fe(e.footerFont),h=i.length,f=s.length,p=r.length,v=wt(e.padding);let y=v.height,x=0,m=r.reduce((_,S)=>_+S.before.length+S.lines.length+S.after.length,0);if(m+=t.beforeBody.length+t.afterBody.length,h&&(y+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),m){const _=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=p*_+(m-p)*l.lineHeight+(m-1)*e.bodySpacing}f&&(y+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let g=0;const w=function(_){x=Math.max(x,n.measureText(_).width+g)};return n.save(),n.font=c.string,ee(t.title,w),n.font=l.string,ee(t.beforeBody.concat(t.afterBody),w),g=e.displayColors?o+2+e.boxPadding:0,ee(r,_=>{ee(_.before,w),ee(_.lines,w),ee(_.after,w)}),g=0,n.font=u.string,ee(t.footer,w),n.restore(),x+=v.width,{width:x,height:y}}function J2(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function Z2(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function ej(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),Z2(c,t,e,n)&&(c="center"),c}function rp(t,e,n){const r=n.yAlign||e.yAlign||J2(t,n);return{xAlign:n.xAlign||e.xAlign||ej(t,e,n,r),yAlign:r}}function tj(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function nj(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function sp(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=Yr(o);let v=tj(e,a);const y=nj(e,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(u,f)+s:a==="right"&&(v+=Math.max(h,p)+s),{x:Nt(v,0,r.width-e.width),y:Nt(y,0,r.height-e.height)}}function vo(t,e,n){const r=wt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function ip(t){return It([],Vt(t))}function rj(t,e,n){return ps(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function op(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const ey={beforeTitle:Wt,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Wt,beforeBody:Wt,beforeLabel:Wt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return re(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Wt,afterBody:Wt,beforeFooter:Wt,footer:Wt,afterFooter:Wt};function Ye(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?ey[e].call(n,r):s}class tu extends zn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new z0(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=rj(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Ye(r,"beforeTitle",this,e),i=Ye(r,"title",this,e),o=Ye(r,"afterTitle",this,e);let a=[];return a=It(a,Vt(s)),a=It(a,Vt(i)),a=It(a,Vt(o)),a}getBeforeBody(e,n){return ip(Ye(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return ee(e,i=>{const o={before:[],lines:[],after:[]},a=op(r,i);It(o.before,Vt(Ye(a,"beforeLabel",this,i))),It(o.lines,Ye(a,"label",this,i)),It(o.after,Vt(Ye(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return ip(Ye(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Ye(r,"beforeFooter",this,e),i=Ye(r,"footer",this,e),o=Ye(r,"afterFooter",this,e);let a=[];return a=It(a,Vt(s)),a=It(a,Vt(i)),a=It(a,Vt(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(X2(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,f)=>e.filter(u,h,f,r))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,r))),ee(a,u=>{const h=op(e.callbacks,u);s.push(Ye(h,"labelColor",this,u)),i.push(Ye(h,"labelPointStyle",this,u)),o.push(Ye(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=$s[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=np(this,r),c=Object.assign({},a,l),u=rp(this.chart,r,c),h=sp(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Yr(a),{x:f,y:p}=e,{width:v,height:y}=n;let x,m,g,w,_,S;return i==="center"?(_=p+y/2,s==="left"?(x=f,m=x-o,w=_+o,S=_-o):(x=f+v,m=x+o,w=_-o,S=_+o),g=x):(s==="left"?m=f+Math.max(l,u)+o:s==="right"?m=f+v-Math.max(c,h)-o:m=this.caretX,i==="top"?(w=p,_=w-o,x=m-o,g=m+o):(w=p+y,_=w+o,x=m+o,g=m-o),S=w),{x1:x,x2:m,x3:g,y1:w,y2:_,y3:S}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=Qr(r.rtl,this.x,this.width);for(e.x=vo(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Fe(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=Fe(i.bodyFont),h=vo(this,"left",i),f=s.x(h),p=l<u.lineHeight?(u.lineHeight-l)/2:0,v=n.y+p;if(i.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=s.leftForLtr(f,c)+c/2,m=v+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,_f(e,y,x,m),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,_f(e,y,x,m)}else{e.lineWidth=J(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=s.leftForLtr(f,c),x=s.leftForLtr(s.xPlus(f,1),c-2),m=Yr(o.borderRadius);Object.values(m).some(g=>g!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,pa(e,{x:y,y:v,w:c,h:l,radius:m}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),pa(e,{x,y:v+1,w:c-2,h:l-2,radius:m}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(y,v,c,l),e.strokeRect(y,v,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,v+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,h=Fe(r.bodyFont);let f=h.lineHeight,p=0;const v=Qr(r.rtl,this.x,this.width),y=function(j){n.fillText(j,v.x(e.x+p),e.y+f/2),e.y+=f+i},x=v.textAlign(o);let m,g,w,_,S,E,k;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=vo(this,x,r),n.fillStyle=r.bodyColor,ee(this.beforeBody,y),p=a&&x!=="right"?o==="center"?c/2+u:c+2+u:0,_=0,E=s.length;_<E;++_){for(m=s[_],g=this.labelTextColors[_],n.fillStyle=g,ee(m.before,y),w=m.lines,a&&w.length&&(this._drawColorBox(n,e,_,v,r),f=Math.max(h.lineHeight,l)),S=0,k=w.length;S<k;++S)y(w[S]),f=h.lineHeight;ee(m.after,y)}p=0,f=h.lineHeight,ee(this.afterBody,y),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=Qr(r.rtl,this.x,this.width);for(e.x=vo(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Fe(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:v}=Yr(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+u-v),n.quadraticCurveTo(a+c,l+u,a+c-v,l+u),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=$s[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=np(this,e),l=Object.assign({},o,this._size),c=rp(n,e,l),u=sp(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=wt(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),I0(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),F0(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!ua(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!ua(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=$s[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}G(tu,"positioners",$s);var sj={id:"tooltip",_element:tu,positioners:$s,afterInit(t,e,n){n&&(t.tooltip=new tu({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ey},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const ij=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function oj(t,e,n,r){const s=t.indexOf(e);if(s===-1)return ij(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const aj=(t,e)=>t===null?null:Nt(Math.round(t),0,e);function ap(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class nu extends gs{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(re(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:oj(r,e,te(n,e),this._addedLabels),aj(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return ap.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}G(nu,"id","category"),G(nu,"defaults",{ticks:{callback:ap}});function lj(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=t,p=i||1,v=u-1,{min:y,max:x}=e,m=!re(o),g=!re(a),w=!re(c),_=(x-y)/(h+1);let S=hf((x-y)/v/p)*p,E,k,j,L;if(S<1e-14&&!m&&!g)return[{value:y},{value:x}];L=Math.ceil(x/S)-Math.floor(y/S),L>v&&(S=hf(L*S/v/p)*p),re(l)||(E=Math.pow(10,l),S=Math.ceil(S*E)/E),s==="ticks"?(k=Math.floor(y/S)*S,j=Math.ceil(x/S)*S):(k=y,j=x),m&&g&&i&&uk((a-o)/i,S/1e3)?(L=Math.round(Math.min((a-o)/S,u)),S=(a-o)/L,k=o,j=a):w?(k=m?o:k,j=g?a:j,L=c-1,S=(j-k)/L):(L=(j-k)/S,Mo(L,Math.round(L),S/1e3)?L=Math.round(L):L=Math.ceil(L));const T=Math.max(ff(S),ff(k));E=Math.pow(10,re(l)?T:l),k=Math.round(k*E)/E,j=Math.round(j*E)/E;let P=0;for(m&&(f&&k!==o?(n.push({value:o}),k<o&&P++,Mo(Math.round((k+P*S)*E)/E,o,lp(o,_,t))&&P++):k<o&&P++);P<L;++P){const O=Math.round((k+P*S)*E)/E;if(g&&O>a)break;n.push({value:O})}return g&&f&&j!==a?n.length&&Mo(n[n.length-1].value,a,lp(a,_,t))?n[n.length-1].value=a:n.push({value:a}):(!g||j===a)&&n.push({value:j}),n}function lp(t,e,{horizontal:n,minRotation:r}){const s=ar(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class cj extends gs{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return re(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=Dn(s),c=Dn(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=lj(s,i);return e.bounds==="ticks"&&dk(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return E0(e,this.chart.options.locale,this.options.ticks.format)}}class ru extends cj{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=xt(e)?e:0,this.max=xt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=ar(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}G(ru,"id","linear"),G(ru,"defaults",{ticks:{callback:P0.formatters.numeric}});const qa={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Xe=Object.keys(qa);function cp(t,e){return t-e}function up(t,e){if(re(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),xt(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(fa(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function dp(t,e,n,r){const s=Xe.length;for(let i=Xe.indexOf(t);i<s-1;++i){const o=qa[Xe[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Xe[i]}return Xe[s-1]}function uj(t,e,n,r,s){for(let i=Xe.length-1;i>=Xe.indexOf(n);i--){const o=Xe[i];if(qa[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return Xe[n?Xe.indexOf(n):0]}function dj(t){for(let e=Xe.indexOf(t)+1,n=Xe.length;e<n;++e)if(qa[Xe[e]].common)return Xe[e]}function hp(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=dd(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function hj(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function fp(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:hj(t,r,s,n)}class ya extends gs{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new TS._date(e.adapters.date);s.init(n),ei(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:up(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=xt(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=xt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=vk(s,i,o);return this._unit=n.unit||(r.autoSkip?dp(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):uj(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:dj(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),fp(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Nt(n,0,o),r=Nt(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||dp(i.minUnit,n,r,this._getLabelCapacity(n)),a=te(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=fa(l)||l===!0,u={};let h=n,f,p;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<r;f=+e.add(f,a,o),p++)hp(u,f,v);return(f===r||s.bounds==="ticks"||p===1)&&hp(u,f,v),Object.keys(u).sort(cp).map(y=>+y)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return ae(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=r[n],p=c&&h&&f&&f.major;return this._adapter.format(e,s||(p?h:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=ar(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,fp(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(up(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return b0(e.sort(cp))}}G(ya,"id","time"),G(ya,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function xo(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=Xc(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=Xc(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class pp extends ya{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=xo(n,this.min),this._tableRange=xo(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(xo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return xo(this._table,r*this._tableRange+this._minPos,!0)}}G(pp,"id","timeseries"),G(pp,"defaults",ya.defaults);const ty="label";function gp(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function fj(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function ny(t,e){t.labels=e}function ry(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ty;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function pj(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ty;const n={labels:[],datasets:[]};return ny(n,t.labels),ry(n,t.datasets,e),n}function gj(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...f}=t,p=b.useRef(null),v=b.useRef(null),y=()=>{p.current&&(v.current=new Va(p.current,{type:o,data:pj(a,i),options:l&&{...l},plugins:c}),gp(e,v.current))},x=()=>{gp(e,null),v.current&&(v.current.destroy(),v.current=null)};return b.useEffect(()=>{!s&&v.current&&l&&fj(v.current,l)},[s,l]),b.useEffect(()=>{!s&&v.current&&ny(v.current.config.data,a.labels)},[s,a.labels]),b.useEffect(()=>{!s&&v.current&&a.datasets&&ry(v.current.config.data,a.datasets,i)},[s,a.datasets]),b.useEffect(()=>{v.current&&(s?(x(),setTimeout(y)):v.current.update(h))},[s,l,a.labels,a.datasets,h]),b.useEffect(()=>{v.current&&(x(),setTimeout(y))},[o]),b.useEffect(()=>(y(),()=>x()),[]),kn.createElement("canvas",{ref:p,role:"img",height:n,width:r,...f},u)}const mj=b.forwardRef(gj);function yj(t,e){return Va.register(e),b.forwardRef((n,r)=>kn.createElement(mj,{...n,ref:r,type:t}))}const vj=yj("bar",Lo);Va.register(nu,ru,Ro,G2,sj,Y2);function xj(){const{currentUser:t}=_t(),[e,n]=b.useState([]),[r,s]=b.useState(!0),[i,o]=b.useState(null);if(b.useEffect(()=>{(async()=>{if(t)try{let h=q.from("tasks").select("*");t.role!=="admin"&&(h=h.eq("assigned_user_auth_id",t.id));const{data:f,error:p}=await h;if(p)throw new Error("Error al obtener tareas");n(f||[])}catch(h){o(h instanceof Error?h.message:"Error fetching tasks")}finally{s(!1)}})()},[t]),!t)return d.jsx("p",{className:"p-8 text-center",children:"Please log in."});if(r)return d.jsx("div",{className:"p-8 text-center",children:"Loading dashboard data..."});if(i)return d.jsxs("div",{className:"p-8 text-center text-red-600",children:["Error: ",i]});const a=()=>{const u={Pendiente:0,OK:0};return e.forEach(h=>{h.status&&(u[h.status]=(u[h.status]||0)+1)}),{labels:Object.keys(u),datasets:[{label:"Number of Tasks",data:Object.values(u),backgroundColor:["rgba(255, 159, 64, 0.7)","rgba(75, 192, 192, 0.7)"],borderColor:["rgb(255, 159, 64)","rgb(75, 192, 192)"],borderWidth:1}]}},l=()=>{const u={};e.forEach(p=>{!p.stores||!p.status||p.stores.forEach(v=>{u[v]||(u[v]={Pendiente:0,OK:0}),u[v][p.status]=(u[v][p.status]||0)+1})});const h=Object.keys(u);return{labels:h,datasets:["Pendiente","OK"].map((p,v)=>({label:p,data:h.map(y=>u[y][p]),backgroundColor:["rgba(255, 159, 64, 0.7)","rgba(75, 192, 192, 0.7)"][v],borderColor:["rgb(255, 159, 64)","rgb(75, 192, 192)"][v],borderWidth:1}))}},c={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:t.role==="admin"?"Tasks by Store and Status":"Your Tasks by Status"}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}};return d.jsxs("div",{className:"p-8",children:[d.jsxs("div",{className:"mb-8 text-center",children:[d.jsxs("h1",{className:"text-2xl font-bold mb-4",children:["Welcome, ",t.name]}),d.jsxs("p",{className:"text-gray-600",children:["Store: ",t.store]}),d.jsxs("p",{className:"text-gray-500 text-sm",children:["Role: ",t.role]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-8",children:d.jsx("div",{className:"w-full h-[400px]",children:d.jsx(vj,{options:c,data:t.role==="admin"?l():a()})})}),d.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Total Tasks"}),d.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:e.length})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Tareas Pendientes"}),d.jsx("p",{className:"text-3xl font-bold text-orange-500",children:e.filter(u=>u.status==="Pendiente").length})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Tareas OK"}),d.jsx("p",{className:"text-3xl font-bold text-teal-500",children:e.filter(u=>u.status==="OK").length})]})]})]})}function wj(){const[t,e]=b.useState(""),[n,r]=b.useState(""),[s,i]=b.useState(""),{login:o,isLoading:a,currentUser:l}=_t(),c=Vn();b.useEffect(()=>{l&&c("/")},[l,c]);const u=async h=>{if(h.preventDefault(),i(""),!t||!n){i("Por favor, completa todos los campos.");return}try{await o(t,n)}catch(f){f instanceof Error&&(f.message.includes("Invalid login credentials")?i("Email o contraseña incorrectos."):i("Error al iniciar sesión. Por favor intenta nuevamente."))}};return d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:d.jsxs("div",{className:"p-8 bg-white shadow-xl rounded-lg w-full max-w-md",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx(_1,{className:"mx-auto text-indigo-600 h-16 w-16"}),d.jsx("h1",{className:"text-2xl font-bold text-gray-800 mt-4",children:"Iniciar Sesión"}),d.jsx("p",{className:"text-gray-600",children:"Gestor de Tareas Wild Lama"})]}),d.jsxs("form",{onSubmit:u,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),d.jsx("input",{type:"email",id:"email",value:t,onChange:h=>e(h.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),d.jsx("input",{type:"password",id:"password",value:n,onChange:h=>r(h.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:!0})]}),s&&d.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded",children:d.jsx("p",{className:"text-red-700 text-sm",children:s})}),d.jsx("button",{type:"submit",disabled:a,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-300",children:a?"Iniciando sesión...":"Iniciar Sesión"})]})]})})}function _j(){const[t,e]=b.useState(""),[n,r]=b.useState(""),[s,i]=b.useState(""),[o,a]=b.useState(""),[l,c]=b.useState(!1),u=Vn(),{register:h}=_t(),f=async p=>{p.preventDefault(),a(""),c(!0);try{await h(t,n,s)?u("/login"):a("No se pudo registrar el usuario.")}catch(v){const y=v instanceof Error?v.message:"Error al registrar.";a(y)}finally{c(!1)}};return d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:d.jsxs("div",{className:"p-8 bg-white shadow-xl rounded-lg w-full max-w-md",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Registro"}),d.jsxs("form",{onSubmit:f,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre"}),d.jsx("input",{type:"text",id:"name",value:t,onChange:p=>e(p.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),d.jsx("input",{type:"email",id:"email",value:n,onChange:p=>r(p.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),d.jsx("input",{type:"password",id:"password",value:s,onChange:p=>i(p.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),o&&d.jsx("p",{className:"text-red-500 text-sm text-center",children:o}),d.jsx("button",{type:"submit",disabled:l,className:"w-full py-2 px-4 bg-indigo-600 text-white rounded-md font-medium hover:bg-indigo-700 disabled:bg-indigo-300",children:l?"Registrando...":"Registrarse"})]}),d.jsx("div",{className:"mt-4 text-center",children:d.jsx("button",{onClick:()=>u("/login"),className:"text-indigo-600 hover:underline text-sm",children:"¿Ya tienes cuenta? Inicia sesión"})})]})})}function $e(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function $n(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const sy=6048e5,bj=864e5;let kj={};function Ka(){return kj}function Ti(t,e){var a,l,c,u;const n=Ka(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=$e(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function va(t){return Ti(t,{weekStartsOn:1})}function iy(t){const e=$e(t),n=e.getFullYear(),r=$n(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=va(r),i=$n(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=va(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function xa(t){const e=$e(t);return e.setHours(0,0,0,0),e}function mp(t){const e=$e(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Sj(t,e){const n=xa(t),r=xa(e),s=+n-mp(n),i=+r-mp(r);return Math.round((s-i)/bj)}function jj(t){const e=iy(t),n=$n(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),va(n)}function Ej(t){return $n(t,Date.now())}function oy(t,e){const n=xa(t),r=xa(e);return+n==+r}function Cj(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Pj(t){if(!Cj(t)&&typeof t!="number")return!1;const e=$e(t);return!isNaN(Number(e))}function Tj(t){const e=$e(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Nj(t,e){const n=$e(t.start),r=$e(t.end);let s=+n>+r;const i=s?+n:+r,o=s?r:n;o.setHours(0,0,0,0);let a=1;const l=[];for(;+o<=i;)l.push($e(o)),o.setDate(o.getDate()+a),o.setHours(0,0,0,0);return s?l.reverse():l}function Oj(t){const e=$e(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Mj(t){const e=$e(t),n=$n(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Lj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Aj=(t,e,n)=>{let r;const s=Lj[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Ul(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Dj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Rj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ij={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Fj={date:Ul({formats:Dj,defaultWidth:"full"}),time:Ul({formats:Rj,defaultWidth:"full"}),dateTime:Ul({formats:Ij,defaultWidth:"full"})},zj={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$j=(t,e,n,r)=>zj[t];function Os(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const Bj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Uj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Wj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Hj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Vj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Kj=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Yj={ordinalNumber:Kj,era:Os({values:Bj,defaultWidth:"wide"}),quarter:Os({values:Uj,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Os({values:Wj,defaultWidth:"wide"}),day:Os({values:Hj,defaultWidth:"wide"}),dayPeriod:Os({values:Vj,defaultWidth:"wide",formattingValues:qj,defaultFormattingWidth:"wide"})};function Ms(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Gj(a,h=>h.test(o)):Qj(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function Qj(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Gj(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Xj(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const Jj=/^(\d+)(th|st|nd|rd)?/i,Zj=/\d+/i,eE={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},tE={any:[/^b/i,/^(a|c)/i]},nE={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rE={any:[/1/i,/2/i,/3/i,/4/i]},sE={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},iE={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oE={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aE={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lE={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cE={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uE={ordinalNumber:Xj({matchPattern:Jj,parsePattern:Zj,valueCallback:t=>parseInt(t,10)}),era:Ms({matchPatterns:eE,defaultMatchWidth:"wide",parsePatterns:tE,defaultParseWidth:"any"}),quarter:Ms({matchPatterns:nE,defaultMatchWidth:"wide",parsePatterns:rE,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ms({matchPatterns:sE,defaultMatchWidth:"wide",parsePatterns:iE,defaultParseWidth:"any"}),day:Ms({matchPatterns:oE,defaultMatchWidth:"wide",parsePatterns:aE,defaultParseWidth:"any"}),dayPeriod:Ms({matchPatterns:lE,defaultMatchWidth:"any",parsePatterns:cE,defaultParseWidth:"any"})},dE={code:"en-US",formatDistance:Aj,formatLong:Fj,formatRelative:$j,localize:Yj,match:uE,options:{weekStartsOn:0,firstWeekContainsDate:1}};function hE(t){const e=$e(t);return Sj(e,Mj(e))+1}function fE(t){const e=$e(t),n=+va(e)-+jj(e);return Math.round(n/sy)+1}function ay(t,e){var u,h,f,p;const n=$e(t),r=n.getFullYear(),s=Ka(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(f=s.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=$n(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=Ti(o,e),l=$n(t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=Ti(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function pE(t,e){var a,l,c,u;const n=Ka(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=ay(t,e),i=$n(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Ti(i,e)}function gE(t,e){const n=$e(t),r=+Ti(n,e)-+pE(n,e);return Math.round(r/sy)+1}function Z(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const an={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Z(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Z(n+1,2)},d(t,e){return Z(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Z(t.getHours()%12||12,e.length)},H(t,e){return Z(t.getHours(),e.length)},m(t,e){return Z(t.getMinutes(),e.length)},s(t,e){return Z(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Z(s,e.length)}},Er={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yp={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return an.y(t,e)},Y:function(t,e,n,r){const s=ay(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return Z(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Z(i,e.length)},R:function(t,e){const n=iy(t);return Z(n,e.length)},u:function(t,e){const n=t.getFullYear();return Z(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Z(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Z(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return an.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Z(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=gE(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Z(s,e.length)},I:function(t,e,n){const r=fE(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Z(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):an.d(t,e)},D:function(t,e,n){const r=hE(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Z(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Z(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Z(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Z(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Er.noon:r===0?s=Er.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Er.evening:r>=12?s=Er.afternoon:r>=4?s=Er.morning:s=Er.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return an.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):an.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Z(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Z(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):an.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):an.s(t,e)},S:function(t,e){return an.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return xp(r);case"XXXX":case"XX":return nr(r);case"XXXXX":case"XXX":default:return nr(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return xp(r);case"xxxx":case"xx":return nr(r);case"xxxxx":case"xxx":default:return nr(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+vp(r,":");case"OOOO":default:return"GMT"+nr(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+vp(r,":");case"zzzz":default:return"GMT"+nr(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Z(r,e.length)},T:function(t,e,n){const r=t.getTime();return Z(r,e.length)}};function vp(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+Z(i,2)}function xp(t,e){return t%60===0?(t>0?"-":"+")+Z(Math.abs(t)/60,2):nr(t,e)}function nr(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Z(Math.trunc(r/60),2),i=Z(r%60,2);return n+s+e+i}const wp=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ly=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},mE=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return wp(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",wp(r,e)).replace("{{time}}",ly(s,e))},yE={p:ly,P:mE},vE=/^D+$/,xE=/^Y+$/,wE=["D","DD","YY","YYYY"];function _E(t){return vE.test(t)}function bE(t){return xE.test(t)}function kE(t,e,n){const r=SE(t,e,n);if(console.warn(r),wE.includes(t))throw new RangeError(r)}function SE(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jE=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,EE=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,CE=/^'([^]*?)'?$/,PE=/''/g,TE=/[a-zA-Z]/;function _p(t,e,n){var u,h,f,p;const r=Ka(),s=r.locale??dE,i=r.firstWeekContainsDate??((h=(u=r.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((p=(f=r.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,a=$e(t);if(!Pj(a))throw new RangeError("Invalid time value");let l=e.match(EE).map(v=>{const y=v[0];if(y==="p"||y==="P"){const x=yE[y];return x(v,s.formatLong)}return v}).join("").match(jE).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const y=v[0];if(y==="'")return{isToken:!1,value:NE(v)};if(yp[y])return{isToken:!0,value:v};if(y.match(TE))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(v=>{if(!v.isToken)return v.value;const y=v.value;(bE(y)||_E(y))&&kE(y,e,String(t));const x=yp[y[0]];return x(a,y,s.localize,c)}).join("")}function NE(t){const e=t.match(CE);return e?e[1].replace(PE,"'"):t}function OE(t){return oy(t,Ej(t))}const cy=({taskId:t,onClose:e,onStatusChange:n})=>{var S,E,k,j,L,T,P,O,H,Q,W;const{currentUser:r}=_t(),[s,i]=b.useState(null),[o,a]=b.useState(!0),[l,c]=b.useState(null),[u,h]=b.useState(null),[f,p]=b.useState(null),[v,y]=b.useState(!1),[x,m]=b.useState([]);b.useEffect(()=>{(async()=>{if(!t){c("ID de tarea no proporcionado."),a(!1);return}a(!0),c(null);try{const{data:R,error:N}=await q.from("tasks").select("*").eq("id",t).single();if(N||!R)throw new Error("Tarea no encontrada.");const A={...R,stores:Array.isArray(R.stores)?R.stores:typeof R.stores=="string"&&R.stores.length>0?R.stores.split(",").map(V=>V.trim()):typeof R.store=="string"&&R.store.length>0?R.store.split(",").map(V=>V.trim()):[],due_date:R.due_date||"",priority:R.priority,status:R.status,taskType:R.task_type||R.taskType||"",assigned_user_auth_id:R.assigned_user_auth_id||R.assignedUserAuthId||"",evidenceImageUrl:R.evidence_image_url||R.evidenceImageUrl||"",isRecurring:R.is_recurring??R.isRecurring,recurrencePattern:R.recurrence_pattern??R.recurrencePattern};i(A);const{data:I}=await q.from("task_evidence").select("*").eq("task_id",R.id).order("created_at",{ascending:!0});let B=Array.isArray(I)?I:[];if(A.evidenceImageUrl&&(B=[...B,{id:`legacy-${R.id}`,task_id:R.id,url:A.evidenceImageUrl,uploaded_by_auth_id:A.assigned_user_auth_id||"",created_at:A.due_date||""}]),m(B),A.assigned_user_auth_id){const{data:V,error:Ee}=await q.from("users").select("*").eq("auth_id",A.assigned_user_auth_id).single();h(Ee||!V?{id:-1,auth_id:A.assigned_user_auth_id,name:`Auth ID: ${A.assigned_user_auth_id}`,email:"",store:"",role:""}:V)}}catch(R){c(R instanceof Error?R.message:"Error desconocido al cargar la tarea")}finally{a(!1)}})()},[t]);const g=z=>{z.target.files&&z.target.files[0]&&p(z.target.files[0])},w=async()=>{if(!(!s||!f)){y(!0);try{const z=f.name.split(".").pop(),R=`task-${s.id}-${Date.now()}.${z}`,{error:N}=await q.storage.from("evidence").upload(R,f);if(N)throw N;const{data:A}=q.storage.from("evidence").getPublicUrl(R),I=A.publicUrl,{data:B,error:V}=await q.from("task_evidence").insert({task_id:s.id,url:I,uploaded_by_auth_id:(r==null?void 0:r.id)??null}).select().single();if(V)throw V;const{error:Ee}=await q.from("tasks").update({status:"OK"}).eq("id",s.id);if(Ee)throw Ee;i({...s,status:"OK"}),m([...x,B]),p(null)}catch(z){c(z instanceof Error?z.message:"No se pudo subir la evidencia")}finally{y(!1)}}};if(o)return d.jsx("div",{className:"p-8 text-center text-gray-700",children:"Cargando detalle de tarea..."});if(l)return d.jsxs("div",{className:"p-8 text-center text-red-600 bg-red-50 p-4 rounded-md",children:["Error: ",l]});if(!s)return d.jsx("div",{className:"p-8 text-center text-gray-700",children:"Tarea no encontrada."});const _=(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="supervisor"||(r==null?void 0:r.role)==="employee"||(r==null?void 0:r.id)===s.assigned_user_auth_id;return d.jsxs("div",{className:"rounded-xl p-6 md:p-8 max-w-2xl mx-auto relative",children:[e&&d.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl font-bold z-10","aria-label":"Cerrar",children:"×"}),d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start mb-6 pb-6 border-b border-gray-200",children:[d.jsxs("div",{className:"flex items-center w-full",children:[d.jsx("button",{"data-status":!0,onClick:async z=>{var N;if(z.stopPropagation(),!s)return;const R=((N=s.status)==null?void 0:N.toLowerCase().replace(" ",""))==="ok"?"Pendiente":"OK";try{const{error:A}=await q.from("tasks").update({status:R}).eq("id",s.id);if(A)throw new Error("Error al actualizar estado de la tarea");i({...s,status:R}),n&&n(R)}catch(A){c(A instanceof Error?A.message:"No se pudo actualizar el estado")}},className:`transition-colors rounded-full p-1 focus:outline-none mr-3 ${((S=s.status)==null?void 0:S.toLowerCase().replace(" ",""))==="ok"?"text-teal-600":"text-gray-400 hover:text-indigo-500"}`,title:((E=s.status)==null?void 0:E.toLowerCase().replace(" ",""))==="ok"?"Marcar como Pendiente":"Marcar como OK","aria-label":((k=s.status)==null?void 0:k.toLowerCase().replace(" ",""))==="ok"?"Marcar como Pendiente":"Marcar como OK",children:((j=s.status)==null?void 0:j.toLowerCase().replace(" ",""))==="ok"?d.jsx(Kc,{size:28,fill:"none",strokeWidth:2}):d.jsx(Yc,{size:28,strokeWidth:2})}),d.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2 md:mb-0",children:s.name})]}),d.jsxs("div",{className:"flex space-x-2 mt-2 md:mt-0",children:[d.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${((L=s.priority)==null?void 0:L.toLowerCase())==="urgente"||((T=s.priority)==null?void 0:T.toLowerCase())==="high"?"bg-red-100 text-red-700":((P=s.priority)==null?void 0:P.toLowerCase())==="rutinaria"||((O=s.priority)==null?void 0:O.toLowerCase())==="medium"?"bg-yellow-100 text-yellow-700":((H=s.priority)==null?void 0:H.toLowerCase())==="low"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.priority||"N/A"}),d.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full border ${((Q=s.status)==null?void 0:Q.toLowerCase().replace(" ",""))==="pendiente"?"bg-orange-50 text-orange-700 border-orange-200":((W=s.status)==null?void 0:W.toLowerCase().replace(" ",""))==="ok"?"bg-teal-50 text-teal-700 border-teal-200":"bg-gray-100 text-gray-700 border-gray-200"}`,children:s.status||"N/A"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 mb-6 text-sm",children:[d.jsxs("div",{children:[d.jsx("strong",{className:"text-gray-500",children:"Tipo de Tarea:"})," ",d.jsx("span",{className:"text-gray-800",children:s.task_type||"No especificado"})]}),d.jsxs("div",{children:[d.jsx("strong",{className:"text-gray-500",children:"Tiendas:"})," ",d.jsx("span",{className:"text-gray-800",children:Array.isArray(s.stores)&&s.stores.length>0?s.stores.join(", "):"N/A"})]}),d.jsxs("div",{children:[d.jsx("strong",{className:"text-gray-500",children:"Asignada a:"})," ",d.jsx("span",{className:"text-gray-800",children:(u==null?void 0:u.name)||(s.assigned_user_auth_id?`Auth ID: ${s.assigned_user_auth_id}`:"Nadie")})]}),d.jsxs("div",{children:[d.jsx("strong",{className:"text-gray-500",children:"Fecha Límite:"})," ",d.jsx("span",{className:"text-gray-800",children:s.due_date||"No definida"})]})]}),s.description&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-1",children:"Descripción:"}),d.jsx("p",{className:"text-gray-600 leading-relaxed whitespace-pre-wrap",children:s.description})]}),x.length>0&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-2",children:"Evidencias:"}),d.jsx(ME,{images:x.map(z=>({url:z.url,id:String(z.id)}))})]}),_&&d.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 space-y-6",children:d.jsxs("div",{children:[d.jsx("label",{htmlFor:"evidence-upload",className:"block text-sm font-medium text-gray-700 mb-1",children:"Subir/Actualizar Evidencia:"}),d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-3 space-y-2 md:space-y-0",children:[d.jsx("input",{id:"evidence-upload",name:"evidence-upload",type:"file",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",onChange:g,accept:"image/*"}),d.jsxs("button",{type:"button",onClick:w,disabled:!f||v,className:"px-5 py-3 bg-teal-600 text-white rounded-md hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:bg-gray-300 flex items-center text-sm",children:[d.jsx(T1,{size:18,className:"mr-2"}),v?"Subiendo...":"Subir Evidencia"]})]})]})})]})},ME=({images:t})=>{const[e,n]=b.useState(0),[r,s]=b.useState(!1);if(t.length===0)return null;const i=()=>n(a=>a===0?t.length-1:a-1),o=()=>n(a=>a===t.length-1?0:a+1);return d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsxs("div",{className:"relative w-full flex justify-center items-center",children:[d.jsx("button",{onClick:i,className:"absolute left-0 z-10 bg-white bg-opacity-70 rounded-full p-2 shadow hover:bg-opacity-100 transition","aria-label":"Anterior",children:d.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),d.jsx("img",{src:t[e].url,alt:`Evidencia ${e+1}`,className:"max-w-xs md:max-w-md rounded-lg shadow-md border mx-8 cursor-pointer",onClick:()=>s(!0)}),d.jsx("button",{onClick:o,className:"absolute right-0 z-10 bg-white bg-opacity-70 rounded-full p-2 shadow hover:bg-opacity-100 transition","aria-label":"Siguiente",children:d.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]}),d.jsx("div",{className:"mt-2 flex space-x-2",children:t.map((a,l)=>d.jsx("button",{onClick:()=>n(l),className:`w-3 h-3 rounded-full ${l===e?"bg-indigo-600":"bg-gray-300"}`,"aria-label":`Ir a la imagen ${l+1}`},a.id))}),d.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[e+1," / ",t.length]}),r&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70",onClick:()=>s(!1),children:d.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg flex items-center justify-center",style:{maxWidth:"60vw",maxHeight:"60vh",width:"auto",height:"auto"},onClick:a=>a.stopPropagation(),children:[d.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 text-2xl font-bold z-10",onClick:()=>s(!1),"aria-label":"Cerrar",children:"×"}),d.jsx("img",{src:t[e].url,alt:`Evidencia ampliada ${e+1}`,className:"object-contain rounded max-w-full max-h-[60vh]",style:{display:"block",margin:"0 auto"}})]})})]})};function LE(){const{currentUser:t}=_t(),[e,n]=b.useState([]),[r,s]=b.useState(!0),[i,o]=b.useState(null),[a,l]=b.useState("table"),[c,u]=b.useState("all"),[h,f]=b.useState("all"),[p,v]=b.useState("all"),[y,x]=b.useState((t==null?void 0:t.role)==="supervisor"?t.store:"all"),[m,g]=b.useState(!1),[w,_]=b.useState(null),[S,E]=b.useState(!0),[k,j]=b.useState(!1),[L,T]=b.useState(!1),[P,O]=b.useState(null),H=Vn(),Q=new Date,W=Oj(Q),z=Tj(Q),R=Nj({start:W,end:z});if(b.useEffect(()=>{(async()=>{if(t){s(!0),o(null);try{let $=q.from("tasks").select("*");t.role==="employee"?$=$.eq("assigned_user_auth_id",t.id):t.role==="supervisor"?$=$.contains("stores",[t.store]):t.role==="admin"&&y!=="all"&&($=$.contains("stores",[y]));const{data:fe,error:F}=await $;if(F)throw new Error("Error al cargar tareas");const Ue=(fe||[]).map(Te=>({...Te,assigned_user_name:Te.assigned_user_name||null,stores:Array.isArray(Te.stores)?Te.stores:typeof Te.stores=="string"&&Te.stores.length>0?Te.stores.split(",").map(Ga=>Ga.trim()):typeof Te.store=="string"&&Te.store.length>0?Te.store.split(",").map(Ga=>Ga.trim()):[]}));n(Ue)}catch($){o($ instanceof Error?$.message:"Error desconocido al cargar tareas")}finally{s(!1)}}})()},[t,y]),r)return d.jsx("div",{className:"p-8 text-center",children:"Cargando tareas..."});if(i)return d.jsxs("div",{className:"p-8 text-center text-red-500",children:["Error: ",i]});const N=M=>{switch(M==null?void 0:M.toLowerCase()){case"urgente":case"high":return"bg-red-100 text-red-700";case"rutinaria":case"medium":return"bg-yellow-100 text-yellow-700";case"low":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},A=M=>{switch(M==null?void 0:M.toLowerCase().replace(" ","")){case"pendiente":case"pending":return"bg-yellow-50 text-yellow-700 border border-yellow-200";case"ok":return"bg-green-50 text-green-700 border border-green-200";case"inprogress":return"bg-blue-100 text-blue-700";case"completed":return"bg-teal-100 text-teal-700";default:return"bg-gray-100 text-gray-700"}};let I="Mis tareas";(t==null?void 0:t.role)==="admin"?I="Todas las tareas (Vista Administrador)":((t==null?void 0:t.role)==="supervisor"||(t==null?void 0:t.role)==="employee")&&(I="Tareas tienda");const B=e.filter(M=>{var Ue,Te;const $=c==="all"||((Ue=M.status)==null?void 0:Ue.toLowerCase().replace(" ",""))===c.toLowerCase().replace(" ",""),fe=h==="all"||((Te=M.priority)==null?void 0:Te.toLowerCase())===h.toLowerCase(),F=p==="all"||M.assigned_user_auth_id===p;return $&&fe&&F}),V=()=>{const M=B.filter(F=>["pendiente","pending"].includes(kt(F.status))),$=B.filter(F=>["ok"].includes(kt(F.status))),fe=(F,Ue)=>d.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-5 hover:shadow-xl transition-shadow cursor-pointer flex flex-col",onClick:Te=>{Te.target.closest("button[data-status]")||kd(F.id)},children:[d.jsxs("div",{className:"flex items-start mb-2",children:[d.jsx("button",{"data-status":!0,onClick:Te=>{Te.stopPropagation(),Sd(F)},className:`transition-colors rounded-full p-1 focus:outline-none mt-1 mr-3 ${Ue?"text-teal-600":"text-gray-400 hover:text-indigo-500"}`,title:Ue?"Marcar como Pendiente":"Marcar como OK","aria-label":Ue?"Marcar como Pendiente":"Marcar como OK",children:Ue?d.jsx(Kc,{size:22,fill:"none",strokeWidth:2}):d.jsx(Yc,{size:22,strokeWidth:2})}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:F.name}),d.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${N(F.priority)}`,children:F.priority||"N/A"})]}),d.jsx("p",{className:"text-sm text-gray-600 mb-1 line-clamp-2 h-10",children:F.description||"Sin descripción."})]})]}),d.jsxs("div",{className:"text-xs text-gray-500 my-3",children:[F.stores&&F.stores.length>0&&d.jsxs("span",{className:"block",children:["Tiendas: ",F.stores.join(", ")]}),d.jsxs("span",{className:"block",children:["Vence: ",F.due_date||"N/A"]}),d.jsxs("span",{className:"block font-medium",children:["Asignada a: ",F.assigned_user_name??"N/A"]})]}),d.jsx("div",{className:"flex justify-start items-center mt-auto",children:d.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${A(F.status)}`,children:F.status||"N/A"})})]},F.id);return d.jsxs("div",{children:[d.jsxs("div",{className:"mb-4 border rounded-lg bg-white shadow",children:[d.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-3 text-lg font-semibold text-gray-800 hover:bg-gray-50 focus:outline-none",onClick:()=>E(F=>!F),children:[d.jsxs("span",{children:["🕒 Pendiente (",M.length,")"]}),d.jsx("span",{className:`transform transition-transform ${S?"":"-rotate-90"}`,children:"▼"})]}),S&&d.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.length>0?M.map(F=>fe(F,!1)):d.jsx("div",{className:"p-4 text-gray-500 col-span-full",children:"No hay tareas pendientes."})})]}),d.jsxs("div",{className:"mb-4 border rounded-lg bg-white shadow",children:[d.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-3 text-lg font-semibold text-gray-800 hover:bg-gray-50 focus:outline-none",onClick:()=>j(F=>!F),children:[d.jsxs("span",{children:["✔️ OK (",$.length,")"]}),d.jsx("span",{className:`transform transition-transform ${k?"":"-rotate-90"}`,children:"▼"})]}),k&&d.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:$.length>0?$.map(F=>fe(F,!0)):d.jsx("div",{className:"p-4 text-gray-500 col-span-full",children:"No hay tareas OK."})})]})]})},Ee=()=>d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[d.jsx("div",{className:"text-xl font-semibold text-center mb-6",children:_p(Q,"MMMM yyyy")}),d.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"].map(M=>d.jsx("div",{className:"text-center font-medium text-gray-500 text-sm",children:M},M))}),d.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:W.getDay()}).map((M,$)=>d.jsx("div",{className:"h-32 bg-gray-50 rounded-lg"},`empty-${$}`)),R.map((M,$)=>{const fe=B.filter(F=>F.due_date&&oy(new Date(F.due_date),M));return d.jsxs("div",{className:`h-32 p-1 border rounded-lg ${OE(M)?"border-indigo-500":"border-gray-200"}`,children:[d.jsx("div",{className:"text-right text-sm font-medium mb-1",children:_p(M,"d")}),d.jsx("div",{className:"overflow-y-auto max-h-24",children:fe.map(F=>d.jsx("div",{onClick:()=>H(`/tasks/${F.id}`),className:`text-xs p-1 mb-1 rounded cursor-pointer ${A(F.status)} truncate`,title:`${F.name} - ${F.assigned_user_name??""}`,children:F.name},F.id))})]},$)})]})]}),Ce=M=>{_(M),g(!0)},bt=async()=>{if(w){s(!0),o(null);try{const{error:M}=await q.from("tasks").delete().eq("id",w.id);if(M)throw new Error("Error al eliminar la tarea");n($=>$.filter(fe=>fe.id!==w.id)),g(!1),_(null)}catch(M){o(M instanceof Error?M.message:"Error desconocido al eliminar la tarea")}finally{s(!1)}}},Pe=()=>{g(!1),_(null)},kt=M=>(M??"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[^a-z]/g,""),Ya=B.filter(M=>["pendiente","pending"].includes(kt(M.status))),Qa=B.filter(M=>["ok"].includes(kt(M.status))),Le={info:"w-12",tarea:"min-w-[180px] w-2/6",tienda:"min-w-[120px] w-1/6",asignado:"min-w-[120px] w-1/6",vence:"min-w-[110px] w-1/6",prioridad:"min-w-[100px] w-1/12",estado:"min-w-[100px] w-1/12",acciones:"w-16"},_d=(t==null?void 0:t.role)==="admin",bd=M=>d.jsxs("table",{className:"min-w-[700px] w-full table-auto divide-y divide-gray-200 text-sm sm:text-base",children:[d.jsx("thead",{className:"bg-gray-100",children:d.jsxs("tr",{children:[d.jsx("th",{className:Le.info}),d.jsx("th",{className:Le.tarea+" px-2 py-3 sm:px-6 sm:py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap",children:"Tarea"}),_d&&d.jsx("th",{className:Le.tienda+" px-2 py-3 sm:px-6 sm:py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap",children:"Tienda"}),d.jsx("th",{className:Le.asignado+" px-2 py-3 sm:px-6 sm:py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap",children:"Asignado A"}),d.jsx("th",{className:Le.vence+" px-2 py-3 sm:px-6 sm:py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap",children:"Vence"}),d.jsx("th",{className:Le.prioridad+" px-2 py-3 sm:px-6 sm:py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap",children:"Prioridad"}),d.jsx("th",{className:Le.estado+" px-2 py-3 sm:px-6 sm:py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap",children:"Estado"}),d.jsx("th",{className:Le.acciones+" px-2 py-3 sm:px-6 sm:py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map($=>{var F;const fe=kt($.status)==="ok";return d.jsxs("tr",{className:"hover:bg-indigo-50 transition-colors duration-150 cursor-pointer active:bg-indigo-100",style:{WebkitTapHighlightColor:"transparent"},onClick:Ue=>{Ue.target.closest("button[data-delete],button[data-status]")||kd($.id)},children:[d.jsx("td",{className:Le.info+" px-2 py-3 sm:px-3 sm:py-4 whitespace-nowrap align-middle text-center",children:d.jsx("button",{"data-status":!0,onClick:Ue=>{Ue.stopPropagation(),Sd($)},className:`transition-colors rounded-full p-1 focus:outline-none ${fe?"text-teal-600":"text-gray-400 hover:text-indigo-500"}`,title:fe?"Marcar como Pendiente":"Marcar como OK","aria-label":fe?"Marcar como Pendiente":"Marcar como OK",children:fe?d.jsx(Kc,{size:22,fill:"none",strokeWidth:2}):d.jsx(Yc,{size:22,strokeWidth:2})})}),d.jsxs("td",{className:Le.tarea+" px-2 py-3 sm:px-6 sm:py-4 whitespace-nowrap align-middle",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900 break-words",children:$.name}),d.jsx("div",{className:"text-xs text-gray-500 line-clamp-1 break-words",children:$.description||"Sin descripción"})]}),_d&&d.jsx("td",{className:Le.tienda+" px-2 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-700 align-middle",children:((F=$.stores)==null?void 0:F.join(", "))||d.jsx("span",{className:"text-gray-300",children:"-"})}),d.jsx("td",{className:Le.asignado+" px-2 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-700 align-middle",children:$.assigned_user_name??"N/A"}),d.jsx("td",{className:Le.vence+" px-2 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm text-gray-700 align-middle",children:$.due_date??"N/A"}),d.jsx("td",{className:Le.prioridad+" px-2 py-3 sm:px-6 sm:py-4 whitespace-nowrap align-middle",children:d.jsx("span",{className:`px-2 py-1 text-xs leading-5 font-semibold rounded-full ${N($.priority)}`,children:$.priority||"N/A"})}),d.jsx("td",{className:Le.estado+" px-2 py-3 sm:px-6 sm:py-4 whitespace-nowrap align-middle",children:d.jsx("span",{className:`px-2 py-1 text-xs leading-5 font-semibold rounded-full ${A($.status)}`,children:$.status||"N/A"})}),d.jsx("td",{className:Le.acciones+" px-2 py-3 sm:px-6 sm:py-4 whitespace-nowrap text-sm font-medium align-middle flex gap-2 items-center",children:(t==null?void 0:t.role)==="admin"&&d.jsx("button",{"data-delete":!0,onClick:Ue=>{Ue.stopPropagation(),Ce($)},className:"text-red-600 hover:text-red-800 focus:outline-none",title:"Eliminar Tarea",children:d.jsx(g0,{size:20})})})]},$.id)})})]}),hy=()=>d.jsxs("div",{className:"w-full overflow-x-auto",children:[m&&w&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:d.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-2xl max-w-sm w-full relative",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Eliminar tarea"}),d.jsxs("p",{className:"mb-6 text-gray-700",children:["¿Estás seguro de que deseas eliminar la tarea ",d.jsx("span",{className:"font-semibold",children:w.name}),"? Esta acción no se puede deshacer."]}),d.jsxs("div",{className:"flex justify-center gap-3",children:[d.jsx("button",{onClick:Pe,className:"px-4 py-2 rounded bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Cancelar"}),d.jsx("button",{onClick:bt,className:"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700",children:"Eliminar"})]})]})}),d.jsxs("div",{className:"mb-4 border rounded-lg bg-white shadow",children:[d.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-3 text-lg font-semibold text-gray-800 hover:bg-gray-50 focus:outline-none",onClick:()=>E(M=>!M),children:[d.jsxs("span",{children:["🕒 Pendiente (",Ya.length,")"]}),d.jsx("span",{className:`transform transition-transform ${S?"":"-rotate-90"}`,children:"▼"})]}),S&&d.jsx("div",{className:"p-2 pt-0",children:Ya.length>0?bd(Ya):d.jsx("div",{className:"p-4 text-gray-500",children:"No hay tareas pendientes."})})]}),d.jsxs("div",{className:"mb-4 border rounded-lg bg-white shadow",children:[d.jsxs("button",{className:"w-full flex items-center justify-between px-4 py-3 text-lg font-semibold text-gray-800 hover:bg-gray-50 focus:outline-none",onClick:()=>j(M=>!M),children:[d.jsxs("span",{children:["✔️ OK (",Qa.length,")"]}),d.jsx("span",{className:`transform transition-transform ${k?"":"-rotate-90"}`,children:"▼"})]}),k&&d.jsx("div",{className:"p-2 pt-0",children:Qa.length>0?bd(Qa):d.jsx("div",{className:"p-4 text-gray-500",children:"No hay tareas OK."})})]})]}),fy=()=>{u("all"),f("all"),v("all"),(t==null?void 0:t.role)==="admin"?x("all"):(t==null?void 0:t.role)==="supervisor"&&x(t.store)},py=Array.from(new Set(B.flatMap(M=>M.stores||[]))),gy=Array.from(new Set(B.map(M=>M.assigned_user_name).filter(M=>!!M))),kd=M=>{O(M),T(!0)},my=()=>{T(!1),O(null)},Sd=async M=>{const $=kt(M.status)==="ok"?"Pendiente":"OK";try{await q.from("tasks").update({status:$}).eq("id",M.id),n(fe=>fe.map(F=>F.id===M.id?{...F,status:$}:F))}catch{}};return d.jsxs("div",{className:"p-4 md:p-8",children:[d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[d.jsx("h1",{className:"text-2xl font-bold",children:I}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("button",{onClick:()=>l("table"),className:`p-2 rounded-lg ${a==="table"?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:"Vista de listado",children:d.jsx(P1,{size:20})}),d.jsx("button",{onClick:()=>l("grid"),className:`p-2 rounded-lg ${a==="grid"?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:"Vista de cuadrícula",children:d.jsx(w1,{size:20})}),d.jsx("button",{onClick:()=>l("calendar"),className:`p-2 rounded-lg ${a==="calendar"?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:"Vista de calendario",children:d.jsx(m1,{size:20})})]})]}),d.jsxs("div",{className:"mb-6 p-4 bg-white rounded-xl shadow-lg grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 items-end w-full",children:[(t==null?void 0:t.role)==="admin"&&d.jsxs("div",{children:[d.jsx("label",{htmlFor:"store-filter-tasks",className:"block text-xs font-medium text-gray-500 mb-1",children:"Tienda"}),d.jsxs("select",{id:"store-filter-tasks",value:y,onChange:M=>x(M.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todas las Tiendas"}),py.map(M=>d.jsx("option",{value:M,children:M},M))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"status-filter-tasks",className:"block text-xs font-medium text-gray-500 mb-1",children:"Estado"}),d.jsxs("select",{id:"status-filter-tasks",value:c,onChange:M=>u(M.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todos"}),d.jsx("option",{value:"Pendiente",children:"Pendiente"}),d.jsx("option",{value:"OK",children:"OK"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"priority-filter-tasks",className:"block text-xs font-medium text-gray-500 mb-1",children:"Prioridad"}),d.jsxs("select",{id:"priority-filter-tasks",value:h,onChange:M=>f(M.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todas"}),d.jsx("option",{value:"Urgente",children:"Urgente"}),d.jsx("option",{value:"Rutinaria",children:"Rutinaria"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"user-filter-tasks",className:"block text-xs font-medium text-gray-500 mb-1",children:"Asignado A"}),d.jsxs("select",{id:"user-filter-tasks",value:p,onChange:M=>v(M.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todos los Usuarios"}),gy.map(M=>d.jsx("option",{value:M,children:M},M))]})]}),d.jsx("div",{className:"flex justify-end items-end h-full",children:d.jsx("button",{type:"button",onClick:fy,className:"p-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg shadow-sm border border-gray-300 transition flex items-center",title:"Resetear Filtros","aria-label":"Resetear Filtros",children:d.jsx(v1,{size:20})})})]}),B.length===0&&d.jsx("p",{className:"text-gray-600",children:"No hay tareas para mostrar."}),a==="table"?hy():a==="grid"?V():Ee(),L&&P&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",children:d.jsx("div",{className:"relative bg-white rounded-2xl shadow-2xl p-0 max-w-3xl w-full mx-4",style:{maxHeight:"90vh",overflowY:"auto"},children:d.jsx(cy,{taskId:P,onClose:my,onStatusChange:M=>{n($=>$.map(fe=>fe.id===P?{...fe,status:M}:fe))}})})})]})}function AE(){const{currentUser:t}=_t(),e=Vn(),[n,r]=b.useState({name:"",description:"",assignedUserAuthId:"",stores:(t==null?void 0:t.role)==="supervisor"?[t.store]:[],due_date:"",priority:"Rutinaria",taskType:"",isRecurring:!1,recurrenceType:"weekly",interval:1,daysOfWeek:[],dayOfMonth:1,recurrenceEndDate:""}),[s,i]=b.useState([]),[o,a]=b.useState([]),[l,c]=b.useState(!1),[u,h]=b.useState(null),[f,p]=b.useState(!1),[v,y]=b.useState("tasks"),[x,m]=b.useState(null),[g,w]=b.useState(null);b.useEffect(()=>{(async()=>{try{const{data:O,error:H}=await q.from("users").select("*");if(H)throw new Error("Failed to fetch users");i(O||[]);const Q=Array.from(new Set((O||[]).map(W=>W.store))).sort();a(Q),(t==null?void 0:t.role)==="admin"&&Q.length>0}catch{h("Error al cargar usuarios")}})()},[t]);const _=P=>{const{name:O,value:H,type:Q}=P.target;if(Q==="checkbox"){const W=P.target.checked;r(z=>({...z,[O]:W}))}else r(W=>({...W,[O]:H}))},S=P=>{r(O=>{const H=O.daysOfWeek.includes(P)?O.daysOfWeek.filter(Q=>Q!==P):[...O.daysOfWeek,P];return{...O,daysOfWeek:H}})},E=P=>{r(O=>O.stores.includes(P)?{...O,stores:O.stores.filter(H=>H!==P)}:{...O,stores:[...O.stores,P]})},k=P=>{r(O=>({...O,stores:P?o:[]}))},j=async P=>{if(P.preventDefault(),h(null),c(!0),p(!1),!t){w("error"),m("No se pudo identificar al usuario actual para asignar la tarea."),c(!1),setTimeout(()=>{m(null),w(null),c(!1)},2200);return}try{let O;n.isRecurring&&(O={type:n.recurrenceType,interval:n.interval,endDate:n.recurrenceEndDate||void 0},n.recurrenceType==="weekly"?O.daysOfWeek=n.daysOfWeek:n.recurrenceType==="monthly"&&(O.dayOfMonth=n.dayOfMonth));const H={name:n.name,description:n.description,store:n.stores.join(","),assigned_user_id:n.assignedUserAuthId||null,due_date:n.due_date,priority:n.priority,status:"Pendiente",task_type:n.taskType,evidence_image_url:"",is_recurring:n.isRecurring,recurrence_pattern:n.isRecurring?O:null,assigned_user_auth_id:n.assignedUserAuthId||null},{error:Q}=await q.from("tasks").insert(H);if(Q)throw Q;w("success"),m("¡Tarea creada exitosamente!"),setTimeout(()=>{m(null),w(null),c(!1)},1800)}catch(O){w("error"),m(O instanceof Error?O.message:"Ocurrió un error desconocido"),setTimeout(()=>{m(null),w(null),c(!1)},2200)}finally{c(!1)}};if((t==null?void 0:t.role)!=="supervisor"&&(t==null?void 0:t.role)!=="admin")return d.jsxs("div",{className:"p-8 text-center",children:[d.jsx("p",{className:"text-red-600",children:"No tienes permiso para crear tareas."}),d.jsx("button",{onClick:()=>e("/"),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Volver al Inicio"})]});const L=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],T=n.stores.length===0?s:s.filter(P=>n.stores.includes(P.store));return d.jsxs("div",{className:"p-8",children:[d.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Panel de Tareas"}),d.jsx("div",{className:"mb-6",children:d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[d.jsxs("button",{className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center transition-colors duration-150 ${v==="tasks"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>y("tasks"),children:[d.jsx(p0,{className:"w-5 h-5 mr-2"}),"Tareas"]}),d.jsxs("button",{className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center transition-colors duration-150 ${v==="announcements"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>y("announcements"),children:[d.jsx(rf,{className:"w-5 h-5 mr-2"}),"Comunicados"]})]})})}),v==="tasks"&&d.jsx("div",{children:d.jsx("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded",onClick:()=>p(!0),children:"Crear Tarea"})}),v==="announcements"&&d.jsx("div",{children:d.jsxs("div",{className:"flex flex-col items-center min-h-[200px] justify-center w-full text-center text-gray-500 text-lg",children:[d.jsx(rf,{className:"w-10 h-10 mb-4 text-indigo-400"}),d.jsx("span",{children:"Próximamente: sección de comunicados."})]})}),f&&!x&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:d.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-2xl max-w-2xl w-full relative",children:[d.jsx("button",{onClick:()=>p(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl font-bold","aria-label":"Cerrar",children:"×"}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Crear Tarea"}),u&&d.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded",role:"alert",children:d.jsx("p",{children:u})}),d.jsxs("form",{onSubmit:j,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Tarea *"}),d.jsx("input",{type:"text",name:"name",id:"name",required:!0,className:"mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:n.name,onChange:_,placeholder:"Ej: Limpieza Bodega Semanal"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),d.jsx("textarea",{name:"description",id:"description",rows:4,className:"mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:n.description,onChange:_,placeholder:"Instrucciones detalladas de la tarea..."})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiendas *"}),d.jsxs("div",{className:"border rounded-md p-2 bg-gray-50 max-h-40 overflow-y-auto",children:[d.jsxs("label",{className:"flex items-center mb-2 font-medium",children:[d.jsx("input",{type:"checkbox",checked:n.stores.length===o.length&&o.length>0,onChange:P=>k(P.target.checked),className:"mr-2"}),"Seleccionar todas"]}),o.map(P=>d.jsxs("label",{className:"flex items-center mb-1",children:[d.jsx("input",{type:"checkbox",checked:n.stores.includes(P),onChange:()=>E(P),className:"mr-2"}),P]},P))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"assignedUserAuthId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Asignar a Usuario"}),d.jsxs("select",{name:"assignedUserAuthId",id:"assignedUserAuthId",className:"mt-1 block w-full p-3 border border-gray-300 bg-white rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:n.assignedUserAuthId,onChange:_,children:[d.jsx("option",{value:"",children:"Sin asignar"}),T.map(P=>((t==null?void 0:t.role)==="admin"||P.store===(t==null?void 0:t.store))&&d.jsxs("option",{value:P.auth_id,children:[P.name," (",P.store,")"]},P.id))]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"due_date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Límite *"}),d.jsx("input",{type:"date",name:"due_date",id:"due_date",required:!0,className:"mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:n.due_date,onChange:_,min:new Date().toISOString().split("T")[0]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridad"}),d.jsxs("select",{name:"priority",id:"priority",className:"mt-1 block w-full p-3 border border-gray-300 bg-white rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:n.priority,onChange:_,children:[d.jsx("option",{value:"Rutinaria",children:"Rutinaria"}),d.jsx("option",{value:"Urgente",children:"Urgente"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"taskType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Tarea"}),d.jsxs("select",{name:"taskType",id:"taskType",className:"mt-1 block w-full p-3 border border-gray-300 bg-white rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:n.taskType,onChange:_,children:[d.jsx("option",{value:"",children:"Seleccionar tipo..."}),d.jsx("option",{value:"Limpieza",children:"Limpieza"}),d.jsx("option",{value:"Visual Merchandising",children:"Visual Merchandising"}),d.jsx("option",{value:"Operaciones",children:"Operaciones"}),d.jsx("option",{value:"Inventario",children:"Inventario"}),d.jsx("option",{value:"Mantenimiento",children:"Mantenimiento"}),d.jsx("option",{value:"Apertura",children:"Apertura"}),d.jsx("option",{value:"Cierre",children:"Cierre"}),d.jsx("option",{value:"Capacitación",children:"Capacitación"}),d.jsx("option",{value:"Compras",children:"Compras"}),d.jsx("option",{value:"Incidencia",children:"Incidencia"}),d.jsx("option",{value:"Otro",children:"Otro"})]})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isRecurring",name:"isRecurring",checked:n.isRecurring,onChange:_,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),d.jsx("label",{htmlFor:"isRecurring",className:"ml-2 block text-sm text-gray-900",children:"Tarea Recurrente"})]}),n.isRecurring&&d.jsxs("div",{className:"space-y-4 pl-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"recurrenceType",className:"block text-sm font-medium text-gray-700",children:"Tipo de Recurrencia"}),d.jsxs("select",{id:"recurrenceType",name:"recurrenceType",value:n.recurrenceType,onChange:_,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[d.jsx("option",{value:"daily",children:"Diaria"}),d.jsx("option",{value:"weekly",children:"Semanal"}),d.jsx("option",{value:"monthly",children:"Mensual"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"interval",className:"block text-sm font-medium text-gray-700",children:"Intervalo"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:n.interval,onChange:_,className:"mt-1 block w-24 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),d.jsx("span",{className:"text-sm text-gray-500",children:n.recurrenceType==="daily"?"días":n.recurrenceType==="weekly"?"semanas":"meses"})]})]}),n.recurrenceType==="weekly"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Días de la Semana"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:L.map((P,O)=>d.jsxs("label",{className:"inline-flex items-center",children:[d.jsx("input",{type:"checkbox",checked:n.daysOfWeek.includes(O),onChange:()=>S(O),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),d.jsx("span",{className:"ml-2 text-sm text-gray-700",children:P})]},P))})]}),n.recurrenceType==="monthly"&&d.jsxs("div",{children:[d.jsx("label",{htmlFor:"dayOfMonth",className:"block text-sm font-medium text-gray-700",children:"Día del Mes"}),d.jsx("input",{type:"number",id:"dayOfMonth",name:"dayOfMonth",min:"1",max:"31",value:n.dayOfMonth,onChange:_,className:"mt-1 block w-24 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"recurrenceEndDate",className:"block text-sm font-medium text-gray-700",children:"Fecha de Fin (opcional)"}),d.jsx("input",{type:"date",id:"recurrenceEndDate",name:"recurrenceEndDate",value:n.recurrenceEndDate,onChange:_,min:new Date().toISOString().split("T")[0],className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),d.jsx("div",{className:"pt-5",children:d.jsxs("div",{className:"flex justify-center space-x-3",children:[d.jsx("button",{type:"button",onClick:()=>p(!1),className:"w-32 px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancelar"}),d.jsx("button",{type:"submit",disabled:l,className:"w-32 px-6 py-3 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400",children:l?"Creando...":"Crear"})]})})]})]})}),x&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:d.jsxs("div",{className:"bg-white rounded-xl shadow-2xl px-10 py-8 flex flex-col items-center justify-center max-w-md w-full",role:"alert",children:[g==="success"&&d.jsxs("svg",{className:"w-12 h-12 mb-4 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"white"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2l4-4"})]}),g==="error"&&d.jsx("svg",{className:"w-12 h-12 mb-4 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),d.jsx("p",{className:"text-lg font-semibold mb-2",children:g==="success"?"Éxito":"Error"}),d.jsx("p",{className:"text-center text-gray-600",children:x})]})})]})}function DE(){const{id:t}=kw();return t?d.jsx(cy,{taskId:t}):d.jsx("div",{className:"p-8 text-center text-gray-700",children:"ID de tarea no proporcionado."})}function RE(){const{currentUser:t}=_t(),e=Vn(),[n,r]=b.useState([]),[s,i]=b.useState([]),[o,a]=b.useState(!0),[l,c]=b.useState(null),[u,h]=b.useState("all"),[f,p]=b.useState("all"),[v,y]=b.useState("all"),[x,m]=b.useState((t==null?void 0:t.role)==="supervisor"?t.store:"all");b.useEffect(()=>{if(!t||t.role!=="supervisor"&&t.role!=="admin"){a(!1);return}(async()=>{a(!0),c(null);try{const{data:j,error:L}=await q.from("users").select("*");if(L)throw new Error("Error al cargar usuarios");i(j||[]);let T=q.from("tasks").select("*");t.role==="supervisor"?T=T.contains("stores",[t.store]):t.role==="admin"&&x!=="all"&&(T=T.contains("stores",[x]));const{data:P,error:O}=await T;if(O)throw new Error("Error al cargar tareas");const H=(P||[]).map(Q=>{var W;return{...Q,assignedUserName:((W=(j||[]).find(z=>z.auth_id===Q.assigned_user_auth_id))==null?void 0:W.name)||"Desconocido"}});r(H)}catch(j){c(j instanceof Error?j.message:"Error desconocido al cargar datos")}finally{a(!1)}})()},[t,x]);const g=n.filter(k=>{var P,O;const j=u==="all"||((P=k.status)==null?void 0:P.toLowerCase().replace(" ",""))===u.toLowerCase().replace(" ",""),L=f==="all"||((O=k.priority)==null?void 0:O.toLowerCase())===f.toLowerCase(),T=v==="all"||k.assigned_user_auth_id===v;return j&&L&&T});if(!t||t.role!=="supervisor"&&t.role!=="admin")return d.jsx(Gs,{to:"/",replace:!0});if(o)return d.jsx("div",{className:"p-8 text-center",children:"Cargando vista general de tienda..."});if(l)return d.jsxs("div",{className:"p-8 text-center text-red-500 bg-red-50 p-4 rounded-md",children:["Error: ",l]});const w=k=>{switch(k==null?void 0:k.toLowerCase()){case"urgente":case"high":return"bg-red-100 text-red-700";case"rutinaria":case"medium":return"bg-yellow-100 text-yellow-700";case"low":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},_=k=>{switch(k==null?void 0:k.toLowerCase().replace(" ","")){case"pendiente":return"bg-orange-100 text-orange-700";case"ok":return"bg-teal-100 text-teal-700";default:return"bg-gray-100 text-gray-700"}},S=Array.from(new Set(s.map(k=>k.store))).sort(),E=Array.from(new Set(n.map(k=>k.assigned_user_auth_id))).map(k=>s.find(j=>j.auth_id===k)).filter(k=>k!==void 0);return d.jsxs("div",{children:[d.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:d.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2 sm:mb-0",children:"Vista de Tienda"})}),d.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:t.role==="admin"?"Visualizando tareas (Administración)":`Tienda: ${t.store} (Supervisor)`}),d.jsxs("div",{className:"mb-6 p-4 bg-white rounded-xl shadow-lg grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[t.role==="admin"&&d.jsxs("div",{children:[d.jsx("label",{htmlFor:"store-filter-overview",className:"block text-xs font-medium text-gray-500 mb-1",children:"Tienda"}),d.jsxs("select",{id:"store-filter-overview",value:x,onChange:k=>m(k.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todas las Tiendas"}),S.map(k=>d.jsx("option",{value:k,children:k},k))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"status-filter-overview",className:"block text-xs font-medium text-gray-500 mb-1",children:"Estado"}),d.jsxs("select",{id:"status-filter-overview",value:u,onChange:k=>h(k.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todos"}),d.jsx("option",{value:"Pendiente",children:"Pendiente"}),d.jsx("option",{value:"OK",children:"OK"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"priority-filter-overview",className:"block text-xs font-medium text-gray-500 mb-1",children:"Prioridad"}),d.jsxs("select",{id:"priority-filter-overview",value:f,onChange:k=>p(k.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todas"}),d.jsx("option",{value:"Urgente",children:"Urgente"}),d.jsx("option",{value:"Rutinaria",children:"Rutinaria"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"user-filter-overview",className:"block text-xs font-medium text-gray-500 mb-1",children:"Asignado A"}),d.jsxs("select",{id:"user-filter-overview",value:v,onChange:k=>y(k.target.value),className:"block w-full p-3 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-700 bg-gray-50 hover:bg-gray-100",children:[d.jsx("option",{value:"all",children:"Todos los Usuarios"}),E.map(k=>d.jsx("option",{value:k.auth_id,children:k.name},k.auth_id))]})]})]}),g.length===0&&!o&&d.jsx("p",{className:"text-gray-600 text-center py-6",children:"No hay tareas que coincidan con los filtros."}),d.jsx("div",{className:"bg-white rounded-xl shadow-2xl overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-100",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tarea"}),t.role==="admin"&&d.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tienda"}),d.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Asignado A"}),d.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Vence"}),d.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Prioridad"}),d.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Estado"}),d.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(k=>{var j;return d.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.name}),d.jsx("div",{className:"text-xs text-gray-500 line-clamp-1",children:k.description||"Sin descripción"})]}),t.role==="admin"&&d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:((j=k.stores)==null?void 0:j.join(", "))||"N/A"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:k.assignedUserName||"N/A"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:k.due_date||"N/A"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`px-3 py-1 text-xs leading-5 font-semibold rounded-full ${w(k.priority)}`,children:k.priority||"N/A"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`px-3 py-1 text-xs leading-5 font-semibold rounded-full ${_(k.status)}`,children:k.status||"N/A"})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:d.jsx("button",{onClick:()=>e(`/tasks/${k.id}`),className:"text-indigo-600 hover:text-indigo-800 hover:underline",children:"Ver Detalles"})})]},k.id)})})]})})]})}function IE({isOpen:t,onClose:e,user:n,onSave:r,availableRoles:s}){const[i,o]=b.useState(null),[a,l]=b.useState([]),[c,u]=b.useState(!0),[h,f]=b.useState(null);b.useEffect(()=>{(async()=>{try{const{data:m,error:g}=await q.from("stores").select("name");if(g)throw new Error("Failed to fetch stores");l(m||[]),u(!1)}catch(m){console.error("Error fetching stores:",m),u(!1)}})()},[]),b.useEffect(()=>{o(n?{...n}:null)},[n]);const p=x=>{const{name:m,value:g}=x.target;o(w=>w?{...w,[m]:g}:null)},v=()=>{i&&r(i)},y=async()=>{if(i&&window.confirm("¿Estás seguro de que deseas eliminar este usuario? Esta acción no se puede deshacer."))try{const{error:x}=await q.from("users").delete().eq("auth_id",i.auth_id);if(x)throw new Error("Error al eliminar el usuario de la base de datos");const g=await(await fetch("http://localhost:3001/delete-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:i.auth_id})})).json();if(!g.success)throw new Error(g.error||"Error al eliminar el usuario de Auth");f("Usuario eliminado completamente."),setTimeout(()=>{f(null),e()},1500)}catch(x){alert("Error al eliminar el usuario."),console.error("Error al eliminar el usuario:",x)}};return t?c?d.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-[60] flex justify-center items-center",children:d.jsx("div",{className:"relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:d.jsx("p",{className:"text-center",children:"Cargando..."})})}):i?d.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-[60] flex justify-center items-center",children:d.jsxs("div",{className:"relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:[h&&d.jsx("div",{className:"mb-4 p-2 bg-green-100 text-green-800 rounded text-center text-sm",children:h}),d.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 text-center mb-4",children:"Editar Usuario"}),d.jsxs("div",{className:"space-y-3 px-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name-modal",className:"block text-sm font-medium text-gray-700",children:"Nombre"}),d.jsx("input",{type:"text",name:"name",id:"name-modal",value:i.name,onChange:p,className:"mt-1 p-2 w-full border border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email-modal",className:"block text-sm font-medium text-gray-700",children:"Email"}),d.jsx("input",{type:"email",name:"email",id:"email-modal",value:i.email,onChange:p,className:"mt-1 p-2 w-full border border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"store-modal",className:"block text-sm font-medium text-gray-700",children:"Tienda"}),d.jsx("select",{name:"store",id:"store-modal",value:i.store,onChange:p,className:"mt-1 p-2 w-full border border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",children:a.map(x=>d.jsx("option",{value:x.name,children:x.name},x.name))})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"role-modal",className:"block text-sm font-medium text-gray-700",children:"Rol"}),d.jsx("select",{name:"role",id:"role-modal",value:i.role,onChange:p,className:"mt-1 p-2 w-full border border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",children:s.map(x=>d.jsx("option",{value:x,children:x.charAt(0).toUpperCase()+x.slice(1)},x))})]})]}),d.jsxs("div",{className:"flex justify-between pt-4 mt-4 border-t",children:[d.jsxs("button",{onClick:e,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 text-sm flex items-center",children:[d.jsx(g1,{size:16,className:"mr-1"}),"Cancelar"]}),d.jsxs("button",{onClick:v,className:"px-3 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm flex items-center",children:[d.jsx(E1,{size:16,className:"mr-1"}),"Guardar"]}),d.jsx("button",{onClick:y,className:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm flex items-center",children:"Eliminar"})]})]})}):null:null}const FE=({isOpen:t,onClose:e,onUserAdded:n})=>{const[r,s]=b.useState({name:"",email:"",password:"",store:"",role:""}),[i,o]=b.useState([]),[a,l]=b.useState(null),[c,u]=b.useState(!1);b.useEffect(()=>{if(!t)return;s({name:"",email:"",password:"",store:"",role:""}),(async()=>{const{data:v,error:y}=await q.from("stores").select("name");y||o(v||[])})()},[t]);const h=p=>{const{name:v,value:y}=p.target;s(x=>({...x,[v]:y}))},f=async p=>{var v;p.preventDefault(),l(null),u(!0);try{const{data:y,error:x}=await q.auth.signUp({email:r.email,password:r.password});if(x)throw x;const m=(v=y.user)==null?void 0:v.id;if(!m)throw new Error("No se pudo obtener el ID del usuario");const{error:g}=await q.from("users").insert([{auth_id:m,name:r.name,email:r.email,store:r.store,role:r.role}]);if(g)throw g;n(),e()}catch(y){const x=y instanceof Error?y.message:"Error al crear el usuario";l(x)}finally{u(!1)}};return t?d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md relative",children:[d.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,children:"×"}),d.jsx("h2",{className:"text-xl font-bold mb-4",children:"Agregar Usuario"}),d.jsxs("form",{onSubmit:f,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),d.jsx("input",{name:"name",value:r.name,onChange:h,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),d.jsx("input",{name:"email",type:"email",value:r.email,onChange:h,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),d.jsx("input",{name:"password",type:"password",value:r.password,onChange:h,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tienda"}),d.jsxs("select",{name:"store",value:r.store,onChange:h,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",children:[d.jsx("option",{value:"",children:"Seleccionar tienda..."}),i.map(p=>d.jsx("option",{value:p.name,children:p.name},p.name))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rol"}),d.jsxs("select",{name:"role",value:r.role,onChange:h,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",children:[d.jsx("option",{value:"",children:"Seleccionar rol..."}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"supervisor",children:"Supervisor"}),d.jsx("option",{value:"employee",children:"Empleado"})]})]}),a&&d.jsx("p",{className:"text-red-500 text-sm text-center",children:a}),d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 rounded",children:"Cancelar"}),d.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-indigo-600 text-white rounded",children:c?"Guardando...":"Guardar"})]})]})]})}):null};function uy(){const[t,e]=b.useState([]),[n,r]=b.useState(!1),[s,i]=b.useState(!1),[o,a]=b.useState(null),[l,c]=b.useState(!0),[u,h]=b.useState(null),f=["admin","supervisor","employee"],{currentUser:p}=_t();b.useEffect(()=>{if((p==null?void 0:p.role)!=="admin"){h("Acceso denegado. Solo administradores pueden ver esta página."),c(!1),e([]);return}(async()=>{c(!0),h(null);try{const{data:w,error:_}=await q.from("users").select("*");if(_)throw new Error(_.message);e(w||[])}catch(w){const _=w instanceof Error?w.message:"Error desconocido";h(`Error cargando usuarios: ${_}.`),console.error("Error fetching users:",w)}finally{c(!1)}})()},[p]);const v=g=>{a(g),r(!0)},y=()=>{r(!1),a(null)},x=async g=>{if(g){h(null);try{const{error:w}=await q.from("users").update(g).eq("id",g.id);if(w)throw new Error(w.message);e(_=>_.map(S=>S.id===g.id?g:S)),y()}catch(w){const _=w instanceof Error?w.message:"Error desconocido";h(`Error guardando usuario: ${_}`),console.error("Error saving user:",w)}}},m=async()=>{c(!0),h(null);try{const{data:g,error:w}=await q.from("users").select("*");if(w)throw new Error(w.message);e(g||[])}catch(g){const w=g instanceof Error?g.message:"Error desconocido";h(`Error cargando usuarios: ${w}.`),console.error("Error fetching users:",g)}finally{c(!1)}};return l?d.jsx("div",{className:"p-8 text-center",children:"Cargando..."}):u?d.jsx("div",{className:"p-8 text-center text-red-600",children:u}):d.jsxs("div",{children:[d.jsx("div",{className:"mb-4",children:d.jsx("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded",onClick:()=>i(!0),children:"Agregar Usuario"})}),d.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Store"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length>0?t.map(g=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.name}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.email}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.store}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${g.role==="admin"?"bg-red-100 text-red-800":g.role==="supervisor"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:g.role})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:d.jsx("button",{onClick:()=>v(g),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"})})]},g.id)):d.jsx("tr",{children:d.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:"No hay usuarios para mostrar."})})})]})}),d.jsx(IE,{isOpen:n,onClose:y,user:o,onSave:x,availableRoles:f}),d.jsx(FE,{isOpen:s,onClose:()=>i(!1),onUserAdded:m})]})}function dy(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[s,i]=b.useState(null),[o,a]=b.useState(!1),[l,c]=b.useState({});b.useEffect(()=>{u()},[]);const u=async()=>{r(!0),i(null);try{const{data:y,error:x}=await q.from("stores").select("*");if(x)throw new Error(x.message);e(y||[])}catch(y){i("Error loading stores. Please try again."),console.error("Error:",y)}finally{r(!1)}},h=async y=>{y.preventDefault(),i(null);try{if(l.id){const{error:x}=await q.from("stores").update(l).eq("id",l.id);if(x)throw new Error(x.message)}else{const{error:x}=await q.from("stores").insert([l]);if(x)throw new Error(x.message)}await u(),a(!1),c({})}catch(x){i("Error saving store. Please try again."),console.error("Error:",x)}},f=async y=>{if(window.confirm("¿Estás seguro de que quieres eliminar esta tienda?"))try{const{error:x}=await q.from("stores").delete().eq("id",y);if(x)throw new Error(x.message);await u()}catch(x){i("Error deleting store. Please try again."),console.error("Error:",x)}},p=y=>{c(y),a(!0)},v=y=>{const{name:x,value:m}=y.target;c(g=>({...g,[x]:m}))};return n?d.jsx("div",{className:"text-center py-4",children:"Loading stores..."}):d.jsxs("div",{children:[d.jsx("div",{className:"mb-6",children:d.jsxs("button",{onClick:()=>{c({}),a(!0)},className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:[d.jsx(j1,{className:"w-5 h-5 mr-2"}),"Agregar Nueva Tienda"]})}),s&&d.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded-md",children:s}),o&&d.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:d.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[d.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:l.id?"Editar Tienda":"Agregar Nueva Tienda"}),d.jsxs("form",{onSubmit:h,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),d.jsx("input",{type:"text",name:"name",value:l.name||"",onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Calle"}),d.jsx("input",{type:"text",name:"street_name",value:l.street_name||"",onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Número"}),d.jsx("input",{type:"text",name:"street_number",value:l.street_number||"",onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Info Adicional"}),d.jsx("input",{type:"text",name:"additional_info",value:l.additional_info||"",onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ciudad"}),d.jsx("input",{type:"text",name:"city",value:l.city||"",onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado/Región"}),d.jsx("input",{type:"text",name:"state",value:l.state||"",onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Cancelar"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:l.id?"Guardar Cambios":"Crear Tienda"})]})]})]})}),d.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dirección"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ciudad"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(y=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:y.name}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[y.street_name," ",y.street_number,y.additional_info&&d.jsx("span",{className:"text-xs text-gray-400 block",children:y.additional_info})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.city}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.state}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d.jsxs("div",{className:"flex space-x-3",children:[d.jsx("button",{onClick:()=>p(y),className:"text-indigo-600 hover:text-indigo-900",children:d.jsx(k1,{className:"w-5 h-5"})}),d.jsx("button",{onClick:()=>f(y.id),className:"text-red-600 hover:text-red-900",children:d.jsx(g0,{className:"w-5 h-5"})})]})})]},y.id))})]})})]})}function zE(){const{currentUser:t}=_t(),[e,n]=b.useState("users");return(t==null?void 0:t.role)!=="admin"?d.jsx("div",{className:"p-8 text-center",children:"No tienes permiso para ver esta página."}):d.jsxs("div",{className:"p-8",children:[d.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Panel de Administración"}),d.jsx("div",{className:"mb-6",children:d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[d.jsxs("button",{onClick:()=>n("users"),className:`${e==="users"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[d.jsx(m0,{className:"w-5 h-5 mr-2"}),"Usuarios"]}),d.jsxs("button",{onClick:()=>n("stores"),className:`${e==="stores"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[d.jsx(C1,{className:"w-5 h-5 mr-2"}),"Tiendas"]})]})})}),e==="users"?d.jsx(uy,{}):d.jsx(dy,{})]})}const ln=({children:t})=>{const{currentUser:e,isLoading:n}=_t(),r=xr();return n?d.jsx("div",{className:"flex justify-center items-center min-h-screen",children:"Cargando..."}):e?t:d.jsx(Gs,{to:"/login",state:{from:r},replace:!0})};function $E(){const{currentUser:t,isLoading:e}=_t(),[n,r]=kn.useState(!1);if(kn.useEffect(()=>{console.log("[App] isLoading:",e,"| currentUser:",t),r(!e&&!t)},[e,t]),kn.useEffect(()=>{const i=async()=>{console.log("[App] Refrescando sesión de Supabase...");try{const{data:{session:a}}=await q.auth.getSession();console.log("[App] getSession() result:",a),a||r(!0)}catch(a){console.error("[App] Error al refrescar sesión:",a),r(!0)}},o=()=>{document.visibilityState==="visible"&&i()};return window.addEventListener("focus",i),document.addEventListener("visibilitychange",o),()=>{window.removeEventListener("focus",i),document.removeEventListener("visibilitychange",o)}},[]),e)return d.jsx("div",{className:"flex justify-center items-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})});const s=window.location.pathname==="/login"||window.location.pathname==="/register";return d.jsxs("div",{className:"min-h-screen bg-gray-100 flex",children:[t&&d.jsx(O1,{}),d.jsxs("div",{className:`flex-1 ${t?"ml-0":""}`,children:[n&&!s&&d.jsxs("div",{className:"fixed top-0 left-0 w-full z-50 bg-red-100 text-red-700 text-center py-3 font-semibold shadow flex flex-col items-center",children:[d.jsx("span",{children:"Sesión expirada. Por favor, vuelve a iniciar sesión."}),d.jsx("a",{href:"/login",className:"mt-2 inline-block px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition font-normal text-base shadow",children:"Ir al Login"})]}),d.jsxs(Fw,{children:[d.jsx(ut,{path:"/login",element:t?d.jsx(Gs,{to:"/",replace:!0}):d.jsx(wj,{})}),d.jsx(ut,{path:"/register",element:t?d.jsx(Gs,{to:"/",replace:!0}):d.jsx(_j,{})}),d.jsx(ut,{path:"/",element:d.jsx(ln,{children:d.jsx(xj,{})})}),d.jsx(ut,{path:"/tasks",element:d.jsx(ln,{children:d.jsx(LE,{})})}),d.jsx(ut,{path:"/tasks/new",element:d.jsx(ln,{children:d.jsx(AE,{})})}),d.jsx(ut,{path:"/tasks/:id",element:d.jsx(ln,{children:d.jsx(DE,{})})}),d.jsx(ut,{path:"/store",element:d.jsx(ln,{children:d.jsx(RE,{})})}),d.jsx(ut,{path:"/admin",element:d.jsx(ln,{children:d.jsx(zE,{})})}),d.jsx(ut,{path:"/admin/users",element:d.jsx(ln,{children:d.jsx(uy,{})})}),d.jsx(ut,{path:"/admin/stores",element:d.jsx(ln,{children:d.jsx(dy,{})})}),d.jsx(ut,{path:"*",element:d.jsx(Gs,{to:"/",replace:!0})})]})]})]})}Wl.createRoot(document.getElementById("root")).render(d.jsx(kn.StrictMode,{children:d.jsx(Vw,{children:d.jsxs(h1,{children:[" ",d.jsx($E,{})]})})}));export{wy as g};
